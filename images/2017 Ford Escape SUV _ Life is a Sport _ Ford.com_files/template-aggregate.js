(function(){var d=YAHOO.util;var g=YAHOO.lang;var f=YAHOO.widget;var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var h=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");var e=200;a.Autocomplete=function(m,i,l,j,o){this.el=m;o.maxEntries=o.maxEntries||10;var q=m.parentNode;if(!l){l=h.Dom.getElementByClassName("autocompletions","div",q);}if(!l){l=document.createElement("div");l.className="autocompletions";q.insertBefore(l,null);}var k=new f.AutoComplete(m,l,i,{maxResultsDisplayed:o.maxEntries});var p=h.Dom.getElementByClassName("autocompletions_bottom","div",q);if(!p){p=document.createElement("div");p.className="autocompletions_bottom";q.insertBefore(p,null);}var n=new f.AutoComplete(m,p,i,{maxResultsDisplayed:o.maxEntries});if(o.footerHTML){k.setFooter(o.footerHTML);n.setFooter(o.footerHTML);}if(o.reverse){k.applyLocalFilter=true;k.filterResults=function(u,s,t,r){t.results=t.results.slice(0,k.maxResultsDisplayed).reverse();return t;};}this.siteSearchInputObject=o.siteSearchInputObject;k.siteSearchInputObject=n.siteSearchInputObject=o.siteSearchInputObject;k.generateRequest=n.generateRequest=function(r){return r.replace(new RegExp("[%20]+$"),"")+"*";};k.doBeforeLoadData=n.doBeforeLoadData=function(t,r,s){if(!r.results.length){this.collapseContainer();}return true;};k.formatResult=n.formatResult=function(s,t,r){return h.Text.ellipse(r,e);};k.resultTypeList=n.resultTypeList=false;k.minQueryLength=n.minQueryLength=1;k.autoHighlight=n.autoHighlight=false;if(k.itemSelectEvent!==null){k.itemSelectEvent.subscribe(this.onItemSelect);}if(n.itemSelectEvent!==null){n.itemSelectEvent.subscribe(this.onItemSelect);}if(o.reverse){b.on(window,"scroll",function(u,s){var r=c.getViewportHeight()/2;var t=c.getY(m)-c.getDocumentScrollTop();if(t>r){s.autocomplete.getContainerEl().style.visibility="visible";s.autocomplete_bottom.getContainerEl().style.visibility="hidden";}else{s.autocomplete.getContainerEl().style.visibility="hidden";s.autocomplete_bottom.getContainerEl().style.visibility="visible";}},{el:m,autocomplete:k,autocomplete_bottom:n});p.style.visibility="hidden";}else{p.style.display="none";}};a.Autocomplete.prototype={onItemSelect:function(l,k){var i=null;try{i=k[2]["Location[0].DimValueName"];}catch(j){}if(i){_widgets.context.SearchContext.triggerSearch(i,this.siteSearchInputObject);}}};}());
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var f=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");var d=getPackageForName("com.forddirect.ng.context");a.SiteSearchInput=function(j,l){l.reverse=l.reverse||false;l.maxEntries=l.maxEntries||10;var i="<a href='http://owner.ford.com' class='blockLink' target=_blank align='center'><font class='foot'>Ford Owner</font></a><font class='special'>|</font><a href='http://www.ford.com/help/contact/' align='center' class='blockLink'><font class='foot'>Contact US</font></a>";l.footerHTML=i;this.el=j;this.params=l;this.searchForm=f.Dom.getElementByClassName("site-search-form","form",this.el);this.formAction=f.Dom.getElementByClassName("form-action","input",this.el);this.searchText=f.Dom.getElementByClassName("site-search-input","input",this.el);this.searchButton=f.Dom.getElementByClassName("search-go","input",this.el);var h=(this.params&&this.params.autocomplete)||false;var g=(this.params.autocompleteurl||"");this.searchType=(this.params.searchType||"search");var k;if(this.searchType==="search"){k=new a.Autocomplete(this.searchText,_widgets.context.SearchContext.getAutocompleteDataSource(g),false,false,{maxEntries:l.maxEntries,reverse:l.reverse,siteSearchInputObject:this,footerHTML:(this.params.footerHTML||"")});}else{k=new a.Autocomplete(this.searchText,_widgets.context.SearchContext.getAutocompleteDataSource(g),false,false,{maxEntries:l.maxEntries,reverse:l.reverse,siteSearchInputObject:this,footerHTML:("")});}_widgets.context.SearchContext.subscribe(this.searchType+"TextChange",this.handleTextChange,this,true);this.onSearchTextBlur();b.on(this.searchText,"focus",this.onSearchTextFocus,this,true);b.on(this.searchText,"blur",this.onSearchTextBlur,this,true);b.on(this.searchForm,"submit",this.searchSubmit,this,true);b.on(this.searchText,"keydown",this.onSearchKeyDown,this,true);b.on(this.searchText,"click",this.onSearchTextClick,this,true);};var e=a.SiteSearchInput.prototype;e.show=function(){c.removeClass(this.el,"inactive");};e.hide=function(){c.addClass(this.el,"inactive");};e.onSearchTextFocus=function(g){if(this.searchText.value==="undefined"){this.searchText.value="search";}if(this.searchText.value===_widgets.context.SearchContext.DEFAULT_SEARCH_STRING_NEW){this.searchText.value="";c.removeClass(this.searchText,"default-text");}else{this.searchText.select();c.removeClass(this.searchText,"default-text");}};e.onSearchTextBlur=function(g){if(this.searchText.value===""||f.Array.contains(_widgets.context.SearchContext.DEFAULT_VALUES,this.searchText.value)){if(this.searchForm.name==="endecaLiveSearchForm"){this.searchText.value=_widgets.context.SearchContext.DEFAULT_SEARCH_STRING_NEW;}else{this.searchText.value=_widgets.context.SearchContext.DEFAULT_SEARCH_STRING;}c.addClass(this.searchText,"default-text");}};e.validateSearchValue=function(g){var h=false;if(g===""||g===_widgets.context.SearchContext.DEFAULT_NOWORD_STRING||g===_widgets.context.SearchContext.DEFAULT_SEARCH_STRING){h=true;}return h;};e.searchSubmit=function(h){b.stopEvent(h);var i=f.trimString(this.searchText.value);if(this.validateSearchValue(i)){this.searchText.value=_widgets.context.SearchContext.DEFAULT_NOWORD_STRING;this.searchText.focus();this.searchText.select();}else{if((this.el.id==="search-endeca-live")&&(this.params.widgetloc)){oMetricsTracker.trackMicroData("liveSearchAskResults");}if(this.formAction!==null){this.searchForm.action=this.formAction.value;}var g=ngbs.ownerMap.isOwnerSite()?"owner":"retail";ngbs.u.cookie.set("searchType",g,{domain:__params.domain});this.searchForm.submit();}};e.onSearchKeyDown=function(g){if(g.keyCode===13){g.returnValue=false;g.cancel=true;this.searchButton.click();}};e.handleTextChange=function(g){if(g.newValue){this.searchText.value=g.newValue;}};e.onSearchTextClick=function(g){if(f.Array.contains(_widgets.context.SearchContext.DEFAULT_VALUES,this.searchText.value)){this.searchText.value="";}};}());
var timeout=500;var closetimer=0;var ddmenuitem=0;function mclose(){if(ddmenuitem){ddmenuitem.style.visibility="hidden";}}function mclosetime(){closetimer=window.setTimeout(mclose,timeout);}function mcancelclosetime(){if(closetimer){window.clearTimeout(closetimer);closetimer=null;}}function mopen(a){mcancelclosetime();if(ddmenuitem){ddmenuitem.style.visibility="hidden";}ddmenuitem=document.getElementById(a);ddmenuitem.style.visibility="visible";}document.onclick=mclose;
ngbs.widget("common-login",function(c,d){var e=jQuery;function b(){this.$container=d[0];this.VIEW_PREFIX="clw_xs_displayView";this.isInitialized=false;this.signinStarted=false;this.sessionStatusSent=false;if(this.exists(window.CLW_Options)){this.init();}}b.prototype={init:function(){var f=this;if(this.isIE()){this.parseClwObject();}this.loadCLW();this.bindEvents();if(typeof s==="undefined"){ngbs._message_bus.listen(document,"s-loaded",function(){f.bindMetrics();});}else{this.bindMetrics();}this.configureBenefits();this.configureLoader();},parseClwObject:function(){function j(k,v,o,l){var n=true,p,w,q,r,m,t,x,u;if(k.indexOf("#")>0){w=k.indexOf("#");p=k.substring(k.indexOf("#"),k.length);}else{w=k.length;p="";}r=k.substring(0,w);m=r.split("?");t="";if(m.length>1){x=m[1].split("&");for(q=0;q<x.length;q+=1){u=x[q].split("=");if(!(n&&u[0]===v)){if(t===""){t="?";}else{t+="&";}t+=u[0]+"="+(u[1]||"");}}}if(t===""){t="?";}if(l){t="?"+v+"="+o+((t.length>1)?"&"+t.substring(1):"");}else{if(t!==""&&t!=="?"){t+="&";}t+=v+"="+(o||"");}return m[0]+t+p;}function h(k,p){var n;var m=k.split("?");if(m.length>=2){var o=encodeURIComponent(p)+"=";var l=m[1].split(/[&;]/g);for(n=l.length;n-->0;n){if(l[n].lastIndexOf(o,0)!==-1){l.splice(n,1);}}k=m[0]+"?"+l.join("&");}return k;}function i(k){if(k==="current"){k=h(window.location.href,"regform");k=h(k,"regerror");}return k;}function g(k,l){e.each(l,function(m,n){if(m==="pageAfterSuccessfulLogin"){if(l.pageAfterSuccessfulLoginParam!==""){k=j(k,m,encodeURIComponent(j(i(n),"CLWInitLoad",l.pageAfterSuccessfulLoginParam,false)),false);}else{k=j(k,m,encodeURIComponent(i(n)),false);}}else{if(m==="pageAfterFailure"){if(l.pageAfterFailureParam!==""){k=j(k,m,encodeURIComponent(j(i(n),"CLWInitLoad",l.pageAfterFailureParam,false)),false);}else{k=j(k,m,encodeURIComponent(i(n)),false);}}else{if(m!=="pageAfterSuccessfulLoginParam"&&m!=="pageAfterFailureParam"){k=j(k,m,n,false);}}}});return k;}function f(k){if(typeof(k)==="object"&&k.hasOwnProperty("parse")&&k.parse){return g(i(k.urlBase+k.urlQuery),k.params);}}window.CLW_Options.IEPostData.LHURLSuccess=f(window.CLW_Options.IEPostData.LHURLSuccessParts);window.CLW_Options.IEPostData.LHURLFailure=f(window.CLW_Options.IEPostData.LHURLFailureParts);if(window.CLW_Options.make==="lincoln"){window.CLW_Options.IEPostData.NGPURLSuccess=i("current");window.CLW_Options.IEPostData.NGPURLFailure=j(i("current"),"regform","1",false);}},isIE:function(){return(window.navigator.userAgent.indexOf("MSIE ")>0||!!(window.navigator.userAgent.match(/Trident/)&&window.navigator.userAgent.match(/rv[: ]11/)));},isOldIE:function(){return window.navigator.userAgent.match(/MSIE ([0-9])\./);},initCLW:function(){var g=this;var f=setInterval(function(){if(g.exists(window.CLW_External)){clearInterval(f);window.CLW_External.fInit();g.isInitialized=true;}},250);},listenCustomEvent:function(f,g){if(document.addEventListener){document.addEventListener(f,g,false);}else{if(document.attachEvent){document.documentElement.attachEvent("onpropertychange",function(h){if(h.propertyName===f){g.call();}});}}},sendCustomEvent:function(h,f,g){var i;if(window.CustomEvent){i=new CustomEvent(f,g);}else{i=document.createEvent("CustomEvent");i.initCustomEvent(f,true,true,g);}h.dispatchEvent(i);},bindEvents:function(){var f=this;if(window.CLW_Options.sso){this.listenCustomEvent("clw_xs_sendSession",function(g){if(f.signinStarted){c.listen(document.body,"signInCompleted",function(){f.sessionEventHandler(g);});}else{f.sessionEventHandler(g);}});this.listenCustomEvent("clw_xs_not_authenticated",function(h){var g=new window.ThirdPartyAuthenticator();var i=g.getProvider();if(i!=="ANONYMOUS"){g.logoutUser();}f.sendSessionStatus(f.sessionStatusSent);});}else{f.sendSessionStatus(f.sessionStatusSent);}this.listenCustomEvent(this.VIEW_PREFIX,function(){f.$form=f.$form||e("#CLW_Main");});this.listenCustomEvent("clw_xs_signin",function(){var g=f.getAuthenticator();f.signinStarted=true;if(g){var i=f.getCallback(g),h;h=function(){var j="signInCompleted";i.call();f.signinStarted=false;ngbs._message_bus.send(document.body,j);};f.callAuthenticationService(h);}});this.listenCustomEvent("clw_xs_change_password",function(){ngbs.metrics.page("lc-change-password-complete");});e("body").on("click",".clw-continue-link",function(k){k.preventDefault();var i=f.getAuthenticator(),h=false,j,g=e("body.ng_save.skin-ford #page.view-gallery").length||e("body.ng_save.skin-ford #page.view-gallery_video").length||e("body.ng_save.mobile").length||false;if(i){if(!window.CLW_Options.mobileMode&&window.CLW_Options.make==="lincoln"){i.authenticateWithNextGenService("ANONYMOUS");}else{if(window.CLW_Options.make==="ford"){NextGen.SaveWidget.setSaveOnReload(NextGen.SaveWidget.saveData);h=i.getProviderCleanUrl("ANONYMOUS");if(g){window.location.href=h+encodeURIComponent(NextGen.SaveWidget.saveData.landingPageUrl);}else{window.location.href=h+encodeURIComponent(window.location.href);}}else{if(window.CLW_Options.make==="lincoln"){h=Concierge.AuthAPI.getProviderUrl("ANONYMOUS",true);window.location.href=h+encodeURIComponent(window.location.href);}}}f.disableAnonymous();f.closeForm();}});e("body").on("click",".clw-createacct",function(h){f.closeForm();if(window.CLW_Options.mobileMode){h.preventDefault();window.location.href=e("#register-splash").attr("href");}else{var g;g=e('.concierge-auth-trigger[data-action="register"]');if(g.length){g.trigger("click");}}});e("body").on("click",".clw-benefits-link",function(h){var g="";h.preventDefault();if(typeof __params!=="undefined"&&__params.hasOwnProperty("baseURL")){g=__params.baseURL;}else{g=window.location.protocol+"//"+window.location.host+"/";}if(window.CLW_Options.benefitsLinkHref.indexOf("http")>-1){window.location.href=window.CLW_Options.benefitsLinkHref;}else{window.location.href=g+window.CLW_Options.benefitsLinkHref;}});},bindMetrics:function(){var f={channel:s.channel,hier1:s.hier1,eVar11:s.eVar11,eVar12:s.eVar12,eVar16:s.eVar16,make:s.make,base:s.base};this.listenCustomEvent(this.VIEW_PREFIX+"_forgot",function(){var g=NextGen.isMobile?"ford-forgotPassword-mobile":"ford-forgotPassword";ngbs.metrics.page(g,f);});this.listenCustomEvent(this.VIEW_PREFIX+"_forgot_reset_e",function(){var g=NextGen.isMobile?"ford-passwordEmailSent-mobile":"ford-passwordEmailSent";ngbs.metrics.page(g,f);});this.listenCustomEvent(this.VIEW_PREFIX+"_forgot_assist",function(){var g=NextGen.isMobile?"ford-forgotAssist-mobile":"ford-forgotAssist";ngbs.metrics.click(g,f);});},callAuthenticationService:function(l,g){var f=this,k=window.CLW_Options.secureOriginUrl||window.location.href,j=k+"/services/user/authenticateCommonLoginUser",i="www."+window.CLW_Options.make+".com";this.addLoader();if(this.isOldIE()){var h={urlFrom:k,urlTo:j,data:"brandSite="+i,container:f.$container,method:"post",successCallback:function(){f.handleSuccess(l);f.sendCustomEvent(document,"clw_xs_signin_postAuthenticate");},errorCallback:function(){f.handleError(g);}};ngbs._message_bus.send(document.body,"ieproxy-send",h);}else{e.ajax({url:j,type:"post",data:{brandSite:i},xhrFields:{withCredentials:true}}).done(function(){f.handleSuccess(l);f.sendCustomEvent(document,"clw_xs_signin_postAuthenticate");}).fail(function(n,m){f.handleError(g);}).always(function(){f.removeLoader();});}},handleSuccess:function(f){this.closeForm();if(typeof f==="function"){window.setTimeout(function(){f.call();},200);}},handleError:function(f){this.removeLoader();this.showError("errorSystemdown");if(typeof f==="function"){window.setTimeout(function(){f.call();},200);}},configureBenefits:function(){var f=d.find("#common-login-benefits");if(f.length){this.addProperty(f.attr("prop"),f.html());}},configureLoader:function(){this.LOADER_CLASS="clw-loader";this.$loader=e('<div class="'+this.LOADER_CLASS+'"></div>');},addLoader:function(){if(typeof this.$form!=="undefined"){this.$form.find("div").first().append(this.$loader);}},removeLoader:function(){if(typeof this.$form!=="undefined"){this.$form.find("."+this.LOADER_CLASS).remove();}},addProperty:function(g,f){if(this.exists(window.CLW_Options)){window.CLW_Options[g]=f;}},disableAnonymous:function(){if((NextGen.AuthenticationWidget.userId)&&(this.exists(window.CLW_Options))){window.CLW_Options.viewOptions.signin.noContinue=true;}},openForm:function(h){var f=this,g=setInterval(function(){if(f.exists(window.CLW_External)&&typeof window.CLW_External.displayShow==="function"){window.CLW_External.displayShow(h);clearInterval(g);}},250);this.disableAnonymous();},closeForm:function(){if(this.exists(window.CLW_External)){window.CLW_External.displayClose();}},signOut:function(f){if(this.exists(window.CLW_Options)){if(f.indexOf("/concierge/")>-1){f=f.substr(0,f.indexOf("/concierge/"));}var g=f?"?redirect="+encodeURIComponent(f):"";window.location.href=window.CLW_Options.signoutRedirectUrl+g;}},getAuthenticator:function(){var f=false;if(window.CLW_Options.make==="ford"&&this.exists(NextGen)){f=NextGen.AuthenticationWidget;}else{if(this.exists(Concierge)){f=Concierge.AuthAPI;}}return f;},getCallback:function(g){var f=false;if(window.CLW_Options.mobileMode&&window.CLW_Options.make==="lincoln"){f=function(){ngbs.metrics.click("lc-login-complete");if(window.location.href.indexOf("choose_password")>-1){window.location.reload=window.location.href.split(window.location.search)[0];}else{window.location.reload();}};}else{f=function(){g.startPollingForUserID();};}return f;},showError:function(h){if(typeof this.$form!=="undefined"){var f=this.$form.find(".error_message"),g=h||"customError";e.each(f,function(i,j){if(e(j).hasClass(g)){e(j).show();return;}});}},exists:function(f){return typeof f!=="undefined"?true:false;},loadCLW:function(){var f=e(this.$container).find("#clw-file").data("src"),g=this;if(g.exists(window.CLW_GR)&&f.length){window.CLW_GR.require([f]);g.initCLW();}},sessionEventHandlerDebug:function(i){if(this.exists(i.detail)&&this.exists(i.detail.lh_session)){var j=i.detail.lh_session,g=this,f,m;if(g.setProperties()){f=g.lhSessionId;m=g.userId;ngbs._message_bus.send(document.body,"debug_clw_event_id",j);if(j!==f){var h=g.getAuthenticator();if(h){var l=g.getCallback(h);var k=function(){var n,o;g.setProperties();if(f){n="debug_clw_diff_id_cookie_old_id";o={oldGuid:m,newGuid:g.userId};}else{n="debug_clw_diff_id_no_cookie";o={newGuid:g.userId};}ngbs._message_bus.send(document.body,n,o);l.call();};g.callAuthenticationService(k);}}else{ngbs._message_bus.send(document.body,"debug_clw_same_id",m);}}else{this.showConsoleError();}}else{this.showConsoleError();}},sessionEventHandler:function(j){if(this.exists(j.detail)&&this.exists(j.detail.lh_session)){var k=j.detail.lh_session,h=this,f;if(h.setProperties()){f=h.lhSessionId;if(f===null||k!==f){var i=h.getAuthenticator();if(i){var m=h.getCallback(i);var l=function(){h.sendSessionStatus(false);h.setProperties();m.call();};var g=function(){h.sendSessionStatus(false);};h.callAuthenticationService(l,g);h.sessionStatusSent=true;}}}}this.sendSessionStatus(this.sessionStatusSent);},setProperties:function(){var g=new window.ThirdPartyAuthenticator(),f=true;this.userId=g.getUserId();if(g.hasOwnProperty("getLHSessionId")){this.lhSessionId=g.getLHSessionId();}else{f=false;}return f;},sendSessionStatus:function(g){if(!g){var f="lc-session-status";if(window.CLW_Options.make==="ford"){f="fd-session-status";}ngbs._message_bus.send(document.body,f);this.sessionStatusSent=true;}},showConsoleError:function(){if(console&&console.error){console.log("Warning: Session event object or session getter are missing.");}}};var a=new b();c.listen(document.body,"clw-open",function(g,f){if(!a.isInitialized){a.loadCLW();}a.openForm(f.action||"signin");});c.listen(document.body,"clw-close",function(g,f){a.closeForm();});c.listen(document.body,"clw-sign-out",function(h,g){var f=a.exists(g)?g.url:null;if(f.indexOf("choose_password")>-1){f=f.split(window.location.search)[0];}a.signOut(f);});c.listen(document.body,"clw-show-error",function(g,f){a.showError(f.error);});c.listen(document.body,"clw-signin",function(h,g){var f=a.getAuthenticator();if(f){var i=a.getCallback(f);a.handleSuccess(i);}});c.listen(document.body,"custom_sendSession",function(g,f){if(a.signinStarted){c.listen(document.body,"signInCompleted",function(h){a.sessionEventHandlerDebug(f.event);});}else{a.sessionEventHandlerDebug(f.event);}});});
ngbs.widget("iecorsproxy",function(b,c){var e;var a=function(f){this.$container=jQuery(f.container);this.MSG_PREFIX="ngbs_message-";this._params=f;this._init();};a.prototype={_init:function(){this._buildIframe();this._appendIframe();},_buildIframe:function(){var g=jQuery("<iframe style='display:none;' class='iecorsiframe'></iframe>"),f=this;var h=this._buildIframeSource();g.attr({src:h});this.$iframe=g;},_buildIframeSource:function(){var f=this._params.urlFrom+"/iecorsproxy/",g=f;g+="?url="+encodeURIComponent(this._params.urlTo);g+="&postdata="+encodeURIComponent(ngbs.u.encoder(this._params.data,"base64").encode());g+="&method="+this._params.method;return g;},_appendIframe:function(){this.$container.append(this.$iframe);this._addListener();},_addListener:function(){var f=this;window.addEventListener("message",function(j){if(f._isValidOrigin(j.origin)&&j.data.indexOf(f.MSG_PREFIX)>-1){var h=j.data.split("|"),g=h[0].split(f.MSG_PREFIX)[1],i=h[1];f._executeCallback(g,i);}},false);},_isValidOrigin:function(f){var g=/^https?\:\/\/*(([a-z])\w+.)*(ford|lincoln)\.com/;return f.match(g);},_executeCallback:function(f,h){var g=f.indexOf("-")>-1?f.split("-")[0]:f,i=f.split("-")[1]||false;if(g==="success"){if(typeof(this._params.successCallback)==="function"){this._params.successCallback(h);}}if(g==="error"||g==="parsererror"){if(typeof(this._params.errorCallback)==="function"){this._params.errorCallback(h,i);}}}};b.listen(document.body,"ieproxy-send",function(g,f){e=new a(f);});var d=function(){this._init();};d.prototype={_init:function(){this._params=this._parseUriParams();this._ajaxCall();this._response="";},_parseUriParams:function(){var f=ngbs.u.anchor.getQuery();jQuery.each(f,function(h,g){if(h==="url"){f[h]=decodeURIComponent(g);}if(h==="postdata"){f[h]=ngbs.u.encoder(decodeURIComponent(g),"base64").decode();}});return f;},_ajaxCall:function(){var f=this;jQuery.ajax({url:this._params.url,data:this._params.postdata,type:this._params.method,success:function(h,g,i){f._publishResponse(h,g,i);},xhrFields:{withCredentials:true}}).fail(function(h,g,i){f._publishResponse(h,g,i);});},_publishResponse:function(g,f,h){if(f==="error"){f+="-"+h.status;}window.parent.postMessage("ngbs_message-"+f+"|"+h.responseText,document.referrer||"*");}};if(jQuery(".view-iecorsproxy-view").length>0){e=new d();}});
(function(f,g,h){var b=f.document;var c=f.location;var d=f.console||{log:function(){}};var e=f.NextGen=f.NextGen||{};var a=g(e);e.baseURL=null;e.ready=false;e.events={AUTHENTICATION_COMPLETE_EVENT:"AUTHENTICATION_COMPLETE_EVENT",METRIC_TRACKER_EVENT:"METRIC_TRACKER_EVENT",AUTHENTICATION_STARTED:"AUTHENTICATION_STARTED",AUTHENTICATION_ENDED:"AUTHENTICATION_ENDED",AUTHENTICATION_LOGOUT_EVENT:"AUTHENTICATION_LOGOUT_EVENT",SAVE_STARTED:"SAVE_STARTED",SAVE_ENDED:"SAVE_ENDED"};e.widgets={MY_SAVED_ITEM_WIDGET_NAME:"MSI",UPGRADE_USER:"UPGRADE_USER",SAVE_WIDGET_NAME:"SAVE"};e.SaveAPI=(function(){var i=function(){this.SUCCESS="success";this.ERROR="error";};i.prototype={init:function(){},getBase:function(){return"/services/user/"+e.AuthenticationWidget.userId+"/SavedItems";},getAccessToken:function(){return e.AuthenticationWidget.accessToken;},getBrandSite:function(){return e.make==="Ford"?"www.ford.com":"www.lincoln.com";},getParameters:function(){return"accessToken="+encodeURIComponent(this.getAccessToken())+"&brandSite="+this.getBrandSite();},makeRequest:function(k,l,m,j){if(typeof j==="undefined"){j=this.defaultErrorHandler;}return g.ajax(k,l).done(m).fail(j);},defaultErrorHandler:function(l,k,j){throw new Error(j);},getSavedItems:function(n,k){var m=+new Date();var j=this.getBase()+".json?"+this.getParameters()+"&t="+m;var l={type:"GET"};return this.makeRequest(j,l,n,k);},deleteSavedItems:function(m,k){var j=this.getBase()+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createConfigVehicle:function(l,o,k,n){var j;if(n){j=this.getBase()+"/ConfigVehicle/"+n+"?"+this.getParameters();}else{j=this.getBase()+"/ConfigVehicle/?"+this.getParameters();}var m={type:"POST",data:l};return this.makeRequest(j,m,o,k);},deleteConfigVehicle:function(n,m,k){var j=this.getBase()+"/ConfigVehicle/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createInventoryVehicle:function(l,o,k,n){var j;if(n){j=this.getBase()+"/InventoryVehicle/"+n+"?"+this.getParameters();}else{j=this.getBase()+"/InventoryVehicle/?"+this.getParameters();}var m={type:"POST",data:l};return this.makeRequest(j,m,o,k);},deleteInventoryVehicle:function(n,m,k){var j=this.getBase()+"/InventoryVehicle/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createCPOVehicle:function(l,o,k,n){var j;if(n){j=this.getBase()+"/CPOVehicle/"+n+"?"+this.getParameters();}else{j=this.getBase()+"/CPOVehicle/?"+this.getParameters();}var m={type:"POST",data:l};return this.makeRequest(j,m,o,k);},deleteCPOVehicle:function(n,m,k){var j=this.getBase()+"/CPOVehicle/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createBrandContent:function(l,o,k,n){var j;if(n){j=this.getBase()+"/BrandContent/"+n+"?"+this.getParameters();}else{j=this.getBase()+"/BrandContent/?"+this.getParameters();}var m={type:"POST",data:l};return this.makeRequest(j,m,o,k);},deleteBrandContent:function(n,m,k){var j=this.getBase()+"/BrandContent/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createCompareVehicle:function(l,o,k,n){var j;if(n){j=this.getBase()+"/VehicleCompare/"+n+"?"+this.getParameters();}else{j=this.getBase()+"/VehicleCompare/?"+this.getParameters();}var m={type:"POST",data:l};return this.makeRequest(j,m,o,k);},deleteCompareVehicle:function(n,m,k){var j=this.getBase()+"/InventoryVehicle/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},deleteItem:function(m,n,l,k){var j;switch(m){case"image":case"video":case"technology":j="deleteBrandContent";break;case"cpo":j="deleteCPOVehicle";break;case"inventory_bp":case"inventory_si":j="deleteInventoryVehicle";break;case"config":j="deleteConfigVehicle";break;case"compare":j="deleteCompareVehicle";break;}return i[j].call(i,n,l,k);},listen:function(j,k){jQuery(b).on(j,k);},send:function(j,k){jQuery(b).trigger(j,k);}};i=new i();return i;}());e.AuthenticationWidget=(function(){var l;var j;var i;var k;var o;var m={FACEBOOK:"/services/authentication/oauth/requesttoken/facebook?redirectUrl=",TWITTER:"/services/authentication/oauth/requesttoken/twitter?redirectUrl=",GOOGLE:"/services/authentication/openid/discovery/google?redirectUrl=",YAHOO:"/services/authentication/openid/discovery/yahoo?redirectUrl=",ANONYMOUS:"/services/authentication/aauth/requesttoken/anonymous?redirectUrl="};var n=function(){this.userId=null;this.accessToken=null;this.provider=null;this.planType=null;this.authenticationWindow=null;this.authenticationTimer=null;this.contentAfterIcon=null;this.divider=null;this.mainContentDiv=null;this.isUpgraded=false;};n.prototype={init:function(){l=e.SavePopupWidget;j=e.SaveWidget;o=e.FallbackWidget;if(!f.ThirdPartyAuthenticator){return;}i=new f.ThirdPartyAuthenticator();k=new f.AXZAuthenticator();n.contentAfterIcon=g("#FNASW_content_after_icon");n.divider=g("#FNASW_divider");n.mainContentDiv=g("#main_content_div");n.bindHandlers();n.setProperties();},bindHandlers:function(){g(b).delegate("a[rel='ng_auth_btn_']","click",function(){var p=g(this).data("provider");n.authenticateWithNextGenService(p);});},getFallbackUrl:function(){return e.baseURL+"/save/fallback";},getProviderUrl:function(q){var p=e.baseURL+m[q];if(p.indexOf("redirectUrl")>-1){p=p+n.getFallbackUrl();}return p;},getProviderCleanUrl:function(q){var p=e.baseURL+m[q];return p;},startPollingForUserID:function(){n.authenticationTimer=f.setTimeout(function(){var q=i.getUserId();var u=i.getProvider()||"ANONYMOUS";var p=j.saveData?j.saveData.model:"";var t=null;var r=null;if(j&&j.saveData){t=j.saveData.metricsname||null;r=j.saveData.year||null;}if(n.callerWidget===e.widgets.UPGRADE_USER){if(q&&u!=="ANONYMOUS"){a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.AUTHENTICATION_ENDED,n.provider,null,p,t,r]);n.getAuthenticationStatus(true);return;}}else{if(q){a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.AUTHENTICATION_ENDED,n.provider,null,p,t,r]);n.getAuthenticationStatus(true);return;}}n.startPollingForUserID();},250);},stopPollingForUserID:function(){f.clearTimeout(n.authenticationTimer);},authenticateWithNextGenService:function(t){var p=n.getProviderUrl(t);var r="ngAuthWindow";var q="status=1,resizable=0,scrollbars=1,height=500,width=800";if(p){n.authenticationWindow=f.open(p,r,q);n.startPollingForUserID();}},setProperties:function(){i=new f.ThirdPartyAuthenticator();n.userId=i.getUserId();n.accessToken=i.getAccessToken();n.provider=i.getProvider()||"ANONYMOUS";n.planType=k.getPlanTypeForDisplay();if(n.userId){n.setRegisteredCookie();}},logoutUser:function(){i=new f.ThirdPartyAuthenticator();i.logoutUser();h._message_bus.send(b.body,"clw-sign-out",{url:f.location.href});n.setProperties();a.trigger(e.events.AUTHENTICATION_LOGOUT_EVENT);},setRegisteredCookie:function(){var p=1000*60*60*24*365;h.u.cookie.set("save-registered",1,{domain:"."+e.make.toLowerCase()+".com",expires:p,path:"/"});},validateUser:function(r,v){var p=v||false;n.setProperties();n.callerWidget=r;if(n.isUpgraded){n.updateAuthScreen(false);}var q=j.saveData?j.saveData.model:"";if(n.userId){n.setRegisteredCookie();a.trigger(e.events.AUTHENTICATION_COMPLETE_EVENT,[true,n.userId,n.accessToken,n.provider,n.callerWidget,p]);}else{h._message_bus.send(b.body,"clw-open",{action:"signin"});var u=null;var t=null;if(j&&j.saveData){u=j.saveData.metricsname||null;t=j.saveData.year||null;}a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.AUTHENTICATION_STARTED,null,null,q,u,t]);}},upgradeUser:function(){n.updateAuthScreen(true);n.callerWidget=e.widgets.UPGRADE_USER;h._message_bus.send(b.body,"clw-open",{action:"signin"});},updateAuthScreen:function(p){if(p){n.contentAfterIcon.hide();n.divider.hide();n.isUpgraded=true;}else{n.contentAfterIcon.show();n.divider.show();n.isUpgraded=false;}},getAuthenticationStatus:function(p){n.setProperties();n.stopPollingForUserID();if(p){h._message_bus.send(b.body,"clw-close");a.trigger(e.events.AUTHENTICATION_COMPLETE_EVENT,[true,n.userId,n.accessToken,n.provider,n.callerWidget]);}}};n=new n();return n;}());e.SavePopupWidget=(function(){var i;var k;var j=function(){this.visible=false;this.$container=null;this.$background=null;this.$screens=null;};j.prototype={init:function(){if(!f.ThirdPartyAuthenticator){return;}i=new f.ThirdPartyAuthenticator();k=e.DataCollectionWidget;j.$container=g("#nextgen_auth_save_widget_container");j.$background=g("#nextgen_auth_save_container_background");j.$screens=j.$container.find(".changable_content");j.bindHandlers();},bindHandlers:function(){g(b).delegate(".ng_popup_close_btn","click",j.close);g(b).delegate("#nextgen_auth_save_container_background","click",j.close);},hideAllWindows:function(){j.$screens.hide();},open:function(l){j.hideAllWindows();j.$container.find(l).show();if(!j.visible){j.$background.show();j.$container.show();j.visible=true;}},close:function(){if(j.visible){j.$background.hide();j.$container.hide();j.visible=false;}}};j=new j();return j;}());e.FallbackWidget=(function(){var j=function(){};if(!f.ThirdPartyAuthenticator){return;}var i=new f.ThirdPartyAuthenticator();j.prototype={init:function(){f.resizeTo(800,500);j.bindHandlers();},hideConciergeButton:function(){var m=i.getProvider()||"ANONYMOUS";var l=h.u.cookie.get("authenticatedDomain");var k=g("#baseurl").data("baseurl");if((k.toLowerCase().indexOf(l)>0)&&(m!=="ANONYMOUS")){g(b).find("#fallback_goto_concierge_btn").css("display","inline-block");}else{g(b).find("#save_widget_ok a#fallback_ok_btn").css("margin-left","100px");}return false;},bindHandlers:function(){g(b).delegate("#fallback_ok_btn","click",j.closeWindow);g(b).delegate("#fallback_goto_concierge_btn","click",j.openconcierge);},openconcierge:function(){f.opener.document.location.href=g("#baseurl").data("baseurl")+"/concierge/";f.close();},closeWindow:function(){f.open("","_self","");f.close();}};j=new j();return j;}());e.SaveWidget=(function(){var v;var l;var j;var m;var o;var p;var r=/<sup\\?>(\d+|[\u2020\u2021]+|&dagger;)<\/sup\\?>/gi;var x=/<\/?\w+\s*\/?\\?>/gi;var i=function(A){if(A){A=A.replace(r,"");A=A.replace(x,"");return A;}};var u=function(A){if(A){A=A.replace(/\\/gi,"");return A;}};var y="%E2%80%A6";var k=y.length;var t=200-k;var w=500-k;var q=200-k;var z=function(B,A){var C;B=B.replace(/[^a-z0-9\s,\.\|]/gi,function(D){return encodeURIComponent(D);});if(B.length>A){B=B.slice(0,A);C=B.lastIndexOf(" ");if(C>-1){B=B.slice(0,C);}B=B+y;}return B;};var n=function(){this.saveData=null;this._OpenSaveCookie="savestorage";this._CookieDomain=f.location.host.search(".teamdetroit.com")>=0?".teamdetroit.com":".ford.com";};n.prototype={init:function(){if(!f.ThirdPartyAuthenticator){return;}v=e.AuthenticationWidget;l=e.SaveAPI;j=e.SavePopupWidget;m=e.DataCollectionWidget;o=new f.AXZAuthenticator();p=new f.ThirdPartyAuthenticator();n.planType=o.getPlanTypeForServices();n.bindHandlers();n.initialized=true;},bindHandlers:function(){var A=this;a.bind(e.events.AUTHENTICATION_COMPLETE_EVENT,n.resumeSave);g(b.body).on("click","#submit_btn",n.validate);g(b.body).on("click","#continue_btn",j.close);g(b.body).on("click",".cancel_btn",j.close);g(b.body).on("click","#concierge_continue_btn",j.close);g(b.body).on("click","#schedule_dealer_btn",n.scheduleDealerFlip);g(b.body).on("focus blur","#FNASW_ng_save_title",function(){g(this).toggleClass("focused");});g(b.body).on("focus","#FNASW_ng_notes",function(){var B=g(this);if(B.val()===B.data("default")){B.val("");}});g(b.body).on("blur","#FNASW_ng_notes",function(){var B=g(this);if(B.val().length===0){B.val(B.data("default"));}});l.listen(l.SUCCESS,function(){A.savedButton();g(A.currentImage).attr("data-saved",true);});l.listen("gallery-flip-opened",function(C,B){A.currentImage=B;});l.listen("set-unsaved-status",function(C,B){A.unsavedButton();});l.listen("set-saved-status",function(C,B){A.savedButton();});},setSaveOnReload:function(B){var A=this,C=this.encodeData(B);h.u.cookie.set(A._OpenSaveCookie,C,{domain:A._CookieDomain,expires:1000*60*15,path:"/"});},deleteCookie:function(){var A=this;h.u.cookie.set(A._OpenSaveCookie,1,{domain:A._CookieDomain,expires:-1,path:"/"});},encodeData:function(B){var C="",A=this;jQuery.each(B,function(D,E){if(C.length>0){C+="|||";}if(typeof(E)==="string"){if(D==="thumbnailUrl"||D==="configToken"){C+=D+"::"+E;}else{C+=D+"::"+E.replace("||"," ").replace("|"," ");}}else{C+=D+"::"+E;}});return C;},decodeData:function(C){var D=C.split("|||");var B,A={};for(B=0;B<D.length;B++){var E=D[B].split("::");A[E[0]]=E[1];}return A;},unsavedButton:function(){var A=g("a[rel=ng_save_bookmark].ng_save");A.removeClass("saved");A.text(A.data("save"));g(b).delegate("a[rel=ng_save_bookmark].ng_save","click",m.formObjectAndInvokeSave);},savedButton:function(){var A=g("a[rel=ng_save_bookmark].ng_save");A.addClass("saved");A.text(A.data("saved"));g(b).undelegate("a[rel=ng_save_bookmark].ng_save","click",m.formObjectAndInvokeSave);},scheduleDealerFlip:function(){j.close();shopOpenScheduleDealer();},validate:function(){var C=g("#save_widget_submit");var A=g("#FNASW_ng_save_title").val();var B=g("#FNASW_ng_notes").val();if(C.hasClass("processingsave")){return;}if(B===g("#FNASW_ng_notes").data("default")){B="";}if(A){n.saveData.title=A.replace(/</gi,"").replace(/>/gi,"");n.saveData.notes=B;n.selectServiceAndCall(n.saveData);}else{f.alert("Title field cannot be empty");}},expandTextArea:function(A){while(g(this).outerHeight()<this.scrollHeight+parseFloat(g(this).css("borderTopWidth"))+parseFloat(g(this).css("borderBottomWidth"))){if(parseInt(g(this).height(),10)>=70){break;}else{g(this).height(g(this).height()+1);}}},loadErrorScreen:function(){j.open("#FNASW_save_auth_error_content");},loadMaxItemsReachedErrorScreen:function(){var A={channel:s.channel,hier1:s.hier1,eVar11:s.eVar11.replace(/: /g,":"),base:s.base};m.clickMetrics("max-saved-items",A);j.open("#FNASW_save_max_item_error_content");},loadSuccessScreen:function(){j.open("#FNASW_save_success_content");},loadSaveScreen:function(A){if(n.saveData){a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.SAVE_STARTED,null,null,n.saveData.model,n.saveData.metricsname||null,n.saveData.year||null]);g("#FNASW_ng_save_title").val(n.saveData.title);j.open("#FNASW_save_content");}},selectServiceAndCall:function(E){var G=E.itemType;var C=E.id||"";var A;switch(G){case"config":A="createConfigVehicle";break;case"inventory_bp":case"inventory_si":A="createInventoryVehicle";break;case"cpo":A="createCPOVehicle";break;case"image":case"video":case"technology":A="createBrandContent";break;case"compare":A="createCompareVehicle";break;default:break;}if(!A){n.loadErrorScreen();return;}E=g.extend(true,{},E);var H=["configToken","description","title","notes","price","competitorVehicleADescription","competitorVehicleBDescription"];g.each(E,function(J,K){if(g.inArray(J,H)===-1){E[J]=encodeURIComponent(K);}});if(E.title){E.title=z(E.title,t);}if(E.notes){E.notes=z(E.notes,w);}var D=function(N,J,M){var L=M.status;var K=n.saveData?n.saveData.model:"";n.loadSuccessScreen();a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.SAVE_ENDED,null,G,K,n.saveData.metricsname||null,n.saveData.year||null]);l.send(l.SUCCESS,N);jQuery("#save_widget_submit").removeClass("processingsave");};var B=function(){g(MySavedItems).trigger(MySavedItems.Events.DATA_REQUEST_START);l.send(l.SUCCESS,{});jQuery("#save_widget_submit").removeClass("processingsave");};var I=function(M,L,J){var K=M.status;l.send(l.ERROR,J);jQuery("#save_widget_submit").removeClass("processingsave");if(K===403){n.loadMaxItemsReachedErrorScreen();}else{n.loadErrorScreen();}};var F=function(){l.send(l.ERROR,{});if(f.console&&f.console.error){d.log("error");}};jQuery("#save_widget_submit").addClass("processingsave");if(C){l[A](E,B,F,C);}else{l[A](E,D,I);}},retrieveUrlZip:function(){var B=f.location.search.substring(1);var C=B.split("&");var A;for(A=0;A<C.length;A++){var D=C[A].split("=");if(D[0]==="zipcode"){return D[1];}}return false;},processData:function(C){C.title=u(i(C.title));C.description=u(i(C.description));C.description=z(C.title+"||"+C.description,q);var B=h.u.cookie&&h.u.cookie.zip&&h.u.cookie.zip();var A=n.retrieveUrlZip();if(A){C.postalCode=B||A;}else{C.postalCode=B||getUserInfo().zip;}if(n.planType){C.planType=n.planType;}return C;},loadSaveWidget:function(B){p=new f.ThirdPartyAuthenticator();var A=p.getUserId();var C=p.getProvider();var D=h.u.cookie.get("logFlag");n.saveData=n.processData(B);if(!f.ThirdPartyAuthenticator){return;}v.validateUser(e.widgets.SAVE_WIDGET_NAME);},resumeSave:function(G,A,E,D,H,B,F){var C=F||false;if(A&&B===e.widgets.SAVE_WIDGET_NAME){n.loadSaveScreen(C);}}};n=new n();return n;}());e.DataCollectionWidget=(function(){var m;var j;var k;var i;var l=function(){};l.prototype={init:function(){if(!f.ThirdPartyAuthenticator){return;}i=new f.ThirdPartyAuthenticator();m=e.AuthenticationWidget;j=e.SaveWidget;k=e.SavePopupWidget;l.bindHandlers();l.show();l.configMetrics();},show:function(){g(b.body).addClass("ng_save");},configMetrics:function(){var n=e.make.toLowerCase();h._message_bus.listen(b,"s-loaded",function(){s.make=n;if(n==="ford"){s.base="fv:myfolder:";}else{s.base="ln:myfolder:";}});},bindHandlers:function(){a.bind(e.events.METRIC_TRACKER_EVENT,l.metric_tracker_handler);a.bind(e.events.AUTHENTICATION_COMPLETE_EVENT,l.authenticationCompleteHandler);g(b).delegate("a[rel=ng_save_bookmark].ng_save","click",l.formObjectAndInvokeSave);},formObjectAndInvokeSave:function(o){o.preventDefault();var n=g(this).readDataAttr();j.loadSaveWidget(n);},formObjectAndUpdateItem:function(n){var o=g(n).parent().readDataAttr();o.notes=g(n).parent().siblings(".msi-note-field").val();j.selectServiceAndCall(o);},authenticationCompleteHandler:function(r,n,q,p,t,o){if(n&&o===e.widgets.MY_SAVED_ITEM_WIDGET_NAME){d.log(e.widgets.MY_SAVED_ITEM_WIDGET_NAME);}else{if(n&&o===e.widgets.UPGRADE_USER){d.log(e.widgets.UPGRADE_USER);}}},metric_tracker_handler:function(o,u,x,v,t,q,w){if(v==="config"){v="bp";}if(typeof t==="undefined"){t="";}else{if(t==="SuperDuty"){t="Super Duty";}}var y={itemType:v,channel:s.channel,hier1:s.hier1,eVar11:s.eVar11,eVar12:w||s.eVar12,eVar16:q||t,make:s.make,base:s.base};var r;switch(u){case e.events.SAVE_STARTED:r=e.isMobile?"mobile_saveStarted":"saveStarted";l.clickMetrics(r,y);break;case e.events.SAVE_ENDED:r=e.isMobile?"mobile_saveEnded":"saveEnded";l.clickMetrics(r,y);break;case e.events.AUTHENTICATION_STARTED:r=e.isMobile?"mobile_authStarted":"authStarted";l.pageMetrics(r,y);break;case e.events.AUTHENTICATION_ENDED:h.metrics.constructor();var n=new ThirdPartyAuthenticator();var p=n.getProfileStatus();if(p!=="1"){if(e.isMobile){l.pageMetrics("mobile_authComplete",y);}else{l.clickMetrics("authComplete",y);}}break;default:break;}},clickMetrics:function(o,n){h.metrics.click(o,n);},pageMetrics:function(n,o){h.metrics.page(n,o);}};l=new l();return l;}());e.init=function(j){if(e.ready){return;}e.ready=true;var i=780;e.isMobile=((typeof b.body.ontouchstart!=="undefined"||typeof f.ontouchstart!=="undefined"||typeof b.documentElement.ontouchstart!=="undefined")&&((f.innerWidth||b.documentElement.clientWidth||b.body.clientWidth)<=i));e.baseURL=j.baseURL;e.make=j.make;e.SaveAPI.init();e.AuthenticationWidget.init();e.SavePopupWidget.init();e.SaveWidget.init();e.DataCollectionWidget.init();};g(b).ready(function(){var l=null;var k;var j;var i=f.setInterval(function(){l=g("#nextgen_auth_save_widget_container");if(l.length){f.clearInterval(i);k=l.data("baseUrl");j=l.data("make");e.init({baseURL:k,make:j});h._message_bus.listen(b.body,"lc-init",function(){h._message_bus.send(b.body,"nextgen-loaded");});}},100);if(g("#fallback_ok_btn").length){e.FallbackWidget.init();e.FallbackWidget.hideConciergeButton();}});jQuery(f).on("load",function(){var i=h.u.cookie.get(e.SaveWidget._OpenSaveCookie);if(i){i=e.SaveWidget.decodeData(i);e.SaveWidget.loadSaveWidget(i);e.SaveWidget.deleteCookie();}});}(window,jQuery,ngbs));
(function(){var f=function(g){return g.channel;};var b=function(g){return g.hier1;};var e=function(g){return g.eVar11;};var c=function(i){var j,h,g;if(i&&i.make){g=i.make;}else{g=s.make;}if(i&&typeof i.eVar16!=="undefined"){j=i.eVar16.toLowerCase();}else{j=s.eVar16.toLowerCase();}if(j.indexOf(i.make+" ")>-1){h=j;}else{h=i.make+" "+j;}return h;};var d=function(){var g="pc",h=window.screen.width;if(h>1024){g="pc";}else{if(h>568){g="tablet";}else{g="mobile";}}return"ui:rad:"+g;};var a=function(){var h=new window.ThirdPartyAuthenticator();if(h){var i=h.getProvider();var g="logged out";if(i){if(i!=="ANONYMOUS"){g="logged in: "+i.toLowerCase();}else{g="logged in: current pc";}}return g;}return"logged out";};ngbs.metrics.config({page:{authStarted:{pageName:function(g){return"fv:profile:login:start:"+c(g);},channel:"profile",hier1:"profile:login",eVar11:"fv:profile:login:start",prop11:"fv:profile:login:start",eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:"logged out",prop42:"logged out",eVar49:"",prop49:"",eVar48:"",prop48:"",eVar54:d,prop54:d},mobile_authStarted:{pageName:function(g){return"mfv:profile:login:start:"+c(g);},channel:"profile",hier1:"profile:login",eVar11:"mfv:profile:login:start",prop11:"mfv:profile:login:start",eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:"logged out",prop42:"logged out",eVar49:"",prop49:"",eVar48:"",prop48:"",eVar54:d,prop54:d},mobile_authComplete:{pageName:function(g){return"mfv:profile:login:complete:"+c(g);},channel:"profile",hier1:"profile:login",eVar11:"mfv:profile:login:complete",prop11:"mfv:profile:login:complete",eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:a,prop42:a,eVar54:d,prop54:d,events:["event47","event14"]},"ford-forgotPassword":{pageName:function(g){return"fv:profile:reset password:1:start:"+c(g);},channel:"profile",hier1:"profile:reset password",eVar11:"fv:profile:reset pasword:1:start",prop11:"fv:profile:reset pasword:1:start",eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:"logged out",prop42:"logged out",eVar49:"",prop49:"",eVar48:"",prop48:"",eVar54:d,prop54:d},"ford-forgotPassword-mobile":{pageName:function(g){return"mfv:profile:reset password:1:start:"+c(g);},channel:"profile",hier1:"profile:reset password",eVar11:"mfv:profile:reset pasword:1:start",prop11:"mfv:profile:reset pasword:1:start",eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:"logged out",prop42:"logged out",eVar49:"",prop49:"",eVar48:"",prop48:"",eVar54:d,prop54:d},"ford-passwordEmailSent":{pageName:function(g){return"fv:profile:reset password:2:complete:"+c(g);},channel:"profile",hier1:"profile:reset password",eVar11:"fv:profile:reset pasword:2:complete",prop11:"fv:profile:reset pasword:2:complete",eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:"logged out",prop42:"logged out",eVar49:"",prop49:"",eVar48:"",prop48:"",eVar54:d,prop54:d},"ford-passwordEmailSent-mobile":{pageName:function(g){return"mfv:profile:reset password:2:complete:"+c(g);},channel:"profile",hier1:"profile:reset password",eVar11:"mfv:profile:reset pasword:2:complete",prop11:"mfv:profile:reset pasword:2:complete",eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:"logged out",prop42:"logged out",eVar49:"",prop49:"",eVar48:"",prop48:"",eVar54:d,prop54:d}},click:{authComplete:{pev2:function(g){return"fv:profile:login:complete:"+c(g);},pe:"o",channel:f,hier1:b,eVar11:e,prop11:e,eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:a,prop42:a,eVar54:d,prop54:d,events:["event47","event14"]},"ford-forgotAssist":{pev2:function(g){return"fv:profile:reset password:1:start:content:action:"+c(g);},pe:"o",channel:f,hier1:b,prop5:"reset password:1:start:help",eVar11:e,prop11:e,eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:a,prop42:a,eVar54:d,prop54:d},"ford-forgotAssist-mobile":{pev2:function(g){return"mfv:profile:reset password:1:start:content:action:"+c(g);},pe:"o",channel:f,hier1:b,prop5:"reset password:1:start:help",eVar11:e,prop11:e,eVar12:function(g){return g.eVar12;},prop12:function(g){return g.eVar12;},eVar16:c,prop16:c,eVar42:a,prop42:a,eVar54:d,prop54:d},saveStarted:{channel:f,hier1:b,pev2:"fv:save:start",pe:"o",eVar14:"ford",eVar15:"fordvehicles.com",prop5:"save:start",prop11:e,eVar11:e,prop14:"ford",prop15:"fordvehicles.com",prop54:d,eVar54:d},mobile_saveStarted:{channel:f,hier1:b,pev2:"mfv:save:start",pe:"o",prop11:e,eVar11:e},saveEnded:{channel:f,hier1:b,pev2:"fv:save:complete",pe:"o",eVar14:"ford",eVar15:"fordvehicles.com",prop5:"save:complete",prop11:e,eVar11:e,prop14:"ford",prop15:"fordvehicles.com",prop54:d,eVar54:d},mobile_saveEnded:{channel:f,hier1:b,pev2:"mfv:save:complete",pe:"o",prop11:e,eVar11:e},"max-saved-items":{pe:"o",pev2:function(g){return(g.base+"saves exceeded").replace(/: /g,":");},channel:f,hier1:b,prop11:e,eVar11:e}}});}());
ngbs.widget("lad-header-form",function(a,b){var c=function(d){this.$container=d;this.$parent=jQuery(this.$container.parent());this.init();var e=navigator.userAgent;if(e.toLowerCase().indexOf("android")>-1&&e.toLowerCase().indexOf("4.0.4")>-1){this.$container.addClass("android4-0-4");}if(e.toLowerCase().indexOf("safari")>-1&&e.toLowerCase().indexOf("chrome")<0){this.$container.addClass("safari");}};c.prototype={init:function(){var d=this;var f=jQuery(document.body);this.updateZipCode();if(__params){var e="skin-"+__params.make.toLowerCase();if(!f.hasClass(e)){f.addClass(e);}}this._configMetrics();this.bindEvents();},_configMetrics:function(){var d="";if(window.location.host.indexOf("lincoln")>-1){d="ln";}else{if(window.location.host.indexOf("ford")>-1){d="fv";}}ngbs.metrics.config({click:{"zipcode-flip-submit":{channel:true,hier1:true,eVar11:true,prop11:true,prop5:"find dealer: submit zip code",eVar16:function(e){return e.nameplate;},prop16:function(e){return e.nameplate;},eVar48:"event: find dealer",prop48:"event: find dealer",pev2:function(f){var e;if(f.make==="lincoln"){e="ln:vehicle:dealerships:zip code flip:submit zip";}else{e="dd: vehicle: find dealer: zip code flip: submit zip";}return e;},pe:"o"}}});},bindEvents:function(){var d=this;this.$container.on("click","span",function(){if(jQuery(this).attr("id")!=="advanced-search-link"){d.submitForm();}});this.$container.on("keypress",".zip-form",function(){d.clearErrorMessage();});this.$container.on("keypress",function(f){if(f.keyCode===13){d.submitForm();return false;}});this.$container.on("click","#advanced-search-link",function(g){g.preventDefault();var f=ngbs.ownerMap.isOwnerSite()?ngbs.ownerMap.getOwnerUrl():jQuery(this).attr("href");window.location.href=f;});this.$parent.on("mouseenter",function(){this.$container.find("#lad-zip").focusin(function(){d.updateZipCode();d.$container.show();});});d.getLastestZip();},updateZipCode:function(){var d=ngbs.u.cookie.zip();if(!d&&_widgets.context&&_widgets.context.UserContext){d=_widgets.context.UserContext.get("zIPCode");}if(d&&d!=="false"){this.$container.find("#lad-zip").val(d);this.clearErrorMessage();}},getLastestZip:function(){var d=this;if(jQuery("a.findADealer").length!==0){jQuery("a.findADealer").on("click",function(){d.updateZipCode();});}},getZipCodeFromPosition:function(d){var e=this,g="http://ws.geonames.org/findNearbyPostalCodesJSON?formatted=true&maxRows=1",f=g+"&lat="+d.coords.latitude+"&lng="+d.coords.longitude;jQuery.getJSON(f,function(h){e.updateZipCode(h.postalCodes[0].postalCode);});},geolocate:function(){var d=this;navigator.geolocation.getCurrentPosition(function(e){var f=d.getZipCodeFromPosition(e);});},validateZipCode:function(g,h){var e=this;var f=false;var d=/^\d{5}$/;if(d.test(g)&&g!=="00000"){jQuery.ajax({url:"/services/geo/PostalCodes?postalCode="+g,success:function(k){var i=jQuery(k).find("Response").attr("status");if(i==="OK"){var j=jQuery(k).find("State").text();if(j!=="STATE-NOT-KNOWN"){f=true;}}if(f===false){e.showErrorMessage();}else{if(f){h.call(this);}}},error:function(){e.showErrorMessage();},dataType:"XML"});}else{this.showErrorMessage();}},showErrorMessage:function(){var d=this.$container.find(".zip-form");var f=d.width();var e='<p class="error" style="width:'+f+'px;">Invalid ZIP code. Please try again.</p>';if(jQuery(".goto-input.zip-form").parent().find(".error").length===0){d.after(e);d.addClass("lad-error");this.$container.addClass("expanded");}},clearErrorMessage:function(){this.$container.find(".error").remove();this.$container.find(".zip-form").removeClass("lad-error");this.$container.removeClass("expanded");},submitForm:function(){var e=this;var g=this.$container.find("#lad-zip").val();var i=".ford.com";var d=e.$container.find(".zip-form");var j=d.data("metricstag")?"&"+d.data("metricstag"):"";var h=d.data("host");var f;this.clearErrorMessage();if(h.indexOf(".dev.ngbs.digital.teamdetroit.com")!==-1){i=".teamdetroit.com";}if(ngbs.ownerMap.isOwnerSite()){f=ngbs.ownerMap.getOwnerUrl()+"zip/"+g;}else{f=h+"/dealerships/locate/results?showResults=1&zipCode="+g+j;}this.validateZipCode(g,function(){ngbs.u.cookie.setSub("FPI","zip",g,{path:"/",domain:i});window.location.href=f;return false;});}};jQuery(document).ready(function(){var f=null,e=null;var d=window.setInterval(function(){f=jQuery(".lad-header-form-ford");if(f.length){window.clearInterval(d);e=new c(f);}},100);});});
ngbs.widget("owner-lad-map",function(c,h){function g(k){this.$links=k;this.url=h.find("#owner-lad").val();this.isOwnerSite=function(){if(window.location.href.indexOf("owner."+__params.make.toLocaleLowerCase())>-1){return true;}return false;};this.getOwnerUrl=function(){return this.url;};this.updateHref=function(){if(this.isOwnerSite()){jQuery(this.$links).attr("href",this.getOwnerUrl());}};}var d=["a.locate-dealer","a.findADealer","#advanced-search-link"],b=["a.locate-dealer","a.locate-dealer-link","#advanced-search-link"],i=__params.make==="Ford"?d:b,j=i.join(",");function a(){var k=0;for(k;k<i.length;k++){if(!jQuery(i[k]).length){return false;}}return true;}var f=0,e=window.setInterval(function(){if(typeof ngbs!=="undefined"){if(h.length&&(a()||f===8)){var k=new g(j);k.updateHref();ngbs.ownerMap=k;window.clearInterval(e);}f++;}},500);});
jQuery(document).ready(function(){var o=201,m=1063,u=false,n=document,l=n.getElementById("_bapw-link"),q=(n.location.protocol==="https:"),p=(q?"https":"http")+"://",r=p+(q?"a248.e.akamai.net/betterad.download.akamai.com/91609":"cdn.betrad.com")+"/pub/",t;(function s(){var a=window.location.href;var c=("/"+window.location.pathname+window.location.search+window.location.hash).replace("//","/");var b=a.indexOf("ford.com");var e=Math.max(a.indexOf("qa"),a.indexOf("dev"),a.indexOf("local"));if((0<e&&e<b)||a.indexOf("ford.dev")>0){jQuery(".change-language").attr("href",jQuery(".change-language").attr("href")+"ssdwwwqa"+c);}}());function k(a){var b=new Image();b.src=p+"l.betrad.com/pub/p.gif?pid="+o+"&ocid="+m+"&i"+a+"=1&r="+Math.random();}function d(g,e){var f=n.getElementsByTagName("head")[0]||n.documentElement,a=u,b=n.createElement("script");b.src=g;function c(){b.onload=b.onreadystatechange=null;f.removeChild(b);e();}b.onreadystatechange=function(){if(!a&&(this.readyState==="loaded"||this.readyState==="complete")){a=true;c();}};b.onload=c;f.insertBefore(b,f.firstChild);}if(l){l.onmouseover=function(){if(/#$/.test(l.href)){l.href="http://info.evidon.com/pub_info/"+o+"?v=1";}};l.onclick=function(){var a=window._bap_p_overrides;if(a&&a.hasOwnProperty(o)){if(a[o].new_window){k("c");return true;}}this.onclick="return"+u;d(p+"ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js",function(){d(r+"pub2.js",function(){window.BAPW.i(l,{pid:o,ocid:m});});});return u;};k("i");}ngbs._message_bus.listen(document.body,"close-adchoices",function(){jQuery("#_bapw-notice").hide();});});
ngbs.widget("shoppingtools-sticky-nav",function(b,c){var d=jQuery,f;function e(g){this.$nav=c;this.options=g;this.PREFIX="shop-nav-";this.$title=this.$nav.find("#"+this.PREFIX+"title");this.$items=this.$nav.find("."+this.PREFIX+"item");this.$collapsibleEl=this.getElement(this.options.collapsibleEl)||this.$nav.find("#"+this.PREFIX+"list");this.$eleBottom=this.getElement(this.options.elBottom)||this.$nav.parent();this.$trigger=this.$nav.find("#"+this.PREFIX+"trigger");this.$incentivesDiv=this.$nav.find("#incentives-div");this.$zipInput=this.$incentivesDiv.find("input");this.$placeHolder=this.$incentivesDiv.find("span");this.animationSpeed=this.options.animationSpeed||500;this.COLLAPSED_COOKIE_NAME="ShopNavCollapsed";this.cookieOptions={path:"/",domain:this.getDomain()};this.STATIC_CLASS="static";this.COLLAPSED_CLASS="collapsed";this.ERROR_CLASS="error";this.animating=false;this.init();}e.prototype.init=function(){var g=this;this.checkDeepLinkToSetInitialState();this.setDocHeightInterval();this.bindNav();this.bindIncentives();this.bindMetrics();window.setTimeout(function(){g.updateZipCode();},300);if(_widgets.context&&_widgets.context.LocalContext){_widgets.context.LocalContext.subscribe("incentivesChange",this.updateZipCode,this,true);}};e.prototype.checkDeepLinkToSetInitialState=function(){var g=window.location.href.match(/recipe=(collapse|expand){1}/i);if(g){if(g[1]==="collapse"){this.collapse();}else{if(this.$nav.hasClass(this.COLLAPSED_CLASS)){this.expand();}}}else{this.getCollapsedCookie();}};e.prototype.bindNav=function(){var g=this;d(window).on("scroll resize",function(){g.checkPosition();});this.$trigger.on("click",function(){if(!g.animating){if(g.$nav.hasClass(g.COLLAPSED_CLASS)){g.expand();}else{g.collapse();}}});};e.prototype.bindIncentives=function(){var g=this;this.$nav.on("click","#incentives-submit",function(h){h.preventDefault();g.validateZipCode(g.$zipInput.val());});this.$zipInput.on("keypress",function(h){if(h.keyCode===13){g.validateZipCode(g.$zipInput.val());}else{g.$incentivesDiv.removeClass(this.ERROR_CLASS);}});this.$placeHolder.on("click",function(){d(this).hide();g.$zipInput.focus();});this.$zipInput.on("blur",function(){if(d(this).val()===""){g.$incentivesDiv.removeClass(this.ERROR_CLASS);g.$placeHolder.show();}});};e.prototype.bindMetrics=function(){var g="shopp-nav-click";if(__params&&__params.model){g+="-nameplate";}this.$items.on("click","a",function(){if(d(this).data("metrics")){ngbs.metrics.click(g,{item:d(this).data("metrics")});}});};e.prototype.getBottomBoundary=function(){return this.$eleBottom.offset().top+this.$nav.height();};e.prototype.checkPosition=function(){var h=d(window).scrollTop()+d(window).height(),g=/iPad/i.test(navigator.userAgent),i=/Android/i.test(navigator.userAgent),j=window.innerHeight>window.innerWidth;if(g&&j){h=h+434;}else{if(i&&j){h=h+534;}}if(h<=this.getBottomBoundary()){this.$nav.removeClass(this.STATIC_CLASS);}else{if(h>=this.getBottomBoundary()||d(window).height()>this.getBottomBoundary()){this.$nav.addClass(this.STATIC_CLASS);}}};e.prototype.setDocHeightInterval=function(){var h=d("body, html").height(),i=false,g=this;window.setInterval(function(){g.checkPosition();if(!i&&!g.animating){g.$nav.show();i=true;}},300);};e.prototype.collapse=function(){this.collapsedState="true";this.animate(0);};e.prototype.expand=function(){var h=this.$title.width()*100/this.$nav.width(),g=100-h+"%";this.collapsedState="false";this.$title.width(h+"%");this.animate(g);};e.prototype.animate=function(h){var g=this;this.animating=true;this.$collapsibleEl.animate({width:h},this.animationSpeed,function(){g.$nav.toggleClass(g.COLLAPSED_CLASS);g.animating=false;});this.setCollapsedCookie();};e.prototype.setCollapsedCookie=function(){ngbs.u.cookie.set(this.COLLAPSED_COOKIE_NAME,this.collapsedState,this.cookieOptions);};e.prototype.getCollapsedCookie=function(){var g=ngbs.u.cookie.get(this.COLLAPSED_COOKIE_NAME);if(g&&g==="true"){this.collapse();}};e.prototype.getElement=function(g){if(d(g).length){return d(g);}return false;};e.prototype.getDomain=function(){return document.location.host.indexOf("teamdetroit.com")!==-1?".teamdetroit.com":".ford.com";};e.prototype.updateZipCode=function(){var g=ngbs.u.cookie.zip();if(!g&&_widgets.context&&_widgets.context.UserContext){g=_widgets.context.UserContext.get("zIPCode");}if(g&&g!=="false"){this.$zipInput.val(g);this.$placeHolder.hide();}};e.prototype.validateZipCode=function(i){var h=/^\d{5}$/,j=false,g=this;if(h.test(i)&&i!=="00000"){d.ajax({url:"/services/geo/PostalCodes?postalCode="+i,success:function(m){var k=d(m).find("Response").attr("status");if(k==="OK"){var l=d(m).find("State").text();if(l!=="STATE-NOT-KNOWN"){j=true;}}if(j){g.handleZipSuccess(i);}else{g.showZipError();}},error:function(){g.showZipError();},dataType:"XML"});}else{this.showZipError();}};e.prototype.showZipError=function(){this.$incentivesDiv.addClass(this.ERROR_CLASS);};e.prototype.handleZipSuccess=function(g){ngbs.u.cookie.setSub("FPI","zip",g,this.cookieOptions);window.location.href=this.options.incentivesUrl;};if(c.length){var a=c.find("#shop-nav-config").data()||{};f=new e(a);}});
(function(){ngbs.metrics.config({click:{"shopp-nav-click":{pev2:"fv: kbar",pe:"o",channel:true,hier1:true,eVar11:true,prop11:true,eVar13:"kbar-<item>",prop13:"kbar-<item>",prop5:"kbar-<item>"},"shopp-nav-click-nameplate":{pev2:"fv: kbar: <nameplate>",pe:"o",channel:true,hier1:true,eVar11:true,prop11:true,eVar13:"kbar-<item>",prop13:"kbar-<item>",prop5:"kbar-<item>"}}});}());
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var d=YAHOO.widget;var e=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.BSPanel=function(h,i){var o="roundedShadow";var j;this.el=h;var f={visible:false,constraintoviewport:true,draggable:false,underlay:"none",flip:"default"};if(i){for(j in i){if(i.hasOwnProperty(j)){f[j]=i[j];}}}this.CALLING_FLIP=f.flip;f.close=false;a.BSPanel.superclass.constructor.call(this,h,f);this.render();var q=c.getElementsByClassName("container-close",null,this.el);if(q&&q.length>0){var g=q[0];b.on(g,"click",this.hide,null,this);}if(f.underlay===o){var l=["tl quoin","tr quoin","shadow-content","bl quoin","br quoin"];var n=document.createElement("div");c.addClass(n,"rounded-shadow");this.el.appendChild(n);for(j in l){if(l.hasOwnProperty(j)){var m=document.createElement("div");c.addClass(m,l[j]);n.appendChild(m);}}}};YAHOO.extend(a.BSPanel,d.Panel,{init:function(g,f){a.BSPanel.superclass.init.apply(this,arguments);this.initAttributes(g,f);},initAttributes:function(g,f){},setPanelHeader:function(h,g){var f=c.getElementsByClassName("headerText",null,this.el);if(f&&f.length>0){f[0].innerHTML=h;if(g){var i="<div class='subtitle'>"+g+"</div>";f[0].innerHTML=h+i;}}},addScroller:function(h,g,f){return null;},hide:function(){a.BSPanel.superclass.hide.apply(this,arguments);if("part-details"===this.CALLING_FLIP){e.removeModalBackground("view-bd","panel");}},show:function(){a.BSPanel.superclass.show.apply(this,arguments);if("part-details"===this.CALLING_FLIP){e.addModalBackground("view-bd","panel");}},alignTo:function(g,f){if(f&&f.elementAlign&&f.contextAlign){this.cfg.setProperty("context",[g,f.elementAlign,f.contextAlign]);this.align(f.elementAlign,f.contextAlign);}else{this.alignTo(g,a.BSPanel.ALIGN_BOTTOM_LEFT);}},update:function(){}});a.BSPanel.ALIGN_TOP_LEFT={elementAlign:"tl",contextAlign:"tl"};a.BSPanel.ALIGN_TOP_RIGHT={elementAlign:"tl",contextAlign:"tr"};a.BSPanel.ALIGN_BOTTOM_LEFT={elementAlign:"bl",contextAlign:"bl"};a.BSPanel.ALIGN_BOTTOM_RIGHT={elementAlign:"bl",contextAlign:"br"};}());
(function(){var c="com.forddirect.ng.widgets";var a=getPackageForName(c);var d=getPackageForName("com.forddirect.ng.util");var b=YAHOO.util.Dom;a.PromotionalArea=function(g,h){var j=b.getElementsByClassName("ng-widget promotional-tile","div",g);var f;for(f=0;f<j.length;f++){var e=new a.PromotionalTile(j[f],h);}};}());
(function(){var c="com.forddirect.ng.widgets";var a=getPackageForName(c);var d=getPackageForName("com.forddirect.ng.util");var b=YAHOO.util.Dom;a.PromotionalTile=function(h,i){var f=b.getElementsByClassName("promo-content","div",h);if(f&&f.length>0){var g=f[0];var e=g.getAttribute("dynamic");if(e){this.loadDynamicContent(h,g,i);}}};a.PromotionalTile.prototype.loadDynamicContent=function(g,f,i){var l=g.id;var k=f.id;var h=b.get("loading:"+k);if(h){d.Navigation.swapBlocks(k,h);}var e=f.getAttribute("promo-id");var j="?widget=promotional-tile&promo-area="+i+"&promo-id="+e;d.Navigation.swapWith(l,j);};}());
ngbs.widget("scrollbar",function(b,c){function a(g,e){var d=this,f;this.element=g;this.config={skin:"default",arrows:true,handleMinHeight:400,arrowsSpeed:40,wheelSpeed:50,touchSupport:false};for(f in e){if(e.hasOwnProperty(f)){this.config[f]=e[f];}}this.init();}a.prototype={init:function(){var d=this;this.drag=false;this.element.css("overflow","hidden");this.parentEle=this.element.parent();if(this.config.touchSupport){this.initTouchScroll();}else{this.create();this.bindEvents();this.setConfigValues();}},initTouchScroll:function(){var d=this.parentEle.parents("#wrapper"),e=this.parentEle.parents("#scroller");if(d.length<=0&&e.length<=0){d=jQuery('<div id="wrapper"></div>');this.parentEle.append(d);d.css("height",this.element.css("height"));this.element.css({height:"auto",overflow:"hidden"});e=jQuery('<div id="scroller"></div>');e.html(this.element);e.attr("id","scroller");d.append(e);e.css("height",this.element.outerHeight+"px");this.touchScroll=new Iscroll("wrapper",{onBeforeScrollStart:function(g){var f=g.target;while(f.nodeType!==1){f=f.parentNode;}if(f.tagName!=="SELECT"&&f.tagName!=="INPUT"&&f.tagName!=="A"&&f.tagName!=="TEXTAREA"){g.preventDefault();}}});this.iScrollBinds();}ngbs._message_bus.send(document.body,"iscroller-refresh");},iScrollBinds:function(){var d=this;b.listen(document.body,"iscroller-refresh",function(){d.touchScroll.refresh();});},setConfigValues:function(){this.config.topContainer=(-1)*(this.container.outerHeight()-this.scroller.outerHeight());if(this.config.topContainer>=-12&&this.config.topContainer<0){this.config.topContainer-=40;}if(this.config.arrows){this.config.topBottom=this.scroller.outerHeight()-this.handle.height()-this.arrows.down.height();this.config.topHandler=this.arrows.up.height();}else{this.config.topBottom=this.scroller.outerHeight()-this.handle.height();this.config.topHandler=0;}this.prevY=0;},createDragInterval:function(){var d=this;this.dragInterval=setInterval(function(){d.handleDrag();},20);},clearDragInterval:function(){clearInterval(this.dragInterval);},createArrowsInterval:function(e){var d=this;this.arrowsInterval=setInterval(function(){d.handleArrows(e);},20);},clearArrowInterval:function(){clearInterval(this.arrowsInterval);},create:function(){this.scroller=jQuery(document.createElement("div")).addClass("scroller").addClass(this.config.skin);this.scroller.attr("data-skin",this.config.skin);this.container=jQuery(document.createElement("div")).addClass("scroller-container");this.handle=jQuery(document.createElement("div")).addClass("scroller-handle");this.arrows={up:jQuery(document.createElement("div")).addClass("up").addClass("arrow"),down:jQuery(document.createElement("div")).addClass("down").addClass("arrow")};this.track=jQuery(document.createElement("div")).addClass("scroller-track");this.scroller.css("width",parseInt(this.element.css("width"),10)+"px");this.scroller.css("height",parseInt(this.element.css("height"),10)+"px");if(this.element.attr("class")&&this.element.attr("class").length>0){if(!this.scroller.hasClass(this.element.attr("class"))){this.scroller.attr("class",this.scroller.attr("class")+" "+this.element.attr("class"));}}if(this.element.attr("id")&&this.element.attr("id").length>0){this.scroller.attr("id",this.element.attr("id"));}this.container.html(this.element.html());this.element.remove();this.parentEle.append(this.scroller);this.scroller.append(this.container);if(this.container.outerHeight()<=parseInt(this.scroller.css("height"),10)+11){return false;}if(this.element.outerWidth()>0){this.container.css("width",(this.element.outerWidth()-40)+"px");}this.scroller.append(this.track);this.scroller.append(this.handle);if(this.config.arrows){this.scroller.append(this.arrows.up);this.scroller.append(this.arrows.down);this.handle.css("top",this.arrows.up.height()+"px");}else{this.handle.css("top","0px");}this.resizeHandle();},bindEvents:function(){var d=this;var e,f;this.track.on("click",function(g){g.stopPropagation();d.handleLargeScroll(g);return false;});this.scroller.on("touchstart",this.container,function(g){e=g.originalEvent.changedTouches[0].clientY;f=parseInt(d.handle.css("top"),10);});this.scroller.on("touchmove",this.container,function(g){d.handleTouch(g,e,f);return false;});this.scroller.on("mousedown",".scroller-handle",function(g){g.stopPropagation();d.activeDrag(g);return false;});this.scroller.on("click",".scroller-handle",function(g){g.stopPropagation();return false;});if(this.config.arrows){this.scroller.on("mousedown",".arrow",function(g){d.createArrowsInterval(jQuery(this));});}this.scroller.on("mousewheel",function(g){g.stopPropagation();d.handleMousewheel(g);return false;});this.scroller.on("DOMMouseScroll",function(g){g.stopPropagation();d.handleMousewheel(g);return false;});jQuery(document.body).on("mouseup",function(g){if(d.config.arrows){d.clearArrowInterval();}d.stopDrag(g);});jQuery(document.body).on("mousemove",function(g){d.mousePosY=g.pageY;if(d.drag){d.handleDrag(g);}});b.listen(d.container,"moveTo",function(h,g){d.move(g.position);});b.listen(d.container,"refresh",function(){d.reset();});},handleArrows:function(d){var f=1,e=0;if(d.hasClass("down")){f=-1;}if(f<0){e=(this.handle.position().top+this.config.arrowsSpeed);}else{e=(this.handle.position().top-this.config.arrowsSpeed);}this.move(e);},handleMousewheel:function(g){var f=1,d=0;if(g.originalEvent.wheelDelta&&g.originalEvent.wheelDelta<0){f=-1;}if(g.originalEvent.detail&&g.originalEvent.detail>0){f=-1;}if(g.detail&&g.detail<0){f=-1;}if(f<0){d=(this.handle.position().top+this.config.wheelSpeed);}else{d=(this.handle.position().top-this.config.wheelSpeed);}this.move(d);},handleDrag:function(g){var f=parseInt(this.handle.css("top"),10),d=g.pageY-this.handle.offset().top;if(this.drag){if(f+d<this.config.topBottom||f-d>0){this.move(f+d);}}},handleLargeScroll:function(d){if(!this.drag&&(d.originalEvent.layerY<this.config.topBottom||d.originalEvent.layerY>0)){this.move(d.originalEvent.layerY);}if(!d.originalEvent.layerY&&d.originalEvent.y){this.move(d.originalEvent.y);}},handleTouch:function(i,d,g){var h=d-i.originalEvent.changedTouches[0].clientY;var f=h+g;this.move(f);},move:function(h){var g=Math.round((h*100)/this.config.topBottom),f=(-1)*(this.container.outerHeight()-this.scroller.outerHeight()),e,d;if(this.config.topContainer!==f){this.config.topContainer=f;}e=(Math.abs(this.config.topContainer)*g)/100;d=(-1)*e+this.config.topHandler;if(d===this.config.topContainer){h=this.config.topBottom;}if(h<this.config.topHandler){h=this.config.topHandler;}if(h>this.config.topBottom){h=this.config.topBottom;}this.handle.css("top",h+"px");if(d<this.config.topContainer){d=this.config.topContainer;}if(h<=this.config.topHandler){d=0;}if(d>=this.config.topContainer&&(d<=0)){this.container.css("top",d+"px");}jQuery(".dom-refresh").html(h+"px");},activeDrag:function(d){this.drag=true;},stopDrag:function(d){this.drag=false;},reset:function(){if(this.scroller!==null){this.setConfigValues();this.resizeHandle();}else{this.create();}},resizeHandle:function(){var d=((this.scroller.height()*100)/this.container.height());this.handle.css("height",d+"px");}};b.listen(document.body,"scrollbar-add",function(h,g){var d,i,f=jQuery(g.element);i=g.config||{};if(!f.hasClass("scroller")){d=new a(f,i);}else{f.html(f.find(".scroller-container").html());f.removeClass("scroller");d=new a(f,i);}});b.listen(document.body,"scrollbar-destroy",function(i,g){var d=jQuery(g.element);if(d.hasClass("scroller")){var f="",h=d.data("skin");f=d.find(".scroller-container").html();d.html(f);d.removeClass("scroller");if(d.hasClass(h)){d.removeClass(h);}}});});
(function(c,d){if(("disabled"==="enabled")&&(typeof define==="function")&&define.amd){define([],d);}else{c.OOo=d();}}(this,function(){window.OOo={__detectBrowser:function(b){var a=Object.prototype.toString.call(window.opera)==="[object Opera]",d
/*@cc_on=parseFloat((/MSIE[\s]*([\d\.]+)/).exec(navigator.appVersion)[1])@*/
,c={IE:!!d,Opera:a,WebKit:b.indexOf("AppleWebKit/")>-1,Chrome:b.indexOf("Chrome")>-1,Gecko:b.indexOf("Gecko")>-1&&b.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile.*Safari/.test(b),iOs:b.indexOf("iPad")>-1||b.indexOf("iPhone")>-1||b.indexOf("iPod")>-1,iOS67:b.search(/OS 6(.*)|7(.*) like Mac OS/i)>-1,BlackBerry:b.indexOf("BlackBerry")>-1,Fennec:b.indexOf("Fennec")>-1,IEMobile:b.indexOf("IEMobile")>-1,WindowsPhone:b.toLowerCase().indexOf("windows phone")>-1,WindowsTablet:b.toLowerCase().indexOf("windows nt")>-1&&b.toLowerCase().indexOf("touch")>-1,OperaMobile:b.search(/Opera (?:Mobi|Mini)/)>-1,Kindle:b.search(/[ ](Kindle|Silk)/)>-1,isChromeIOS:/crios/i.test(b),ua:b,Android:/Android/.test(b)},e=false;c.isMobile=(c.MobileSafari||c.BlackBerry||c.Fennec||c.IEMobile||c.OperaMobile||c.Kindle||c.iOs||c.Android||c.WindowsPhone||c.WindowsTablet);c.isMobileNonIOS=(c.isMobile&&!c.iOs);return c;}};OOo.Browser=OOo.__detectBrowser(navigator.userAgent);OOo.Cache={};OOo.instanceCount=0;OOo.K=function(){};var E=E||OOo;(function(){function v(b){return document.getElementById(b);}function z(b,a){var d;for(d in a){if(a.hasOwnProperty(d)){b[d]=a[d];}}return b;}function w(b,a,d,c){if(b.addEventListener){b.addEventListener(a,d,c);}else{if(b.attachEvent){b.attachEvent("on"+a,d);}}}function u(b,a,d,c){if(b.removeEventListener){b.removeEventListener(a,d,c);}else{if(b.detachEvent){b.detachEvent("on"+a,d);}}}function C(b){var a=[],d;for(d in b){if(b.hasOwnProperty(d)){a.push(d+"="+(encodeURIComponent(b[d])||""));}}return a.join("&");}function x(b){var a=C(b.metrics),d=b.tealeafId+"|"+b.clickTalePID+"/"+b.clickTaleUID+"/"+b.clickTaleSID;a+="&custom_var="+OOo.createLegacyVars(b.legacyVariables,d);if(b.metrics.type==="OnPage"){a+="|iframe";}if(b.asm){a+="&asm=2";}a+="&_rev=2";if(b.customVariables){a+="&customVars="+encodeURIComponent(OOo.serialize(b.customVariables));}return a;}function D(b,a){var d=document,c=d.createElement("form"),e=d.createElement("input"),f=b.referrerRewrite;b.metrics.referer=location.href;if(f){b.metrics.referer=OOo.referrerRewrite(f);}c.style.display="none";c.method="post";c.target=a||"OnlineOpinion";c.action=b.onPageCard?"https://secure.opinionlab.com/ccc01/comment_card_json_4_0_b.asp?r="+location.href:"https://secure.opinionlab.com/ccc01/comment_card_d.asp";if(b.commentCardUrl){c.action=b.commentCardUrl;if(b.onPageCard){c.action+="?r="+location.href;}}e.name="params";e.value=x(b);c.appendChild(e);d.body.appendChild(c);return c;}function A(){return{width:screen.width,height:screen.height,referer:location.href,prev:document.referrer,time1:(new Date()).getTime(),time2:null,currentURL:location.href,ocodeVersion:"5.9.3"};}function B(b){var a="";if(b&&b.search("://")>-1){var d=b.split("/");for(var c=3;c<d.length;c++){a+="/";a+=d[c];}}return a;}function y(b,a){b=b||{};if(typeof b==="string"){return a+"|"+b;}return b.override?b.vars:a+(b.vars?"|"+b.vars:"");}function F(b,a){if(!a){a=location;}if(typeof b==="string"){return b;}return b.searchPattern?a.href.replace(b.searchPattern,b.replacePattern):b.replacePattern;}function N(b){var a,d=false,c=document.getElementsByTagName("meta");if(c!=="undefined"){for(a=0;a<c.length;a+=1){if(c[a].getAttribute("name")===b){d=true;}}}return d;}var G=(function(){if(navigator.appName==="Microsoft Internet Explorer"&&navigator.userAgent.search("MSIE 6")!==-1){return true;}var b=document.body,a,d;if(document.createElement&&b&&b.appendChild&&b.removeChild){a=document.createElement("iframe");d=false;a.setAttribute("name","oo_test");a.style.display="none";b.appendChild(a);d=!!!document.getElementsByName("oo_test")[0];b.removeChild(a);return d;}else{return null;}}());function H(b,a){var d=b||window.event;if(d.preventDefault&&d.stopPropagation){d.preventDefault();d.stopPropagation();}else{d.returnValue=false;}var c=OOo.$("oo_waypoint_container"),e=c.parentNode;e.removeChild(c);if(a){a.focus();}}function I(){var b=this.options;var a="<div id='oo_waypoint_prompt' role='dialogue' aria-describedby='oo_waypoint_message'><div id='oo_company_logo'></div><div id='oo_waypoint_content'><p id='oo_waypoint_message'>Select a category</p><p id='waypoint_icons'></p><p id='ol_brand_logo'><a href='http://www.opinionlab.com/company/' target='_0' aria-label='Powered by OpinionLab. This will open a new window'></a></p></div><a id='oo_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialogue</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_waypoint_prompt #oo_waypoint_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->";if(typeof b.wpmarkup!=="undefined"){a=b.wpmarkup;}var d=OOo.$("oo_waypoint_prompt");if(d){var c=OOo.$("oo_waypoint_container");this.showWaypoint(c);return;}this.showWaypoint(a);}function J(c){var e=document,f=0,g=typeof c==="string"?e.createElement("div"):c,h=e.createElement("div"),l,m,j,i,k=this.options,o=k.categories,p,q,r=e.activeElement;h.id="oo_waypoint_overlay";g.id="oo_waypoint_container";g.style.visibility="hidden";if(typeof c==="string"){g.innerHTML=c;e.body.appendChild(g);}g.appendChild(h);if(k.companyLogo&&k.companySlogan){l=new Image();l.src=k.companyLogo;l.alt=k.companySlogan;OOo.$("oo_company_logo").appendChild(l);OOo.$("oo_waypoint_prompt").setAttribute("aria-label",k.companySlogan);}j=new Image();j.src=k.pathToAssets+"oo_opinionlab_logo.png";j.alt="powered by OpinionLab";OOo.$("ol_brand_logo").children[0].appendChild(j);p=OOo.$("oo_close_prompt");for(var s in o){if(o.hasOwnProperty(s)){var n=document.createElement("a"),t=k.categories[s].icon;n.className="waypoint_icon";n.href="#";n.innerHTML=String(s).replace(/_/g," ")+'<span class="screen_reader">This will open a new window</span>';if(t&&e.addEventListener){n.style.backgroundImage="url("+k.pathToAssets+t+")";n.style.backgroundRepeat="no-repeat";n.style.backgroundPosition="left center";n.style.backgroundSize="70px 50px";n.style.textAlign="left";n.style.paddingLeft="90px";}if(typeof k.categories[s].oCode==="string"){OOo.addEventListener(n,"click",(function(d){return function(b){var a=b||window.event;window.open(k.categories[d].oCode,"_0","scrollbars=yes,location=yes,menubar=yes,resizable=yes");OOo.hideWaypoint(a,r);};})(s),false);n.onkeyup=(function(d){return function(b){var a=b||window.event;if(a.keyCode!==13){return;}window.open(k.categories[d].oCode,"_0","scrollbars=yes,location=yes,menubar=yes,resizable=yes");OOo.hideWaypoint(a,r);};})(s);}else{OOo.addEventListener(n,"click",(function(d){return function(b){var a=b||window.event;OOo.Waypoint[d].show(a);OOo.hideWaypoint(a,r);};})(s),false);n.onkeyup=(function(d){return function(b){var a=b||window.event;if(a.keyCode!==13){return;}OOo.Waypoint[d].show(a);OOo.hideWaypoint(a,r);};})(s);}f++;OOo.$("waypoint_icons").appendChild(n);}}OOo.addEventListener(p,"click",function(b){var a=b||window.event;OOo.hideWaypoint(a,r);},false);i=OOo.$("waypoint_icons").children;q=i[0];q.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(a.shiftKey){p.focus();return false;}}};p.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return;}OOo.hideWaypoint(a,r);};p.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(!a.shiftKey){q.focus();return false;}}};i[f-1].className="waypoint_icon last";g.style.visibility="visible";g.style.display="block";h.className="no_loading";q.focus();}function K(b,a){var d=b||window.event;if(d.preventDefault&&d.stopPropagation){d.preventDefault();d.stopPropagation();}else{d.returnValue=false;}OOo.$("oo_container").style.display="none";if(a){a.focus();}}function L(){var b="<div id='oo_invitation_prompt' role='dialog' aria-describedby='oo_invite_message'><div id='oo_company_logo'></div><div id='oo_invite_content'><p id='oo_invite_message'>After your visit, would you be willing to provide some quick feedback?<br /><br />(It will only take a minute)</p><p class='prompt_button'><a href='#' id='oo_launch_prompt'>Yes<span class='screen_reader'>This will open a new window</span></a></p><p class='prompt_button'><a href='#' id='oo_no_thanks'>No Thanks</a></p><p id='ol_brand_logo'><a href='http://www.opinionlab.com/company/'; target='_0' aria-label='Powered by OpinionLab. This will open a new window'></a></p></div><a id='oo_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialog</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_invitation_prompt #oo_invite_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->";var a=this.options;if(typeof a.inviteMarkup!=="undefined"){b=a.inviteMarkup;}var d=OOo.$("oo_invitation_prompt");if(d){var c=OOo.$("oo_container");this.showPrompt(c);return;}this.showPrompt(b);}function M(d,c){var e=document,f=typeof d==="string"?e.createElement("div"):d,g=e.createElement("div"),h,l,m,j,i=this.options,k,o,p,q,r=e.activeElement;g.id="oo_invitation_overlay";f.id="oo_container";f.style.visibility="hidden";if(typeof d==="string"){f.innerHTML=d;e.body.appendChild(f);}f.appendChild(g);k=OOo.$("oo_launch_prompt");o=OOo.$("oo_no_thanks");p=OOo.$("oo_close_prompt");q=OOo.$("oo_company_logo");if(i.companyLogo&&i.companySlogan){h=new Image();h.src=i.companyLogo;h.alt=i.companySlogan;q.appendChild(h);OOo.$("oo_invitation_prompt").setAttribute("aria-label",i.companySlogan);}m=new Image();m.src=i.pathToAssets+"oo_opinionlab_logo.png";m.alt="powered by OpinionLab";OOo.$("ol_brand_logo").children[0].appendChild(m);if(i.callBacks){if(typeof i.callBacks.prompt==="function"){i.callBacks.prompt();}if(typeof i.callBacks.yesClick==="function"){OOo.addEventListener(k,"click",function(){i.callBacks.yesClick();},false);}if(typeof i.callBacks.noClick==="function"){OOo.addEventListener(o,"click",function(){i.callBacks.noClick();},false);}if(typeof i.callBacks.closeClick==="function"){OOo.addEventListener(p,"click",function(){i.callBacks.closeClick();},false);}}OOo.addEventListener(k,"click",c.bind(this),false);OOo.addEventListener(o,"click",function(b){var a=b||window.event;OOo.hidePrompt(a,r);},false);OOo.addEventListener(p,"click",function(b){var a=b||window.event;OOo.hidePrompt(a,r);},false);k.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return;}c.bind(this);}.bind(this);k.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(a.shiftKey){p.focus();return false;}}};o.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return;}OOo.hidePrompt(a,r);};p.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return;}OOo.hidePrompt(a,r);};p.onkeydown=function(b){var a=b||window.event;if(a.keyCode===9){if(!a.shiftKey){k.focus();return false;}}};f.style.visibility="visible";f.style.display="block";g.className="no_loading";r.blur();k.focus();}z(OOo,{extend:z,toQueryString:C,addEventListener:w,$:v,appendOOForm:D,removeEventListener:u,createMetrics:A,truncateMetric:B,createLegacyVars:y,DYNAMIC_FRAME_NAME_IS_BUGGY:G,getFormParams:x,referrerRewrite:F,hidePrompt:K,getPrompt:L,showPrompt:M,hideWaypoint:H,getWaypoint:I,showWaypoint:J});}());(function(){function f(b){if(!b){return null;}switch(typeof b){case"number":case"boolean":case"function":return b;case"string":return"'"+b+"'";case"object":var a,d,c,e;if(b.constructor===Array||typeof b.callee!=="undefined"){a="[";c=b.length;for(d=0;d<c-1;d+=1){a+=f(b[d])+",";}a+=f(b[d])+"]";}else{a="{";for(e in b){if(b.hasOwnProperty(e)){a+=e+":"+f(b[e])+",";}}a=a.replace(/\,$/,"")+"}";}return a;default:return null;}}OOo.extend(OOo,{serialize:f});}());(function(){function e(b,a,d){var c;if(b.search(a[0])!==-1){OOo.createCookie(d,0);return false;}else{if(OOo.readCookie(d)){c=parseInt(OOo.readCookie(d),10);if((b.search(a[c+1])!==-1)&&(c+1!==a.length-1)){OOo.createCookie(d,c+1);return false;}else{if(b.search(a[c])!==-1){return false;}else{if(c+1===a.length-1&&b.search(a.pop())!==-1){OOo.eraseCookie(d);return true;}else{OOo.eraseCookie(d);return false;}}}}else{return false;}}}OOo.extend(OOo,{checkTunnel:e});}());(function(){function r(b){var a="",d;for(d=7;d>=0;d-=1){a+="0123456789abcdef".charAt((b>>(d*4))&15);}return a;}function s(b){var a=((b.length+8)>>6)+1,d=new Array(a*16),c;for(c=0;c<a*16;c+=1){d[c]=0;}for(c=0;c<b.length;c+=1){d[c>>2]|=b.charCodeAt(c)<<(24-(c%4)*8);}d[c>>2]|=128<<(24-(c%4)*8);d[a*16-1]=b.length*8;return d;}function n(b,a){var d=(b&65535)+(a&65535),c=(b>>16)+(a>>16)+(d>>16);return(c<<16)|(d&65535);}function t(b,a){return(b<<a)|(b>>>(32-a));}function v(b,a,d,c){if(b<20){return(a&d)|((~a)&c);}if(b<40){return a^d^c;}if(b<60){return(a&d)|(a&c)|(d&c);}return a^d^c;}function z(b){return(b<20)?1518500249:(b<40)?1859775393:(b<60)?-1894007588:-899497514;}function w(b){var a=s(b),d=new Array(80),c=1732584193,e=-271733879,f=-1732584194,g=271733878,h=-1009589776,l,m,j,i,k,o,p,q;for(p=0;p<a.length;p+=16){l=c;m=e;j=f;i=g;k=h;for(q=0;q<80;q+=1){if(q<16){d[q]=a[p+q];}else{d[q]=t(d[q-3]^d[q-8]^d[q-14]^d[q-16],1);}o=n(n(t(c,5),v(q,e,f,g)),n(n(h,d[q]),z(q)));h=g;g=f;f=t(e,30);e=c;c=o;}c=n(c,l);e=n(e,m);f=n(f,j);g=n(g,i);h=n(h,k);}return r(c)+r(e)+r(f)+r(g)+r(h);}OOo.extend(OOo,{sha1:w});}());(function(){function h(b,a){if(!a){a=location;}var d=b.cookieName||"oo_abandon",c=OOo.readCookie(d),e=b.startPage,f=b.endPage,g=b.middle;if(!c){if(a.pathname.indexOf(e)!==-1){OOo.createCookie(d);}return false;}else{if(a.pathname.indexOf(f)!==-1){OOo.eraseCookie(d);return false;}else{if(a.pathname.search(g)!==-1){return false;}else{OOo.eraseCookie(d);return true;}}}}OOo.extend(OOo,{checkAbandonment:h});}());(function(){function c(b){var a,d;for(a=b.length-1;a>=0;a-=1){if(b[a].read){d=OOo.readCookie(b[a].name);if(!!d&&d===b[a].value){return true;}else{if(typeof b[a].value==="undefined"&&!!OOo.readCookie(b[a].name)){return true;}}}}return false;}function e(b){var a;for(a=b.length-1;a>=0;a-=1){if(b[a].set){OOo.createCookie(b[a].name,b[a].value,b[a].expiration);}}}OOo.extend(OOo,{checkThirdPartyCookies:c,setThirdPartyCookies:e});}());OOo.extend(Function.prototype,(function(){if(typeof Function.prototype.bind!=="undefined"){return;}var e=Array.prototype.slice;function f(b,a){var d=b.length,c=a.length;while(c){c-=1;b[d+c]=a[c];}return b;}function g(b,a){b=e.call(b,0);return f(b,a);}function h(a){if(arguments.length<2&&typeof a==="undefined"){return this;}var d=this,c=e.call(arguments,1);return function(){var b=g(c,arguments);return d.apply(a,b);};}return{bind:h};}()));(function(){function f(b){if(!b){b=location;}var a;if(b.host.search(/\.[a-z]+/)!==-1){a=b.host.split(".").reverse();if(a.length>3){return b.host;}a="."+a[1]+"."+a[0];}else{a=b.host;}return a;}function g(b,a,d){var c="",e="";if(d){c=new Date();c.setTime(c.getTime()+(d*1000));e="; expires="+c.toGMTString();}if(location.host!==f()){document.cookie=b+"="+a+e+"; path=/; domain="+f()+";";}else{document.cookie=b+"="+a+e+"; path=/;";}}function h(b){var a=b+"=",d=document.cookie.split(";"),c,e;for(e=0;e<d.length;e+=1){c=d[e];while(c.charAt(0)===" "){c=c.substring(1,c.length);}if(c.indexOf(a)===0){return c.substring(a.length,c.length);}}return null;}function l(b){g(b,"",-1);}OOo.extend(OOo,{getCookieDomain:f,createCookie:g,readCookie:h,eraseCookie:l});}());OOo.Ocode=function(b){var a=OOo.Browser,d,c;if(b.disableMobile&&a.isMobile){return;}if(b.disableNoniOS&&a.isMobileNonIOS){return;}OOo.instanceCount+=1;this.options={tealeafCookieName:"TLTSID"};OOo.extend(this.options,b);d=this.options;d.metrics=OOo.createMetrics();this.frameName=d.onPageCard?"OnlineOpinion"+OOo.instanceCount:"OnlineOpinion";if(d.cookie&&OOo.Ocode.matchUrl(d.cookie,location)){return;}if(d.thirdPartyCookies&&OOo.checkThirdPartyCookies(d.thirdPartyCookies)){return;}if(d.abandonment&&!OOo.checkAbandonment(d.abandonment)){return;}if(d.tunnel&&!OOo.checkTunnel(location.pathname,d.tunnel.path,d.tunnel.cookieName)){return;}if(d.events&&d.events.onSingleClick){this.singProbability=Math.random()<1-d.events.onSingleClick/100;}d.tealeafId=OOo.readCookie(d.tealeafCookieName)||OOo.readCookie(d.sessionCookieName);if(d.events){this.setupEvents();if(d.events.disableLinks||d.events.disableFormElements){this.setupDisableElements();}}if(d.floating){this.floating();}else{if(d.bar){this.bar();}else{if(d.tab){this.tab();}}}};OOo.Ocode.prototype={show:function(b,a){var d=b||window.event;if(a!=="exit"&&a!=="entry"){if(d.preventDefault&&d.stopPropagation){d.preventDefault();d.stopPropagation();}else{d.returnValue=false;}}if(this.onPageCardVisible){return;}var c=this.options,e;if(c.events&&c.events.prompt){if(c.cookie){OOo.eraseCookie(c.cookie.name||"oo_r");}OOo.hidePrompt();}if(this.interruptShow){return;}if(!this.floatingLogo&&c.cookie&&OOo.Ocode.matchUrl(c.cookie)){return;}if(!c.floating&&c.events&&this.singProbability){return;}if(c.events&&c.events.onSingleClick){this.singProbability=true;}if(c.cookie){OOo.Ocode.tagUrl(c.cookie);}if(c.thirdPartyCookies){if(OOo.checkThirdPartyCookies(c.thirdPartyCookies)){return;}OOo.setThirdPartyCookies(c.thirdPartyCookies);}if(this.floatingLogo){this.floatingLogo.children[0].blur();}if(this.floatingLogo&&c.disappearOnClick){this.floatingLogo.style.display="none";}if(c.clickTalePID&&typeof window.ClickTale==="function"){c.clickTaleUID=window.ClickTaleGetUID();c.clickTaleSID=window.ClickTaleGetSID();}if(c.onPageCard&&!OOo.Browser.isMobile){this.setupOnPageCC();}else{this.launchOOPopup();}e=c.floating||c.tab||c.bar;if(e&&typeof e.onClickCallback==="function"){e.onClickCallback();}}};OOo.extend(OOo.Ocode,{tagUrl:function(b,a){if(!a){a=location;}var d=b.name||"oo_r",c=b.type==="page"?a.href:a.hostname,e=OOo.readCookie(d)||"";if(OOo.Ocode.matchUrl(b,a)){return;}OOo.createCookie(d,e+OOo.sha1(c),b.expiration);},matchUrl:function(b,a){if(!a){a=location;}var d=OOo.readCookie(b.name||"oo_r"),c;if(!d){return false;}c=b.type==="page"?a.href:a.hostname;return d.search(OOo.sha1(c))!==-1;}});(function(){var l=0;function m(){var b=this.options,a=b.newWindowSize||[545,325],d=[parseInt((b.metrics.height-a[1])/2,10),parseInt((b.metrics.width-a[0])/2,10)],c,e,f="resizable=yes,location=no,status=no,scrollbars=1,width="+a[0]+",height="+a[1]+",top="+d[0]+",left="+d[1],g="OnlineOpinion";if(b.newWindow){g=g+(l++);}b.metrics.time2=(new Date()).getTime();b.metrics.type="Popup";c=OOo.appendOOForm(b,g);var h="https://secure.opinionlab.com/ccc01/comment_card_d.asp?"+c.children[0].value;if(b.commentCardUrl){h=b.commentCardUrl;}if(OOo.Browser.isChromeIOS){g="_0";}if(OOo.Browser.isMobile&&OOo.Browser.ua.search("Android")!==-1){c.submit();}else{e=window.open(h,g,f);if(e&&!OOo.Browser.isChromeIOS){c.submit();}}}OOo.extend(OOo.Ocode.prototype,{launchOOPopup:m});}());(function(){function i(){var d=this.options.events,c=[false,false],e=["onExit","onEntry"],f="beforeunload",g,h,l,m,j;if(OOo.Browser.Opera){f="unload";}if(OOo.Browser.iOs){f="pagehide";}if(d.prompt){OOo.extend(this.options,{promptMarkup:d.prompt.promptMarkup||"oo_event_prompt.html",neverShowAgainButton:false,pathToAssets:d.prompt.pathToAssets});}for(l=e.length-1;l>=0;l-=1){g=e[l];if(d[g] instanceof Array){m=d[g];j=m.length;while(j&&!c[l]){j-=1;if(window.location.href.search(m[j].url)!==-1&&Math.random()>=1-m[j].p/100){c[l]=true;}}}else{if(d[g]&&Math.random()>=1-d[g]/100){c[l]=true;}}}if(c[0]){OOo.addEventListener(window,f,function(b){var a=b||window.event;this.show(a,"exit");}.bind(this),false);}if(c[1]){if(d.delayEntry){window.setTimeout(function(b){var a=b||window.event;if(d.prompt){this.getPrompt();}else{this.show(a,"entry");}}.bind(this),d.delayEntry*1000);}else{if(d.prompt){this.getPrompt();}else{(function(b){var a=b||window.event;this.show(a,"entry");}).bind(this)();}}}}function k(b){var a=b||window.event,d=b.target||b.srcElement,c=this.options.events,e=d.parentNode,f=5,g=0;while(e&&(d.nodeName!=="A"||d.nodeName!=="INPUT")&&g!==f){if(e.nodeName==="A"){d=e;}e=e.parentNode;g+=1;}if(c.disableFormElements&&(d.tagName==="INPUT"||d.tagName==="BUTTON")&&(d.type==="submit"||d.type==="image"||d.type==="reset"||d.type==="button")){this.interruptShow=true;}if(c.disableLinks&&(d.nodeName==="A"||d.nodeName==="AREA")&&d.href.substr(0,4)==="http"&&d.href.search(c.disableLinks)!==-1){this.interruptShow=true;}}function o(b){this.interruptShow=true;}function p(){OOo.addEventListener(document.body,"mousedown",k.bind(this));if(!this.options.events.disableFormElements){return;}var b=document.getElementsByTagName("form"),a;for(a=b.length-1;a>=0;a-=1){OOo.addEventListener(b[a],"submit",o.bind(this));}}OOo.extend(OOo.Ocode.prototype,{setupEvents:i,setupDisableElements:p,getPrompt:function(){OOo.getPrompt.call(this);},showPrompt:function(b){if(this.options.cookie){OOo.Ocode.tagUrl(this.options.cookie);}OOo.showPrompt.call(this,b,this.show);}});}());OOo.extend(OOo.Ocode.prototype,{floating:function(){var c=document,e=this.floatingLogo=document.createElement("div"),f=c.createElement("div"),g=c.createElement("div"),h=c.createElement("div"),l=c.createElement("span"),m=this.options.floating,j=OOo.$(m.contentId),i="10px",k=m.id,o=c.createElement("span"),p,q,r,s,n,t,v,z,w=0;function u(b){return b.offsetLeft+b.offsetWidth;}function C(b){s.style.left=u(j)+"px";}o.innerHTML="Screen reader users: Please switch to forms mode for this link.";o.className="screen_reader";if(k){e.id=k;}e.className="oo_feedback_float";g.className="oo_transparent";f.className="olUp";h.className="olOver";f.tabIndex=0;f.onkeyup=function(b){p=b||window.event;if(p.keyCode!==13){return;}this.show(p);}.bind(this);f.innerHTML=m.caption||"Feedback";e.appendChild(o);e.appendChild(f);l.innerHTML=m.hoverCaption||"Click here to<br>rate this page";h.appendChild(l);e.appendChild(h);e.appendChild(g);function x(b){var a=c.documentElement.scrollTop||c.body.scrollTop,d=c.documentElement.clientHeight||document.body.clientHeight;e.style.top=(a+d-(v||0)-10)+"px";}if(m.position&&m.position.search(/Content/)&&j){s=this.spacer=c.createElement("div");n=OOo.Browser.WebKit?c.body:c.documentElement;s.id="oo_feedback_fl_spacer";s.style.left=u(j)+"px";c.body.appendChild(s);switch(m.position){case"rightOfContent":t=function(b){e.style.left=(u(j)-n.scrollLeft)+"px";};break;case"fixedPreserveContent":t=function(b){var a=OOo.Browser.IE?c.body.clientWidth:window.innerWidth,d=n.scrollLeft;if(a<=u(j)+e.offsetWidth+parseInt(i,10)){e.style.left=(u(j)-d)+"px";}else{e.style.left="";e.style.right=i;}};break;case"fixedContentMax":t=function(b){var a=OOo.Browser.IE?c.body.clientWidth:window.innerWidth;if(a<=u(j)+e.offsetWidth+parseInt(i,10)){e.style.left="";e.style.right=i;}else{e.style.left=(u(j)-n.scrollLeft)+"px";e.style.right="";}};break;}window.setTimeout(t,0);OOo.addEventListener(window,"scroll",t,false);OOo.addEventListener(window,"resize",t,false);OOo.addEventListener(window,"resize",C,false);}else{e.style.right=i;}e.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return;}this.show(a);}.bind(this);if(OOo.Browser.isMobile){if("ontouchstart" in window){e.ontouchstart=function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation();}else{a.returnValue=false;}w++;}.bind(this);e.ontouchend=function(b){var a=b||window.event;if(w>=2){this.show(a);w=0;}}.bind(this);}else{e.onclick=function(b){var a=b||window.event;this.show(a);}.bind(this);}}else{e.onclick=function(b){var a=b||window.event;this.show(a);}.bind(this);}c.body.appendChild(e);},removeFloatingLogo:function(){document.body.removeChild(this.floatingLogo);if(this.spacer){document.body.removeChild(this.spacer);}}});OOo.extend(OOo.Ocode.prototype,{bar:function(){var c=document,e=this.floatingLogo=c.createElement("a"),f,g,h,l=c.documentElement.scrollTop||c.body.scrollTop,m=c.createElement("span"),j=this.options,i=0,k=c.createElement("span");function o(b){var a=0,d=0;if(b.offsetParent){do{a+=b.offsetLeft;d+=b.offsetTop;}while(b==b.offsetParent);return[a,d];}}function p(b){var a=document.activeElement,d;if(!a){return;}d=o(a);if(!d){return;}if(d[1]+a.clientHeight>(window.innerHeight||document.body.clientHeight)+(window.pageYOffset||document.body.scrollTop)-e.clientHeight){if(navigator.appVersion.indexOf("MSIE 7.")!==-1){window.scrollBy(0,0);}else{window.scrollBy(0,a.clientHeight+20);}}}m.innerHTML="Launches comment card in new window";m.className="screen_reader";k.className="icon";this.reflowBar=OOo.K;e.id="oo_bar";e.href="#";e.innerHTML=j.bar.caption||"Feedback";e.appendChild(m);e.appendChild(k);if(typeof j.tabIndex==="number"){e.tabIndex=j.tabIndex;}else{e.tabIndex=0;}e.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return;}this.show(a);}.bind(this);if(OOo.Browser.isMobile){if("ontouchstart" in window){e.ontouchstart=function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation();}else{a.returnValue=false;}i++;}.bind(this);e.ontouchend=function(b){var a=b||window.event;if(i>=2){this.show(a);i=0;}}.bind(this);}else{e.onclick=function(b){var a=b||window.event;this.show(a);}.bind(this);}}else{e.onclick=function(b){var a=b||window.event;this.show(a);}.bind(this);}document.body.className+=document.body.className<1?"oo_bar":" oo_bar";document.body.appendChild(e);OOo.addEventListener(document.body,"keyup",p,false);}});OOo.extend(OOo.Ocode.prototype,{tab:function(){var d=document,c=this.floatingLogo=d.createElement("div"),e=d.createElement("div"),f=d.createElement("div"),g=d.createElement("span"),h=this.options.tab,l=d.createElement("a"),m="Feedback",j=h.tabType,i="right",k=0;switch(j){case 1:var o=d.createElement("span");c=this.floatingLogo=d.createElement("a");e=d.createElement("span");c.href="#";c.id="oo_tab_"+j;if(h.position){i=h.position;}c.className=tabClass="oo_tab_"+i+"_"+j;e.className="screen_reader";o.className="icon";if(typeof h.tabIndex==="number"){c.tabIndex=h.tabIndex;}else{c.tabIndex=0;}if(h.verbiage){m=h.verbiage;}c.innerHTML=m;e.innerHTML="Launches comment card in new window";c.appendChild(e);c.appendChild(o);setTimeout(function(){c.className+=" small";},2500);break;default:c.id="oo_tab";c.className="oo_tab_"+(h.position||i);if(h.wcagBasePath){c.className+=" wcag";}if(typeof h.tabIndex==="number"){c.tabIndex=h.tabIndex;}else{if(typeof h.tabIndex==="undefined"){c.tabIndex=0;}}f.appendChild(l);c.appendChild(f);f.appendChild(g);c.appendChild(f);if(e){e.className="screen_reader";e.innerHTML="Activate to launch comment card";c.appendChild(e);}}c.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return;}this.show(a);}.bind(this);if(OOo.Browser.isMobile){if("ontouchstart" in window){c.ontouchstart=function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation();}else{a.returnValue=false;}k++;}.bind(this);c.ontouchend=function(b){var a=b||window.event;if(k>=2){this.show(a);k=0;}}.bind(this);}else{c.onclick=function(b){var a=b||window.event;this.show(a);}.bind(this);}}else{c.onclick=function(b){var a=b||window.event;this.show(a);}.bind(this);}d.body.appendChild(c);}});OOo.extend(OOo.Ocode.prototype,{setupOnPageCC:function(){var e=document,f=OOo.Cache.overlay||e.createElement("div"),g=this.wrapper=e.createElement("div"),h=e.createElement("a"),l=e.createElement("div"),m=e.createElement("span"),j=this.frameName,i=e.createElement(OOo.DYNAMIC_FRAME_NAME_IS_BUGGY?'<iframe name="'+j+'">':"iframe"),k=e.createDocumentFragment(),o=this.options,p=o.onPageCard,q="https://secure.opinionlab.com/ccc01/comment_card_json_4_0_b.asp",r,s,n,t=false,v=this,z,w,u,C,x,D,A,B=e.createElement("span");function y(b){if(b&&b.preventDefault){b.preventDefault();}document.body.focus();i.tabIndex=-1;i.title="empty";i["aria-hidden"]="true";f.style.display="none";f.className="";e.body.removeChild(g);if(window.postMessage){OOo.removeEventListener(window,"message",x);}else{window.clearInterval(s);}t=false;v.onPageCardVisible=false;return false;}x=OOo.Ocode.postMessageHandler(function(b){var a=parseInt(b,10),d,c;if(a>0){if(t){return;}t=true;d=window.innerHeight||e.documentElement.clientHeight||e.body.clientHeight;c=a;A=g.offsetTop;if(c+A>d){c=d-40-A;}i.style.width="555px";l.style.width="555px";i.style.height=c+"px";g.style.visibility="visible";if(m.clientHeight<20){m.style.height=g.offsetHeight+"px";}f.className="no_loading";v.onPageCardVisible=true;r&&e.body.removeChild(r);}else{if(b==="submitted"){y();}}if(OOo.Browser.IE&&e.compatMode==="BackCompat"){window.scrollTo(0,0);}},v.options.commentCardUrl);o.metrics.type="OnPage";OOo.Cache.overlay=f;f.id="oo_overlay";f.style.display="block";f.className="";l.className="iwrapper";g.className="oo_cc_wrapper";g.setAttribute("role","alert");g.setAttribute("aria-describedby","comment_card_description");B.className="screen_reader";B.id="comment_card_description";B.innerHTML="Please leave your feedback in the comment card you just activated";g.appendChild(B);h.className="oo_cc_close";h.innerHTML='<span class="screen_reader">Close dialog</span><span aria-hidden="true">&#10006;</span>';h.title=o.closeTitle?o.closeTitle:"Close dialog";if(!e.addEventListener){l.style.outline="1px solid #cdcdcd";}g.style.visibility="hidden";h.tabIndex=0;h.onkeyup=function(b){var a=b||window.event;if(a.keyCode!==13){return;}y();};if(OOo.Browser.IE){i.frameBorder="0";if(!window.XMLHttpRequest||e.compatMode==="BackCompat"){D=Math.max(e.documentElement.clientWidth,e.body.offsetWidth);f.style.position="absolute";f.style.width=e.compatMode==="BackCompat"?(D-21)+"px":D+"px";f.style.height=Math.max(e.documentElement.clientHeight,e.body.offsetHeight)+"px";g.style.position="absolute";OOo.addEventListener(window,"scroll",function(){f.style.top=(e.body.scrollTop+document.body.clientHeight-f.clientHeight)+"px";g.style.top=(e.body.scrollTop+A+25)+"px";});}}OOo.addEventListener(h,"click",y);if(p.closeWithOverlay&&!OOo.Browser.isMobile){g.appendChild(m);m.onclick=y;f.onclick=y;}i.src=" ";i.name=j;i.title="Comment Card";l.appendChild(h);l.appendChild(i);g.appendChild(l);k.appendChild(g);k.appendChild(f);e.body.appendChild(k);if(window.postMessage){OOo.addEventListener(window,"message",x);}else{s=setInterval(x,500);}o.metrics.time2=(new Date()).getTime();r=OOo.appendOOForm(o,j);r.submit();}});OOo.extend(OOo.Ocode,{postMessageHandler:function(c,e,f){return function(b){var a="https://secure.opinionlab.com",d;if(!f){f=location;}if((b&&!(b.origin===a||b.origin.indexOf(e)!==0))||(!b&&f.hash.search("OL=")===-1)){return false;}d=b?b.data:f.hash.split("=").pop();if(!b&&location.hash){location.hash="";}c(d);return d;};}});OOo.Invitation=function(b){this.options={tunnelCookie:"oo_inv_tunnel",repromptTime:604800,responseRate:50,repromptCookie:"oo_inv_reprompt",promptMarkup:"oo_inv_prompt.html",promptStyles:"oo_inverstitial_style.css",percentageCookie:"oo_inv_percent",pagesHitCookie:"oo_inv_hit",popupType:"popunder",promptDelay:0,neverShowAgainButton:false,loadPopupInBackground:false,truncatePrevCurrentMetrics:false,disablePrevCurrentMetrics:false,tealeafCookieName:"TLTSID",monitorWindow:"oo_inv_monitor.html",companySlogan:"We value your opinion",beforePrompt:OOo.K,callBacks:{prompt:"",yesClick:"",noClick:"",closeClick:""},inviteMarkup:"<div id='oo_invitation_prompt' role='dialog' aria-describedby='oo_invite_message'><div id='oo_company_logo'></div><div id='oo_invite_content'><p id='oo_invite_message'>After your visit, would you be willing to provide some quick feedback?<br /><br />(It will only take a minute)</p><p class='prompt_button'><a href='#' id='oo_launch_prompt'>Yes<span class='screen_reader'>This will open a new window</span></a></p><p class='prompt_button'><a href='#' id='oo_no_thanks'>No Thanks</a></p><p id='ol_brand_logo'><a href='http://www.opinionlab.com/company/'; target='_0' aria-label='Powered by OpinionLab. This will open a new window'></a></p></div><a id='oo_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialog</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_invitation_prompt #oo_invite_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->"};this.popupShown=false;OOo.extend(this.options,b);var a=this.options,d=parseInt(OOo.readCookie(a.pagesHitCookie),10)||0;OOo.Invitation.friendlyDomains=a.friendlyDomains||null;var c={weight:Number(OOo.readCookie("oo_OODynamicRewrite_weight")),searchPattern:OOo.readCookie("oo_OODynamicRewrite_searchPattern"),replacePattern:OOo.readCookie("oo_OODynamicRewrite_replacePattern")};OOo.eraseCookie("oo_OODynamicRewrite_weight");OOo.eraseCookie("oo_OODynamicRewrite_searchPattern");OOo.eraseCookie("oo_OODynamicRewrite_replacePattern");if(!window.OOoDynamicRewrite||window.OOoDynamicRewrite.weight<c.weight){window.OOoDynamicRewrite=c;}if(window.OOoDynamicRewrite&&("number"===typeof window.OOoDynamicRewrite.weight)&&!isNaN(window.OOoDynamicRewrite.weight)){OOo.createCookie("oo_OODynamicRewrite_weight",window.OOoDynamicRewrite.weight);if(window.OOoDynamicRewrite.searchPattern){OOo.createCookie("oo_OODynamicRewrite_searchPattern",window.OOoDynamicRewrite.searchPattern);}if(window.OOoDynamicRewrite.replacePattern){OOo.createCookie("oo_OODynamicRewrite_replacePattern",window.OOoDynamicRewrite.replacePattern);}}if(location.search.search("evs")!==-1||OOo.readCookie("oo_evs_friendly")==="yes"){OOo.eraseCookie("oo_evs_friendly");a.loadPopupInBackground=true;this.launchPopup();OOo.createCookie(a.repromptCookie,1,a.repromptTime===-1?0:a.repromptTime);}setTimeout(function(){if(!window.oo_inv_monitor){return;}if(a.area&&location.href.search(a.area)===-1){this.options.popupType="popup";this.launchPopup();}else{if(a.goal&&location.href.search(a.goal)!==-1){window.oo_inv_monitor.close();}}}.bind(this),1600);if(OOo.readCookie(a.repromptCookie)){return;}if(a.thirdPartyCookies&&OOo.checkThirdPartyCookies(a.thirdPartyCookies)){return;}if(!OOo.readCookie(a.percentageCookie)){OOo.createCookie(a.percentageCookie,(Math.random()>1-(a.responseRate/100))?"1":"0");}if(typeof a.promptTrigger!=="undefined"){if(a.promptTrigger instanceof RegExp){if(!window.location.href.match(a.promptTrigger)){return;}}else{if(a.promptTrigger instanceof Array){if(!OOo.checkTunnel(location.pathname,a.promptTrigger,a.tunnelCookie)){return;}}}}d+=1;OOo.createCookie(a.pagesHitCookie,d);if(a.pagesHit&&d<a.pagesHit){return;}OOo.eraseCookie(a.tunnelCookie);if(OOo.readCookie(a.percentageCookie)==="1"){window.setTimeout(function(){OOo.createCookie(a.repromptCookie,1,a.repromptTime);this.options.beforePrompt();this.getPrompt();}.bind(this),a.promptDelay*1000);}};OOo.Invitation.notifyFriendlyLocationChange=function(b){if(window.oo_inv_monitor){OOo.createCookie("oo_evs_friendly","yes");}};OOo.Invitation.prototype={getPrompt:function(){OOo.getPrompt.call(this);},showPrompt:function(b){OOo.showPrompt.call(this,b,this.launchPopup);},launchPopup:function(a){if(this.popupShown){return;}this.popupShown=true;var d=a||window.event;if(d.preventDefault&&d.stopPropagation){d.preventDefault();d.stopPropagation();}else{d.returnValue=false;}var c=this.options,e=window.location.href,f=c.popupType==="popup"?"https://secure.opinionlab.com/ccc01/comment_card.asp?":c.pathToAssets+c.monitorWindow+"?time1="+(new Date()).getTime()+"&",g,h=[],l=c.asm?[555,500]:(OOo.Browser.Chrome?[400,400]:[400,350]),m,j=OOo.createMetrics(),i=OOo.readCookie(c.tealeafCookieName),k;if(c.clickTalePID&&window.ClickTaleGetUID&&window.ClickTaleGetSID){i+="|"+[c.clickTalePID,window.ClickTaleGetUID(),window.ClickTaleGetSID()].join("/");}l=c.newWindowSize||l;k="scrollbars=1,resizable=1,location=no,status=no,width="+l[0]+",height="+l[1];if(c.referrerRewrite){j.referer=OOo.referrerRewrite(c.referrerRewrite);}if(c.truncatePrevCurrentMetrics){j.prev=OOo.truncateMetric(j.prev);j.currentURL=OOo.truncateMetric(j.currentURL);}if(c.disablePrevCurrentMetrics){j.prev="";j.currentURL="";}if(c.thirdPartyCookies){OOo.setThirdPartyCookies(c.thirdPartyCookies);}g=OOo.toQueryString(j)+"&type=Invitation";if(c.customVariables){g+="&customVars="+encodeURIComponent(OOo.serialize(c.customVariables));}g+="&custom_var="+OOo.createLegacyVars(c.legacyVariables,i);if(c.asm){g+="&asm=2";k+=",scrollbars=1";}f+=g;if(f.match(/\?/g).length===2){f=f.replace(/\?([^?]*)$/,"&$1");}this.popup=m=window.open(f,"OnlineOpinionInvitation",k);if(!c.loadPopupInBackground&&OOo.$("oo_container")){OOo.hidePrompt(d);}if(c.chromeSurveyPrompt){setTimeout(function(b){m.postMessage(c.chromeSurveyPrompt,"*");},500);}},killPrompt:function(b){var a=b||window.event;if(this.options.callBacks&&typeof this.options.callBacks.noClick==="function"){this.options.callBacks.noClick();}OOo.createCookie(this.options.repromptCookie,1,157680000);OOo.hidePrompt(a);}};OOo.extend(OOo.Invitation,{navigateToFriendlyDomain:function(b){location.href=b;}});OOo.Waypoint=function(b){var a=OOo.Browser;if(b.disableMobile&&a.isMobile){return;}if(b.disableNoniOS&&a.isMobileNonIOS){return;}this.options={pathToAssets:"/onlineopinionV5/",waypointMarkup:"oo_waypoint.html",companySlogan:"Give us feedback",companyLogo:"waypoint_logo.png",categories:{website:{tealeafCookieName:"TLTSID",waypointIcon:"waypoint_icon.png"},store:{referrerRewrite:{searchPattern:/:\/\//,replacePattern:"://store."},tealeafCookieName:"TLTSID",waypointIcon:"waypoint_icon.png"},product:{referrerRewrite:{searchPattern:/:\/\//,replacePattern:"://product."},tealeafCookieName:"TLTSID",waypointIcon:"waypoint_icon.png"},other:{referrerRewrite:{searchPattern:/:\/\//,replacePattern:"://other."},tealeafCookieName:"TLTSID",waypointIcon:"waypoint_icon.png"}},wpmarkup:"<div id='oo_waypoint_prompt' role='dialogue' aria-describedby='oo_waypoint_message'><div id='oo_company_logo'></div><div id='oo_waypoint_content'><p id='oo_waypoint_message'>Select a category</p><p id='waypoint_icons'></p><p id='ol_brand_logo'><a href='http://www.opinionlab.com/company/' target='_0' aria-label='Powered by OpinionLab. This will open a new window'></a></p></div><a id='oo_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialogue</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_waypoint_prompt #oo_waypoint_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->"};OOo.extend(this.options,b);var d=this.options,c=d.categories;for(var e in c){if(c.hasOwnProperty(e)){if(typeof d.categories[e].oCode==="object"){var f={};f[e]=new OOo.Ocode(c[e].oCode);OOo.extend(OOo.Waypoint,f);}}}OOo.extend(OOo.Waypoint,{getWaypoint:function(){this.getWaypoint();}.bind(this)});};OOo.Waypoint.prototype={getWaypoint:function(){OOo.getWaypoint.call(this);},showWaypoint:function(b){OOo.showWaypoint.call(this,b);},killWaypoint:function(b){var a=b||window.event;OOo.hideWaypoint(a);}};OOo.extend(OOo,{appendWaypoint:function(d){var c=OOo.$(d);if(!!c){if(OOo.Browser.isMobile){var e=0;if("ontouchstart" in window){OOo.addEventListener(c,"touchstart",function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation();}else{a.returnValue=false;}e++;},false);OOo.addEventListener(c,"touchend",function(b){var a=b||window.event;if(e>=2){OOo.Waypoint.getWaypoint();e=0;}},false);}else{OOo.addEventListener(c,"click",function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation();}else{a.returnValue=false;}OOo.Waypoint.getWaypoint();},false);}}else{OOo.addEventListener(c,"click",function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation();}else{a.returnValue=false;}OOo.Waypoint.getWaypoint();},false);OOo.addEventListener(c,"keydown",function(b){var a=b||window.event;if(a.preventDefault&&a.stopPropagation){a.preventDefault();a.stopPropagation();}else{a.returnValue=false;}if(a.keyCode!==13){return;}OOo.Waypoint.getWaypoint();},false);}}}});return OOo;}));
var olabInterval=setInterval(function(){if(jQuery("#opinionlab-data").length>0){clearInterval(olabInterval);var a=window.location.hostname;(function(b,e){var d=jQuery("#opinionlab-data").data("basepath");var c=function(){if(a.indexOf("owner.ford.com")>=0){e.oo_feedback=new e.Ocode({});e.oo_launch=function(i,h){var g=i||window.event;e[h].show(g);};var f=document.getElementById("oo-feedback");f.addEventListener("click",function(g){OOo.oo_launch(g,"oo_feedback");},false);}else{e.oo_waypoint=new e.Waypoint({pathToAssets:(d.indexOf("http")>=0)?d+"/ngtemplates/ngassets/com/forddirect/ng/opinionlab/":d,companySlogan:"Give us feedback",waypointMarkup:(d.indexOf("http")>=0)?"oo_waypoint.html":"oo_waypoint.htm",companyLogo:(d.indexOf("http")>=0)?d+"/ngtemplates/ngassets/com/forddirect/ng/opinionlab/waypoint_logo.png":d+"waypoint_logo.png",categories:{Website:{oCode:{referrerRewrite:{searchPattern:/:\/\/.*/g,replacePattern:"://www.ford.com/wpwebsite"}},icon:"icon_web.png"},Dealer:{oCode:{referrerRewrite:{searchPattern:/:\/\/.*/g,replacePattern:"://www.ford.com/wpdealer"}},icon:"icon_product.png"},Owner:{oCode:{referrerRewrite:{searchPattern:/:\/\/.*/g,replacePattern:"://www.ford.com/wpowner"}},icon:"icon_product.png"},Credit_or_Payment:{oCode:{referrerRewrite:{searchPattern:/:\/\/.*/g,replacePattern:"://www.ford.com/wpcreditorpayment"}},icon:"icon_store.png"},Other:{oCode:{referrerRewrite:{searchPattern:/:\/\/.*/g,replacePattern:"://www.ford.com/wpother"}},icon:"icon_product.png"}},disableMobile:false,disableNoniOS:false,wpmarkup:"<div id='oo_waypoint_prompt' role='dialogue' aria-describedby='oo_waypoint_message'><div id='oo_company_logo'></div><div id='oo_waypoint_content'><p id='oo_waypoint_message'>Select a category</p><p id='waypoint_icons'></p><p id='ol_brand_logo'><a href='http://www.opinionlab.com/company/' target='_blank' aria-label='Powered by OpinionLab. This will open a new window'></a></p></div><a id='oo_close_prompt' href='#' aria-label='Close dialog'><div class='screen_reader'>Close dialogue</div><span aria-hidden='true'>&#10006;</span></a></div><!--[if IE 8]><style>/* IE 8 does not support box-shadow */#oo_waypoint_prompt #oo_waypoint_content { width: 400px; padding: 40px 49px 20px 49px; border: 1px solid #ccc; }</style><![endif]-->"});e.appendWaypoint("oo-feedback");}};e.addEventListener(b,"load",c,false);})(window,OOo);}},100);
var pathToAssets="onlineopinionv5/",bar_gif=pathToAssets+"oo_bar_icon.gif",float_gif=pathToAssets+"oo_float_icon.gif",loading_gif=pathToAssets+"oo_loading.gif",tab_1_gif=pathToAssets+"oo_tab_icon_1.gif",tab_gif=pathToAssets+"oo_tab_icon.gif",tab_png=pathToAssets+"oo_tab.png";var css=document.createElement("style");css.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(css);cssText="#oo_company_logo img { max-height: 100%; max-width: 100%; height: auto; width: auto\9; /* ie8 */ }";cssText+="\n#oo_feedback_fl_spacer { display: block; height: 1px; position: absolute; top: 0; width: 100px; }";cssText+="\n.oo_feedback_float { width: 100px; height: 50px; overflow: hidden; font: 12px Tahoma, Arial, Helvetica, sans-serif; text-align: center; color: #252525; cursor: pointer; z-index: 999997; position: fixed; bottom: 5px; border: 1px solid #cccccc; border-radius: 9px; -moz-border-radius: 9px; -webkit-border-radius: 9px; right: 10px; -webkit-transition: -webkit-transform 0.3s ease; }";cssText+="\n.oo_feedback_float .screen_reader { position: absolute; clip: rect(1px 1px 1px 1px); /* for Internet Explorer */ clip: rect(1px, 1px, 1px, 1px); padding: 0; border: 0; height: 1px; width: 1px; overflow: hidden; }";cssText+="\n.oo_feedback_float .olUp { width: 100%; height: 100%; background: url("+float_gif+") center 10px no-repeat; text-align: center; padding: 31px 0 5px 0; position: relative; z-index: 2; filter: alpha(opacity=100); opacity: 1; transition: opacity .5s; -moz-transition: opacity .5s; -webkit-transition: opacity .5s; -o-transition: opacity .5s; }";cssText+="\n.oo_feedback_float .olUp img { margin-bottom: 5px; }";cssText+="\n.oo_feedback_float .oo_transparent { display: block; background: white; position: absolute; top: 0; left: 0; height: 100%; width: 100%; z-index: 1; opacity: 0.8; filter: alpha(opacity=80); border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px; }";cssText+="\n.oo_feedback_float:hover .oo_transparent { opacity: 1.0; filter: alpha(opacity=100); }";cssText+="\n.oo_feedback_float:hover .olUp { display: block; opacity: 0; filter: alpha(opacity=0); }";cssText+="\n.oo_feedback_float .fbText { display: block; }";cssText+="\n.oo_feedback_float .olOver { display: block; height: 100%; width: 100%; position: absolute; top: 0; left: 0; min-height: 50px; z-index: 2; opacity: 0; filter: alpha(opacity=0); transition: opacity .5s; -moz-transition: opacity .5s; -webkit-transition: opacity .5s; -o-transition: opacity .5s; }";cssText+="\n.oo_feedback_float .olOver span { display: block; padding: 10px 5px; }";cssText+="\n.oo_feedback_float:hover .olOver { opacity: 1.0; filter: alpha(opacity=100); top: 0; }";cssText+="\n.oo_cc_wrapper { left: 0; padding: 0; position: fixed; text-align: center; top: 25px; width: 100%; z-index: 999999; }";cssText+="\n.oo_cc_wrapper .screen_reader { position: absolute; clip: rect(1px 1px 1px 1px); /* for Internet Explorer */ clip: rect(1px, 1px, 1px, 1px); padding: 0; border: 0; height: 1px; width: 1px; overflow: hidden; }";cssText+="\n.oo_cc_wrapper span { width: 100%; height: 100%; position: absolute; left: 0; top: 0; z-index: 1; }";cssText+="\n.oo_cc_wrapper .iwrapper { background-color: white; margin: 0 auto; position: relative; width: 535px; z-index: 2; box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); -moz-box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); -webkit-box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); }";cssText+="\n.oo_cc_wrapper iframe { position: relative; border: none; width: 100%; z-index: 4; }";cssText+="\n.oo_cc_wrapper .oo_cc_close { position: absolute; display: block; right: 20px; top: 5px; font: 1em/1.5em 'HelveticaNeue-Medium', Helvetica, Arial, sans-serif; text-align: center; z-index: 5; color: black; text-decoration: none; cursor: pointer; }";cssText+="\n#oo_bar { padding: 10px 35px; cursor: pointer; color: white; border-top: 1px solid white; background-color: black; bottom: 0; display: block; font: 16px 'HelveticaNeue-Medium', Helvetica, Arial, sans-serif; left: 0; text-decoration: none; line-height: 16px; position: fixed; text-align: left; width: 100%; z-index: 999997; box-shadow: rgba(0, 0, 0, 0.5) 0px -1px 2px; -moz-box-shadow: rgba(0, 0, 0, 0.5) 0px -1px 2px; -webkit-box-shadow: rgba(0, 0, 0, 0.5) 0px -1px 2px; }";cssText+="\n#oo_bar span.icon { background-image: url("+bar_gif+"); background-repeat: no-repeat; position: absolute; left: 8px; top: 9px; width: 19px; height: 17px; }";cssText+="\n#oo_bar .screen_reader { position: absolute; clip: rect(1px 1px 1px 1px); /* for Internet Explorer */ clip: rect(1px, 1px, 1px, 1px); padding: 0; border: 0; height: 1px; width: 1px; overflow: hidden; }";cssText+="\n#oo_bar:focus { outline: 3px solid #51ace9; }";cssText+="\n.oo_bar { padding-bottom: 37px; }";cssText+="\n#oo_tab { background-color: #ffffff; border: 1px solid #cccccc; display: block; position: fixed; top: 40%; padding: 55px 0px 55px 0px; width: 35px; z-index: 999995; cursor: pointer; }";cssText+="\n#oo_tab span { bottom: 15px; display: block; background: url("+tab_gif+") no-repeat; height: 9px; position: absolute; width: 9px; }";cssText+="\n#oo_tab div { background-image: url("+tab_png+"); background-repeat: no-repeat; position: absolute; display: block; height: 100%; left: 0; top: 0; width: 100%; }";cssText+="\n#oo_tab.wcag a { background: url("+tab_gif+") no-repeat; background-repeat: no-repeat; background-position: center bottom; border: none; outline: none; position: absolute; display: block; bottom: 14px; left: -6px; top: 0; width: 100%; }";cssText+="\n#oo_tab.wcag img { border: none; outline: none; display: block; position: absolute; left: -6px; top: -10px; }";cssText+="\n#oo_tab .screen_reader { position: absolute; clip: rect(1px 1px 1px 1px); /* for Internet Explorer */ clip: rect(1px, 1px, 1px, 1px); padding: 0; border: 0; height: 1px; width: 1px; overflow: hidden; }";cssText+="\n.oo_tab_left { left: -13px; border-radius: 0px 9px 9px 0px; -moz-border-radius: 0px 9px 9px 0px; -webkit-border-radius: 0px 9px 9px 0px; transition: left .5s; -moz-transition: left .5s; -webkit-transition: left .5s; -o-transition: left .5s; background-image: -webkit-gradient(linear, 0% 100%, 0% 0%, from(#eeeeee), to(#ffffff)); background-image: -webkit-linear-gradient(left, #eeeeee, #ffffff); background-image: -moz-linear-gradient(left, #eeeeee, #ffffff); background-image: -ms-linear-gradient(left, #eeeeee, #ffffff); background-image: -o-linear-gradient(left, #eeeeee, #ffffff); background-image: linear-gradient(left, #eeeeee, #ffffff); }";cssText+="\n.oo_tab_left span { right: 6px; }";cssText+="\n.oo_tab_left div { background-position: 6px -10px; }";cssText+="\n.oo_tab_left:hover { left: -5px; }";cssText+="\n.oo_tab_right { right: -13px; border-radius: 9px 0px 0px 9px; -moz-border-radius: 9px 0px 0px 9px; -webkit-border-radius: 9px 0px 0px 9px; transition: right .5s; -moz-transition: right .5s; -webkit-transition: right .5s; -o-transition: right .5s; background-image: -webkit-gradient(linear, 0% 100%, 0% 0%, from(#ffffff), to(#eeeeee)); background-image: -webkit-linear-gradient(left, #ffffff, #eeeeee); background-image: -moz-linear-gradient(left, #ffffff, #eeeeee); background-image: -ms-linear-gradient(left, #ffffff, #eeeeee); background-image: -o-linear-gradient(left, #ffffff, #eeeeee); background-image: linear-gradient(left, #ffffff, #eeeeee); }";cssText+="\n.oo_tab_right span { left: 7px; }";cssText+="\n.oo_tab_right div { background-position: -6px -10px; }";cssText+="\n.oo_tab_right:hover { right: -5px; }";cssText+="\n#oo_tab_1 { background-color: black; border: 1px solid #ffffff; display: block; position: fixed; top: 40%; padding: 10px 0px 10px 0px; width: 124px; z-index: 999995; cursor: pointer; text-decoration: none; text-align: left; font-family: 'HelveticaNeue-Medium', Helvetica, Arial, sans-serif; line-height: 16px; font-size: 16px; color: #fff; }";cssText+="\n#oo_tab_1:focus { outline: 3px solid #51ace9; }";cssText+="\n#oo_tab_1 span.screen_reader { position: absolute; clip: rect(1px 1px 1px 1px); /* for Internet Explorer */ clip: rect(1px, 1px, 1px, 1px); padding: 0; border: 0; height: 1px; width: 1px; overflow: hidden; }";cssText+="\n#oo_tab_1.oo_tab_right_1 { right: -9px; transition: right 1.5s; -moz-transition: right 1.5s; -webkit-transition: right 1.5s; padding: 10px 0px 10px 35px; box-shadow: rgba(0, 0, 0, 0.5) 1px 1px 2px; -moz-box-shadow: rgba(0, 0, 0, 0.5) 1px 1px 2px; -webkit-box-shadow: rgba(0, 0, 0, 0.5) 1px 1px 2px; width: 89px; }";cssText+="\n#oo_tab_1.oo_tab_right_1 span.icon { background-image: url("+tab_1_gif+"); background-repeat: no-repeat; position: absolute; left: 8px; top: 9px; width: 19px; height: 17px; }";cssText+="\n#oo_tab_1.oo_tab_right_1.small { right: -90px; }";cssText+="\n#oo_tab_1.oo_tab_right_1.small:hover { right: -9px; }";cssText+="\n#oo_tab_1.oo_tab_left_1 { left: -9px; transition: left 1.5s; -moz-transition: left 1.5s; -webkit-transition: left 1.5s; padding: 10px 0px 10px 15px; box-shadow: rgba(0, 0, 0, 0.5) -1px 1px 2px; -moz-box-shadow: rgba(0, 0, 0, 0.5) -1px 1px 2px; -webkit-box-shadow: rgba(0, 0, 0, 0.5) -1px 1px 2px; width: 109px; }";cssText+="\n#oo_tab_1.oo_tab_left_1 span.icon { background-image: url("+tab_1_gif+"); background-repeat: no-repeat; position: absolute; right: 8px; top: 9px; width: 19px; height: 17px; }";cssText+="\n#oo_tab_1.oo_tab_left_1.small { left: -90px; }";cssText+="\n#oo_tab_1.oo_tab_left_1.small:hover { left: -9px; }";cssText+="\n#oo_container { position: fixed; height: 100%; width: 100%; top: 0; left: 0; z-index: 999999; }";cssText+="\n#oo_invitation_prompt { background: #fff; box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); -moz-box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); -webkit-box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); margin: 5% auto; text-align: left; position: relative; width: 500px; z-index: 999999; }";cssText+="\n#oo_invitation_prompt #oo_company_logo { width: 100%; height: 120px; background: black; }";cssText+="\n#oo_invitation_prompt #oo_company_logo img { height: 100%; }";cssText+="\n#oo_invitation_prompt #oo_invite_content { width: 80%; padding: 40px 10% 20px 10%; box-shadow: inset 0px 0px 0px 1px #ccc; -webkit-box-shadow: inset 0px 0px 0px 1px #ccc; -moz-box-shadow: inset 0px 0px 0px 1px #ccc; }";cssText+="\n#oo_invitation_prompt #oo_invite_content p { color: black; font: 1em/1.5em 'HelveticaNeue-Medium', Helvetica, Arial, sans-serif; margin: 0; padding: 0 0 20px 0; }";cssText+="\n#oo_invitation_prompt #oo_invite_content p.prompt_button a { text-align: center; color: white; text-decoration: none; font-size: 1.5em; line-height: 1.2em; padding: 12px 0 13px 0; display: block; height: 25px; }";cssText+="\n#oo_invitation_prompt #oo_invite_content a { cursor: pointer; }";cssText+="\n#oo_invitation_prompt #oo_invite_content a:focus { outline: 3px solid #51ace9; }";cssText+="\n#oo_invitation_prompt #oo_invite_content a#oo_launch_prompt { background: #2d96CD; }";cssText+="\n#oo_invitation_prompt #oo_invite_content a#oo_no_thanks { background: #707070; }";cssText+="\n#oo_invitation_prompt #oo_invite_content #ol_brand_logo { text-align: center; border-top: 1px solid #ccc; line-height: 1.5em; margin: 20px 0 0 0; padding: 20px 0 0 0; }";cssText+="\n#oo_invitation_prompt #oo_invite_content #ol_brand_logo img { height: 25px; width: 146px; border: 0px; }";cssText+="\n#oo_invitation_prompt #oo_invite_content #ol_brand_logo a { display: block; height: 25px; }";cssText+="\n#oo_invitation_prompt #oo_close_prompt { position: absolute; display: block; right: 13px; top: 13px; line-height: 1em; font-size: 1em; color: white; text-decoration: none; }";cssText+="\n#oo_invitation_prompt #oo_close_prompt:focus { outline: none; }";cssText+="\n#oo_invitation_prompt #oo_close_prompt:focus span { outline: 3px solid #51ace9; }";cssText+="\n#oo_invitation_prompt .screen_reader { position: absolute; clip: rect(1px 1px 1px 1px); /* for Internet Explorer */ clip: rect(1px, 1px, 1px, 1px); padding: 0; border: 0; height: 1px; width: 1px; overflow: hidden; }";cssText+="\n@media only screen and (max-device-width: 480px), screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) { #oo_invitation_prompt { width: 90%; } #oo_invitation_prompt #oo_company_logo { height: 80px; } }";cssText+="\n@media only screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2), screen and (device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2) { #oo_invitation_prompt { width: 90%; height: 90%; overflow-y: scroll; overflow-x: hidden; } #oo_invitation_prompt #oo_company_logo { height: 80px; } #oo_invitation_prompt #oo_invite_content { padding: 20px 10% 20px 10%; } #oo_invitation_prompt #oo_invite_content #ol_brand_logo { margin: 0 0 0 0; } }";cssText+="\n@media screen and (device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2) { #oo_invitation_prompt #oo_close_prompt { right: -70px; } }";cssText+="\n#oo_waypoint_container { position: fixed; height: 100%; width: 100%; top: 0; left: 0; z-index: 999999; }";cssText+="\n#oo_waypoint_prompt { background: #fff; box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); -moz-box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); -webkit-box-shadow: 0px 1px 3px 0px rgba(102, 102, 102, 0.3); margin: 5% auto; text-align: left; position: relative; width: 500px; z-index: 999999; }";cssText+="\n#oo_waypoint_prompt #oo_company_logo { width: 100%; height: 120px; background: black; }";cssText+="\n#oo_waypoint_prompt #oo_company_logo img { height: 100%; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content { width: 80%; padding: 30px 10% 20px 10%; box-shadow: inset 0px 0px 0px 1px #ccc; -webkit-box-shadow: inset 0px 0px 0px 1px #ccc; -moz-box-shadow: inset 0px 0px 0px 1px #ccc; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content a { cursor: pointer; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content a:focus { outline: 3px solid #51ace9; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content p { color: black; font: 1em/1.5em 'HelveticaNeue-Medium', Helvetica, Arial, sans-serif; margin: 0; padding: 0 0 20px 0; text-align: center; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content p#oo_waypoint_message { font-size: 1.2em; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content a.waypoint_icon { cursor: pointer; text-decoration: none; font-size: 1.5em; line-height: 1.2em; padding: 12px 0 13px 0; display: block; height: 25px; color: white; margin-bottom: 20px; background-color: #2d96CD; text-align: center; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content a.waypoint_icon.last { margin-bottom: 0; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content #ol_brand_logo { border-top: 1px solid #ccc; line-height: 1.5em; margin: 10px 0 0 0; padding: 20px 0 0 0; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content #ol_brand_logo img { height: 25px; width: 146px; border: 0px; }";cssText+="\n#oo_waypoint_prompt #oo_waypoint_content #ol_brand_logo a { display: block; height: 25px; }";cssText+="\n#oo_waypoint_prompt #oo_close_prompt { position: absolute; display: block; right: 13px; top: 13px; line-height: 1em; font-size: 1em; color: white; text-decoration: none; }";cssText+="\n#oo_waypoint_prompt #oo_close_prompt:focus { outline: none; }";cssText+="\n#oo_waypoint_prompt #oo_close_prompt:focus span { outline: 3px solid #51ace9; }";cssText+="\n#oo_waypoint_prompt .screen_reader { position: absolute; clip: rect(1px 1px 1px 1px); /* for Internet Explorer */ clip: rect(1px, 1px, 1px, 1px); padding: 0; border: 0; height: 1px; width: 1px; overflow: hidden; }";cssText+="\n@media only screen and (max-device-width: 480px), screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) { #oo_waypoint_prompt { width: 90%; } #oo_waypoint_prompt #oo_company_logo { height: 80px; } }";cssText+="\n@media only screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2), screen and (device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2) { #oo_waypoint_prompt { width: 90%; height: 90%; overflow-y: scroll; overflow-x: hidden; } #oo_waypoint_prompt #oo_company_logo { height: 80px; } #oo_waypoint_prompt #oo_waypoint_content { padding: 20px 10% 20px 10%; } #oo_waypoint_prompt #oo_waypoint_content #ol_brand_logo { margin: 0 0 0 0; } }";cssText+="\n@media screen and (device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2) { #oo_waypoint_prompt #oo_close_prompt { right: -70px; } #oo_overlay, #oo_invitation_overlay, #oo_waypoint_overlay { background: white url("+loading_gif+") 50% 80px no-repeat; display: block; height: 1000%; left: 0; position: fixed; top: 0; width: 100%; z-index: 999998; opacity: 0.5; filter: alpha(opacity=50);} #oo_overlay.no_loading, #oo_invitation_overlay.no_loading, #oo_waypoint_overlay.no_loading { background: white; opacity: 0.5; filter: alpha(opacity=50); } }";cssText+="\n@media print { #oo_bar, .oo_feedback_float, #oo_tab { display: none; } }";if(navigator.appName&&navigator.appName=="Microsoft Internet Explorer"){css.styleSheet.cssText=cssText;}else{css.innerHTML=cssText;}
ngbs.widget("disclaimers",function(d,e){var c=new OOo.Ocode({});jQuery(".disclaimers").on("click","#opinionlab a",function(h){h.stopPropagation();ngbs.metrics.click("opinion-lab");});jQuery('[rel="site-feedback"]').on("click",function(h){if(window.location.hostname.indexOf("owner.ford.com")>=0){OOo.oo_feedback.show(h||window.event);}else{if(typeof OOo.Waypoint!=="undefined"){OOo.Waypoint.getWaypoint();}}});var b=function(){var h="ui: rad: ";if(window.screen.width>1280){h+="pc";}else{h+="tablet";}return h;};var a=function(){var h=null;if(typeof __params.year!=="undefined"&&__params.year!==""){h=__params.year;}return h;};var f=function(){var h=__params.make;var i=__params.baseURL;if(typeof(h)=="undefined"){if(i.indexOf("lincoln")>=0){h="lincoln";}else{h="ford";}}return h;};var g=function(){var h;if(typeof _widgets!=="undefined"&&typeof _widgets.context!=="undefined"&&typeof _widgets.context.SelectedContext!=="undefined"){h=_widgets.context.SelectedContext.get("MetricsName");if(typeof(h)=="string"){h=h.toLowerCase();var i=f();i=i.toLowerCase();h=(h.indexOf(i)===-1?i+" "+h:h);}else{if(__params.metricsname){h=f().toLowercase()+" "+__params.metricsname;}}}else{h=null;}return h;};ngbs.metrics.config({click:{"opinion-lab":{pe:"o",pev2:"fv:opinion lab",channel:true,hier1:true,eVar11:true,eVar12:a(),eVar16:g(),eVar54:b(),prop5:"opinion lab",prop11:true,prop12:a(),prop16:g(),prop54:b(),}}});});
ngbs.widget("disclaimers",function(d,a){function b(){var h=this,j=jQuery(document).find(".ng-widget.disclaimers#disclaimers"),f=0,g=0,k=0,i=navigator.userAgent,e=(i.match(/Android|iPhone|iPod|iPad/i))?"touchstart":"click";this.init=function(){var l="50%";j.css("left","-9999px");h.open();j.css("visibility","hidden");jQuery("#screen_flip_disclaimer").css("visibility","hidden");window.setTimeout(function(){h.addScrollBar();h.close();j.css("left",l);j.css("visibility","visible");jQuery("#screen_flip_disclaimer").css("visibility","visible");},200);h.bind();};this.bind=function(){jQuery(document.body).on(e,".globalDisclaimerLink",h.globalLinkHandler);j.find(".close").on(e,function(m,l){m.stopPropagation();h.close();});d.listen(document.body,"open-flips",function(m,l){h.open();h.selectDisclaimer(l.number);});d.listen(document,"close-dislaimers",function(){h.close();});jQuery("#view-disclaimers").on(e,function(){h.open();h.clearSelection();});d.listen(document.body,"attach-global-disclaimer-handler",function(m,l){jQuery(l.element).on(e,h.globalLinkHandler);});};this.close=function(m){var l=(window.attachEvent&&!window.addEventListener);if(l&&jQuery(".view-certifiedpreowned").length!==0){jQuery(".view-certifiedpreowned").css("overflow","");}if(typeof m==="undefined"){window.scrollTo(0,k);}jQuery("#view-container #view").css("height","");jQuery("#screen_flip_disclaimer").remove();if(jQuery("#view").hasClass("min-height")){jQuery("#view").removeClass("min-height");}j.hide();if(typeof m!=="undefined"){m.apply();}};this.isVisible=function(){return j.is(":visible");};this.globalLinkHandler=function(m){m.stopPropagation();var l=parseInt(jQuery(m.target).html(),10);h.open();h.selectDisclaimer(l);};this.open=function(){var p=false;if(/Android|iPhone|iPod|iPad/i.test(navigator.userAgent)){p=window.matchMedia("(orientation: portrait)").matches;}d.send(document,"close-conciergediv");var l=(window.location.href.indexOf("support")>-1);if(l){this.openInSupportPages();}else{var r=(window.location.href.indexOf("blacklabel")>-1),o=(window.attachEvent&&!window.addEventListener);d.send(document.body,"close-flips-global-nav");k=jQuery("html").scrollTop();if(k===0||k===""){k=jQuery("body").scrollTop();}if(o&&jQuery(".view-certifiedpreowned").length!==0){jQuery(".view-certifiedpreowned").css("overflow","hidden");}window.scrollTo(0,150);jQuery("#screen_flip_disclaimer").remove();if(r&&jQuery("#view-container").length===0){jQuery("section.site-bounds").append("<div class='screen' style='height:100%;' id='screen_flip_disclaimer'></div>");}else{jQuery("#view-container").append("<div class='screen' style='height:100%;' id='screen_flip_disclaimer'></div>");}var s=jQuery("#view-container #view").outerHeight();if(parseInt(s,0)<850){jQuery("#view-container #view").height("1000");jQuery("#screen_flip_disclaimer").height("1000");}if(jQuery("body").hasClass("skin-ford")){if(p&&jQuery(".view-newlocateadealer").length!==0){jQuery("#view").addClass("min-height");}jQuery("#screen_flip_disclaimer").height(jQuery("#view").outerHeight());if(jQuery("#page").hasClass("view-nameplate-overview ")){if(jQuery("body").hasClass("skin-trucks-v2")||jQuery("body").hasClass("skin-commtrucks-v2")||jQuery("body").hasClass("skin-nameplate-v2")){jQuery("#screen_flip_disclaimer").height(jQuery("#view").outerHeight());}else{jQuery("#screen_flip_disclaimer").height(jQuery("#view-bd").outerHeight()+jQuery("#view-bd").offset().top);}}}if(jQuery("body").hasClass("skin-lincoln")){var m=jQuery("#view-hd-line").outerHeight();var n=jQuery("#view-hd-line").height();var t=jQuery("body").outerHeight()-jQuery(".global-wrap-header").outerHeight()-jQuery(".global-wrap-footer").outerHeight();t=t+m;if(r&&jQuery("#view-container").length===0){var q=jQuery("#desktop-header-wrapper").height(),u=jQuery(".linksFooter").height();t=t-q-u;jQuery("#screen_flip_disclaimer").css("margin-top",q);jQuery("#screen_flip_disclaimer").height(t);}else{if(jQuery(".cpoContent").length>0){jQuery("#screen_flip_disclaimer").height(jQuery(".cpoContent").outerHeight()+jQuery("#header").outerHeight());}else{if(jQuery("#comparePage").length>0){jQuery("#screen_flip_disclaimer").css({height:"100%","z-index":999});jQuery(".ng-widget.disclaimers").css("z-index",999);}else{jQuery("#screen_flip_disclaimer").css("margin-top",-m);jQuery("#screen_flip_disclaimer").height(t);}}}}if(jQuery("#page").width()>jQuery("#view-container").width()){jQuery("#screen_flip_disclaimer").width(jQuery("#page").width());}}j.show();this.addScrollBar=function(){d.send(document.body,"scrollbar-add",{element:j.find(".disclaimersList")});};};this.openInSupportPages=function(){d.send(document.body,"close-flips-global-nav");k=jQuery("html").scrollTop();if(k===0||k===""){k=jQuery("body").scrollTop();}window.scrollTo(0,150);jQuery("#screen_flip_disclaimer").remove();jQuery("body").append("<div class='screen' style='height:100%;' id='screen_flip_disclaimer'></div>");if(jQuery("#fls-view-container").length){var l=jQuery("#fls-view-container").offset().top-jQuery("#header").outerHeight();jQuery("#screen_flip_disclaimer").height(l);if(parseInt(l,0)<850){jQuery(".fls-content").height("1000");jQuery("#screen_flip_disclaimer").height("1000");}}jQuery("#screen_flip_disclaimer").css("margin-top",jQuery("#header").outerHeight());};this.setScrollerDimentions=function(){g=j.find(".scroller-track").height()-j.find(".scroller .arrow").height()*2;f=j.find(".scroller-container").height()-j.find(".disclaimersList").height();};this.removeScrollBar=function(){d.send(document.body,"scrollbar-destroy",{element:j.find(".disclaimersList")});g=f=null;};this.clearSelection=function(){j.find(".disclaimer").removeClass("selected");jQuery(".ng-widget.disclaimers .scroller-container").css("top",0);jQuery(".ng-widget.disclaimers .scroller-handle").css("top",0);};this.selectDisclaimer=function(s){var q,n=j.find("#globalDisclaimer"+s);h.clearSelection();if(!isNaN(s)){if(n!==null){n.addClass("selected");q=n.position().top;var l=/ipad/i.test(navigator.userAgent.toLowerCase());var o=/android/i.test(navigator.userAgent.toLowerCase());if(l||o){jQuery(".disclaimersList .scroller-container").animate({top:-q},0);}else{var m=jQuery(".ng-widget.disclaimers .scroller-container").css("height");var r=jQuery(".ng-widget.disclaimers  .scroller-track").css("height");jQuery(".ng-widget.disclaimers .scroller-container").css("top",-q);var p=((q/parseInt(m,10))*parseInt(r,10));jQuery(".ng-widget.disclaimers .scroller-handle").css("top",p);}}}};return this;}var c=window.setInterval(function(){if(jQuery(a).length){ngbs.disclaimersFlip=new b();ngbs.disclaimersFlip.init();clearInterval(c);}},250);ngbs.UnitTestDisclaimersFlip=function(){var e=function(){var f=new b();return f;};return{init:e};};});
(function(){var e=YAHOO.lang,d=YAHOO.Bubbling,b=getPackageForName("com.forddirect.ng.widgets"),c=_instances,a=_widgets,f={autoplay:1,data:[{id:1,thumb:"",video:"",image:"",duration:"",description:""}]};f.current=f.data[0].id;b.VideoPlayer=function(h,j){var g={},i=function(n,o){var m=0,l=null,p=null;this.videoMetadata=n;if(n.data&&n.data.length){for(m=0;m<n.data.length;m+=1){l=n.data[m];p=l.id;if(typeof p!=="number"){l.id=m+1;g[p]=l.id;}}if(n.current){this.setCurrentVideo(n.current);}else{this.setCurrentVideo(o||n.data[0].id);}}},k=function(){var o=this.videoMetadata,l=null,m=0;try{l=c.flashFramework.thisMovie(this.widgetId);if(l&&l.eventHandler){l.eventHandler("update",o,this.jsInstanceName+".onUpdateComplete");}}catch(n){}};j=j||{};this.el=h;this.status="";this.initCompleted=false;this.jsInstanceName=j.jsInstanceName;this.widgetId=j.widgetID||"VideoPlayer";this.bgColor=j.bgColor;this.width=j.width||1200;this.height=j.height||540;this.swfPath=j.swfPath;this.wmode=j.wmode||"transparent";this.videoStarted=false;this.emit=function(n,p,q){var m=c.flashFramework.thisMovie(this.widgetId),l=false;if(m&&m.eventHandler){try{m.eventHandler(n,p,q?(this.jsInstanceName+"."+q):null);l=true;}catch(o){}}return l;};this.getFlashID=function(m){var l=g[m]||m;return l;};this.setCurrentVideo=function(m){var l=this.getFlashID(m);if(typeof l!=="number"){throw"Cannot set the current video ID to a value that was not included in the constructor to this video player. '"+m+"' is not recognized.";}this.videoMetadata.current=l;};i.apply(this,[j.videoMetadata||f,j.initialVideoID]);this.getMetadata=function(){return this.videoMetadata;};this.resetRelaunchTrigger=function(){if(this.relaunchTrigger){clearTimeout(this.relaunchTrigger);this.relaunchTrigger=null;}};this.onInitComplete=function(){this.initCompleted=true;k.call(this);};this.onUpdateComplete=function(){this.resetRelaunchTrigger();if(this.videoMetadata.autoplay){this.videoStarted=true;}};this.onUnloadComplete=function(){if(this.el){this.el.innerHTML="";}};this.onVideoStart=function(){this.videoStarted=true;};this.onVideoEnd=function(){a.context.SelectedContext.fireEvent("fullVideoViewed",{type:"fullVideoViewed",id:this.widgetId});this.videoStarted=false;};this.onVideoLoaded=function(){};this.onContextChange=function(p){var n=p[0],l=p[1],m=null,o=null;if(n&&typeof l!=="undefined"){m=l.p1;o=l.p2;if(m&&o){a.context.SelectedContext.set(m,o);}}};this.onFlashEvent=function(n){var m=n[0],l=n[1];};this.onFlashAction=function(n){var m=n[0],l=n[1];d.triggerDefaultAction(m,l);};};e.augmentProto(b.VideoPlayer,{prototype:{init:function(g){if(!this.initCompleted){if(!g){g="";}c.flashFramework.loadFlashMovie(this.el,this.widgetId,this.swfPath,this.width,this.height,this.jsInstanceName,this.bgColor,this.wmode,g);}},launchVideo:function(g){if(this.videoStarted){this.stopVideo();}this.setCurrentVideo(g);this.emit("launchVideo",{id:this.videoMetadata.current},"onUpdateComplete");},stopVideo:function(){if(this.videoStarted){this.videoStarted=false;var h={};h.dummy="";try{c.flashFramework.thisMovie(this.widgetId).eventHandler("stopVideo",h,null);}catch(g){}}},unload:function(){try{this.stopVideo();}catch(g){this.onUnloadComplete(true);}}}});}());
(function(){var a=_widgets,c,b=false;td_site.page.videoPlayer={v:{groups:{},curOn:false,playing:{},flashVersion:9,reserved:{},dateHack:0,playerOrder:["flash","html","noplayer"],htmlCodecs:{m4v:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'}},u:{getAry:function(d){return a.context.SelectedContext.get(d);},convertAll:function(h,d){var g={},f="";d=d||a.context.SelectedContext.get(h);for(f in d){if(d.hasOwnProperty(f)){g[f]=this.convertOne(h,d[f]);}}return g;},convertOne:function(d,i){var k,f,h=i.flip?i.flip.media:i,l=i.carsid,e=null,j=null,g=null;switch(d){case"model.highlights":if(typeof l!=="undefined"){k=a.context.SelectedContext.get("model.videos");f=a.context.SiteContext.get("url.media");e=k[l];if(h.videos){j=f+e.posterboardimage;g=f+e.lowbandhiresflash;return{img:j,alt:h.images.image_1.alttag,video:g,duration:e.length,posterFrame:h.videos.video_1.posterFrame};}}else{if(h.videos){return{img:h.images.image_1.size_thumb.source,alt:h.images.image_1.alttag,video:h.videos.video_1.defaultSize.source,duration:h.videos.video_1.duration,posterFrame:h.videos.video_1.posterFrame};}}return false;case"innovationTopic.highlights":if(h.videos){return{img:h.images.image_1.size_thumb.source,alt:h.images.image_1.alttag,video:h.videos.video_1.defaultSize.source,duration:h.videos.video_1.duration,posterFrame:h.videos.video_1.posterFrame};}return false;default:return{img:h.image,alt:"",video:h.video,duration:h.duration,posterFrame:h.posterFrame};}},metrics:function(n,f,d,j,k,q){function p(){if(!b){var e=__params.make.toLowerCase()==="lincoln"?"lngen2":"fvflup";ngbs.metrics.dart({u1:function(u){var i,l=window.location.pathname;switch(l){case"/benew/":i="fordescape";break;case"/electric/focuselectric/2013/":i="ford focus electric";break;default:i="";break;}return u.nameplate||i;},u2:0,u3:0,u4:0,cat:"vidcom",type:e});c=null;}b=true;}var r=[".flv",".m4v"],o=f.toLowerCase(),t,m,h;for(m=0,h=r.length;m<h;m=m+1){t=r[m];if(o.indexOf(t,f.length-t.length)!==-1){f=f.substr(0,f.length-t.length);break;}}switch(n.type){case"seeking":s.Media.stop(f,d);clearTimeout(c);c=null;break;case"pause":s.Media.stop(f,d);clearTimeout(c);c=null;break;case"seeked":if(q.playing){c=setTimeout(function(){p();},(750*j)-(1000*d));s.Media.play(f,d);}break;case"videostart":case"play":if(!q.playing){s.Media.autoTrack=false;s.Media.trackMilestones="25,50,75,100";s.Media.playerName=k;s.Media.trackWhilePlaying=true;s.Media.segmentByMilestones=true;s.Media.trackUsingContextData=true;s.Media.contextDataMapping={"a.media.name":"eVar56,prop56","a.media.segment":"eVar55","a.media.timePlayed":"event61","a.media.view":"event56","a.media.segmentView":"event62","a.media.milestones":{25:"event58",50:"event59",75:"event57",100:"event60"}};s.Media.open(f,j,k);q.playing=true;var g=__params.make.toLowerCase()==="lincoln"?"lngen2":"fvflup";ngbs.metrics.dart({u1:function(l){var e,i=window.location.pathname;switch(i){case"/urban/":e="fordescape";break;case"/electric/focuselectric/2013/":e="ford focus electric";break;default:e="";break;}return l.nameplate||e;},u2:0,u3:0,u4:0,cat:"vidst",type:g});}if(!c){c=setTimeout(function(){p();},(750*j)-(1000*d));}s.Media.play(f,d);break;case"destroyVideo":case"ended":clearTimeout(c);if(q.playing){s.Media.stop(f,d);s.Media.close(f);q.playing=false;}c=null;b=false;break;}},inish:function(d,e){this.par=e;this.name=d;}},funs:{},play:function(d){this.v.groups[d].play();},testEnabled:function(){},addNew:function(n,d,m,h,f){var j,k,g,l;d=d||this.v.playerOrder;this.v.canPlayFlash=false;if(this.v.groups[n]){this.v.groups[n].destroyVideo();}for(j=0,k=d.length;j<k;j+=1){g=d[j];if(this.funs[g]){this.v.groups[n]=new this.funs[g](h,this,this.site,n,m);if(f){this.v.groups[n].callBack=f;}if(this.v.groups[n].enabled()){break;}delete this.funs[g];this.v.groups[n]=false;}}if(!this.v.groups[n]){for(l in this.funs){if(this.funs.hasOwnProperty(l)){this.v.groups[n]=new this.funs[l](h,this,this.site,n,m);if(this.v.groups[n].enabled()){break;}this.v.groups[n]=false;}}}this.setConfigFromObject(n,{imageurl:null,videourl:null});return this.v.groups[n];},extendExisting:function(e,d,f){this.funs[e]=f||function(){d.apply(this,arguments);};if(typeof d==="string"){d=this.funs[d];this.funs[e].prototype=new d(false,this,this.site,"",{divHolder:"x"});}else{this.funs[e].prototype=d;}this.funs[e].prototype.superclass=d;return this.funs[e].prototype;},setHolder:function(d,e){this.v.groups[d].setHolder(e);},loadVideo:function(d,f,e){if(e){if(e-this.v.dateHack<500){return;}this.v.dateHack=e;}if(this.v.groups[d].playing){this.endVideo(d);}this.v.groups[d].loadVideo(f);},hideVideo:function(d){this.v.groups[d].hideVideo();},endVideo:function(d){this.v.groups[d].endVideo();},stopVideo:function(d,e){if(typeof d==="string"){d=this.v.groups[d];}if(d&&d.stopVideo){if(this.v.curOn&&d===this.v.curOn){this.v.curOn=false;}d.stopVideo(e);}},destroyVideo:function(e){var d=this.v.groups[e];if(d&&d.destroyVideo){if(this.v.curOn&&d===this.v.curOn){this.v.curOn=false;}d.destroyVideo();}},playerReady:function(d){if(this.v.groups[d].playerReady){this.v.groups[d].playerReady(d);}},addPlayList:function(d,e){if(this.v.groups[d].addPlayList){this.v.groups[d].addPlayList(e);}},create:function(d){if(typeof d==="string"){d=this.v.groups[d];}if(!this.v.curOn||(this.v.curOn&&this.v.curOn!==d)){if((d.bOnlyOne&&this.v.curOn)||(this.v.curOn&&this.v.curOn.bOnlyOne)){this.stopVideo(this.v.curOn,true);}this.v.curOn=d;d.create();}},cueVideo:function(d,e){if(this.v.groups[d].cueVideo!==null){return this.v.groups[d].cueVideo(e);}return false;},metricEvent:function(e,f,d){d="video"+d;if(f!==false){td_site.fireThoseMetrics.yo(0,0,"",d,0,1,{videoState:{j:d,k:f}});}},hasGroup:function(d){return this.v.groups[d];},check:function(h,i,f){var d=td_site.u.clone(f),g;for(g in i){if(i.hasOwnProperty(g)&&!d[g]){if(i[g]===null){h.er.push("Missing value: "+g);}else{d[g]=i[g];}}}return{log:h,params:d};},onInitComplete:function(d){},setConfig:function(d,e,f){this.v.groups[d].setConfig(e,f);},setConfigFromObject:function(d,e){this.v.groups[d].setConfigFromObject(e);},getConfig:function(d,e){return this.v.groups[d].getConfig(e);},controls:function(d,e){if(this.v.groups[d]){this.v.groups[d].controls(e);}},dispError:function(d){},inish:td_site.inish};td_site.page.videoPlayer.distroyVideo=td_site.page.videoPlayer.destroyVideo;td_site.page.videoPlayer.playVideo=td_site.page.videoPlayer.create;td_site.inish("td_site",td_site,0);}());(function(){function b(){}var a=td_site.videoPlayer.extendExisting("base",{},function(f,g,d,e,c){this._playerConfig={};this._hashReference={};if(typeof c.divHolder==="string"){this.oDivPlayer=td_site.s.id(c.divHolder);}else{this.oDivPlayer=c.divHolder;}});a.controls=b;a.play=b;a.create=b;a.endVideo=b;a.setHolder=function(c){this.oDivPlayer=this.site.s.id(c.holder);};a.addPlayList=function(f){var e=f,d,c;this._hashReference={};if(!(f instanceof Array)){f=[];for(d in e){if(e.hasOwnProperty(d)){c=f.push(e[d])-1;f[c].id=d;this._hashReference[d]=c;}}}this.playList=f;};a.convertId=function(d){if(typeof d==="string"){var c=parseInt(d,10);if(isNaN(c)){d=this._hashReference[d];}else{d=c;}}return d;};a.getVideoById=function(c){return this.playList[this.convertId(c)];};a.setCurrentVideo=function(c){this.curVideoId=this.convertId(c);this.currentVideo=this.getVideoById(c);this.setConfig("imageurl",this.currentVideo.img);this.setConfig("videourl",this.currentVideo.video);this.setConfig("autoplay","true");};a.getNext=function(){var c=this.curVideoId+1;if(c>=this.playList.length){c=0;}return this.playList[c];};a.getPrevious=function(){var c=0;if(this.curVideoId>c){c=this.curVideoId-1;}return this.playList[c];};a.loadVideo=function(c){if(this.getVideoById(c.id)){this.setCurrentVideo(c.id);if(c.bPlay){this.create();}}};a.playVideo=a.create;a.hideVideo=function(){clearTimeout(this.metricsTO);if(this.controler){this.controler.distroy(this.par,this.name,"stopVideo");}else{this.par.distroy(this.name);}};a.stopVideo=b;a.destroyVideo=b;a.setConfig=function(c,d){this._playerConfig[c]=d;};a.setConfigFromObject=function(c){td_site.u.extend(this._playerConfig,c);};a.getConfig=function(c){return this._playerConfig[c];};a.enabled=function(){return true;};}());(function(){var a=td_site.videoPlayer.extendExisting("flash","base",function(e,f,c,d,b){this.controler=e;this.par=f;this.site=c;this.name=d;this.supported=true;this.playing=false;this.error=false;this.curVideoId=0;this.holderContents="";td_site.videoPlayer.funs.base.apply(this,arguments);if(!this.par.v.reserved.flash){this.par.v.reserved.flash={canPlayFlash:null};}this.setVars("new",b);});a.metrics=function(c){var b=this;window.setTimeout(function(){if(c.isFullscreen===true){if(!b.isFullscreen){oMetricsTracker.trackMicroData("videoPlayerFullScreen");b.isFullscreen=true;}}else{if(b.isFullscreen){b.isFullscreen=false;}}if(c.event==="nextVideoRequest"){var d;for(d in td_site.page.videoPlayer.v.groups){if(td_site.page.videoPlayer.v.groups.hasOwnProperty(d)){if(td_site.page.videoPlayer.v.groups[d].callBack){td_site.page.videoPlayer.v.groups[d].callBack.fun[td_site.page.videoPlayer.v.groups[d].callBack.cb]();}}}}else{b.par.u.metrics({type:c.videoEvent},c.videoName,c.currentTime,c.duration,c.playerName,b);}},1);};a.endVideo=function(){if(this.movie&&this.movie.eventHandler){this.movie.eventHandler("destroyVideo",{dummy:""},null);}};a.setVars=function(j,c){var d={instance:this.name,script:this.par.name,type:"",er:[]},b=__params.make.toLowerCase()==="lincoln"?"/ngtemplates/ngassets/com/lincoln/ng/widgets/video/player_lincoln.swf":"/ngtemplates/ngassets/com/forddirect/ng/widgets/video-player/player_ford.swf",f={},i,h,g;if(j==="new"){d.type="new vars";f={width:593,height:348,posterWidth:590,posterHeight:332,divReplace:false,id:"highlightVideoPlayer",bOnlyOne:true,persist:false,position:"relative",player:b,posterFrame:["<div class='td_video_posterFrame' style='border:1px solid red'>","hi","</div>"],currentVideo:{img:false,alt:false,video:false,duration:false}};i=this;}h=this.par.check(d,f,c);d=h.log;c=h.params;if(!d.er.length){for(g in c){if(c.hasOwnProperty(g)){i[g]=c[g];}}if(j==="new"){this.addPlayList(c.playList);}}else{this.par.dispError(d);this.error=true;}};a.buildFlashVars=function(f,d,b,e){var c={e:f+".v.groups['"+d+"']."+b,v:this.getConfig("videourl"),i:this.getConfig("imageurl"),p:"nextgenplayer",a:"true"};return c;};a.buildFlash=function(e,g,j,h,i,b,f){var c=this.par.site.name+"."+this.par.name,d={allowScriptAccess:"always",wmode:"opaque",quality:"high",allowFullScreen:true,bgcolor:"#000000",play:true};swfobject.embedSWF(b,i,j,h,"10",null,this.buildFlashVars(c,e,g,f.id),d);};a.onInitComplete=function(b){var c={autoplay:1,current:1,data:[this.currentVideo]};};a.onUpdateComplete=function(){};a.create=function(){var b=this.oDivPlayer;if(b){b.style.display="block";if(!this.movie){this.holderContents=document.createElement("div");this.holderContents.id=this.id;b.appendChild(this.holderContents);this.buildFlash(this.name,"metrics",this.width,this.height,this.id,this.player,{id:this.curVideoId});this.movie=document.getElementById(this.id);}b.style.display="";}};a.playVideo=a.create;a.destroyVideo=function(){if(this.movie&&this.movie.eventHandler){try{this.movie.eventHandler("destroyVideo",{dummy:""},null);}catch(b){}}swfobject.removeSWF(this.id);this.movie=null;};a.pauseVideo=function(){this.movie.eventHandler("stopVideo",{dummy:""},null);};a.enabled=function(){this.testFlash();return(this.supported&&!this.error);};a.setConfig=function(b,c){if(b==="autoplay"){c=c.toString();}td_site.videoPlayer.funs.base.prototype.setConfig.call(this,b,c);};a.testFlash=function(){var c=null,b=false;try{if(typeof ActiveXObject==="undefined"){c=document.createElement("object");c.setAttribute("type","application/x-shockwave-flash");document.body.appendChild(c);b=!!c.GetVariable;document.body.removeChild(c);}else{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b=!!c.GetVariable("$version");}}catch(d){b=false;}this.supported=this.par.v.reserved.flash.canPlayFlash=b;return this.supported;};}());(function(){var a=td_site.videoPlayer.extendExisting("noplayer","base",function(e,f,c,d,b){this.controler=e;this.par=f;this.site=c;this.name=d;this.supported=true;this.error=false;td_site.videoPlayer.funs.base.apply(this,arguments);this.setVars=function(m,g){var h={instance:this.name,script:this.par.name,type:"",er:[]},i={},l,k,j;if(m==="new"){h.type="new vars";i={width:593,height:348,posterWidth:590,posterHeight:332,divReplace:"td_future",id:"highlightVideoPlayer",persist:false,position:"relative",player:document.createElement("video"),posterFrame:["<div class='td_video_posterFrame' style='border:1px solid red'>","hi","</div>"],currentVideo:{img:false,alt:false,video:false,duration:false}};l=this;}k=this.par.check(h,i,g);h=k.log;g=k.params;if(!h.er.length){for(j in g){if(g.hasOwnProperty(j)){l[j]=g[j];}}if(m==="new"){this.addPlayList(g.playList);}this.player=false;}else{this.par.dispError(h);this.error=true;}};this.setVars("new",b);});a.create=function(){if(this.player){this.destroyVideo();}if(this.currentVideo.img){this.player=document.createElement("img");this.player.src=this.currentVideo.img;this.player.width=this.posterWidth;this.player.height=this.posterHeight;this.oDivPlayer.appendChild(this.player);}};a.destroyVideo=function(){if(this.player&&this.player.parentNode){this.player.parentNode.removeChild(this.player);delete this.player;}};}());(function(){var a=td_site.videoPlayer.extendExisting("html","base",function(e,f,c,d,b){td_site.videoPlayer.funs.base.apply(this,arguments);this.controler=e;this.par=f;this.site=c;this.name=d;this.supported=true;this.error=false;this.playing=false;this.dragTO=false;this.metricsVideoName=false;this.curVideoId=0;this.fileType="";if(this.site.v.isIpad){this.ipadIntVersion=parseInt(navigator.userAgent.toLowerCase().split("cpu os ").pop(),10);}this.setVars("new",b);});a.setVars=function(b,i){var d={instance:this.name,script:this.par.name,type:"",er:[]},k={},f,j=false,g="",c,h;if(b==="new"){d.type="new vars";k={width:593,height:348,posterWidth:590,posterHeight:332,divReplace:"td_future",id:"highlightVideoPlayer",persist:false,position:"relative",player:document.createElement("video"),bibAppendElm:"body",bibDiv:false,currentVideo:{img:false,alt:false,video:false,duration:false}};f=this;}if(!k.player){this.supported=false;return false;}if(k.player.canPlayType){for(h in this.par.v.htmlCodecs){if(this.par.v.htmlCodecs.hasOwnProperty(h)){g=k.player.canPlayType(this.par.v.htmlCodecs[h]);if(g.length){j=true;this.fileType=h;if(g==="probably"){break;}}}}}if(!j){this.supported=false;return false;}c=this.par.check(d,k,i);d=c.log;i=c.params;if(!d.er.length){for(h in i){if(i.hasOwnProperty(h)){f[h]=i[h];}}if(b==="new"){this.addPlayList(i.playList);}this.player=false;}else{this.par.dispError(d);this.error=true;}};a.play=function(){this.player.play();};a.create=function(){var c=this.oDivPlayer,d,b;this.destroyVideo();if(!this.player){this.player=this.site.s.aC(c,"video");}d=new this.site.fun.event(this,this.player,{});this.site.u.addListener(this.player,["loadedmetadata","seeked","seeking","play","pause","ended"],d.run);this.player.poster=this.currentVideo.img;this.player.controls=true;this.player.autoplay=this.getConfig("autoplay");this.player.width=this.width;this.player.height=this.height;this.player.id=this.id;b=this.currentVideo.video.split(".");this.metricsVideoName=this.currentVideo.video.split("/").pop();b.pop();b.push(this.fileType);this.player.src=b.join(".");this.player.load();this.metricsTO=this.site.u.TO(this,"setVideoSource",{site:this.site,t:this},100,false);if(this.site.v.isIpad&&this.ipadIntVersion<4){clearTimeout(this.metricsTO);}};a.playVideo=a.create;a.setVideoSource=function(){if(!this.player.readyState){this.player.load();}};a.hideVideo=function(){clearTimeout(this.metricsTO);if(this.controler){this.controler.destroy(this.par,this.name,"destroyVideo");}else{this.par.destroyVideo(this.name);}};a.stopVideo=function(){this.player.paused=true;};a.destroyVideo=function(){if(this.player){this.player.src="";this.event({type:"ended"},this.player,this,{});if(this.player.parentNode){this.player.parentNode.removeChild(this.player);}this.player=false;clearTimeout(this.metricsTO);}};a.enabled=function(){return(this.supported&&!this.error);};a.event=function(f,g,c,d){var b=c.player;c.par.u.metrics(f,c.metricsVideoName,c.player.currentTime,c.player.duration,"HTML5Player",c);switch(f.type){case"error":c.setVideoSource();break;case"loadedmetadata":break;case"click":if(c.controler&&c.controler.click){c.controler.click(c.par,c.name,d);}else{if(c.par&&c.par.click){c.par.click(c.name,d);}else{c[d.action](d);}}break;}};a.controls=function(b){this.player.controls=b;};}());(function(){var a=td_site.videoPlayer.extendExisting("skinnable-html","html",function(){td_site.videoPlayer.funs.html.apply(this,arguments);this.scrubber_width=0;this.mouse_original=0;this.time_original=0;this.volume_height=0;this.cached_controls=null;this._controls={"video-controls":{play:document.createElement("div"),replay:document.createElement("div"),nextVideo:document.createElement("div"),bar:{buffered:document.createElement("div"),played:document.createElement("div"),scrubber:document.createElement("div")},time:{current:document.createElement("time"),duration:document.createElement("time")},fullscreen:document.createElement("div"),audio:{volume:{level:document.createElement("div"),grip:document.createElement("div")},mute:document.createElement("div")}}};});a.addEventsFromObject=function(b,c){var d=new b.site.fun.event(b,c["video-controls"].play,{action:"clickPlay"});b.site.u.addListener(c["video-controls"].play,["click"],d.run);b.site.u.addListener(c["video-controls"].replay,["click"],d.run);d=new b.site.fun.event(b,c["video-controls"].audio.mute,{action:"clickMute"});b.site.u.addListener(c["video-controls"].audio.mute,["click"],d.run);d=new b.site.fun.event(b,c["video-controls"].fullscreen,{action:"clickFullScreen"});b.site.u.addListener(c["video-controls"].fullscreen,["click"],d.run);b.site.u.addListener(c["video-controls"].bar.scrubber,["mousedown"],function(){b.mousedownScrubber.apply(b,arguments);});b.site.u.addListener(c["video-controls"].nextVideo,["click"],function(){b.playNext(b);});b.site.u.addListener(c["video-controls"].audio.volume.grip,["mousedown"],function(){b.mousedownVolume.apply(b,arguments);});b.site.u.addListener(c["video-controls"].audio.mute.parentNode,["mouseover"],function(){b.mouseoverMute.apply(b,arguments);});b.site.u.addListener(c["video-controls"].audio.mute.parentNode,["mouseout"],function(){b.mouseoutMute.apply(b,arguments);});if(b.volume_height===0){b.volume_height=c["video-controls"].audio.volume.grip.parentNode.offsetHeight;}c["video-controls"].audio.volume.grip.parentNode.style.display="none";c["video-controls"].audio.volume.grip.parentNode.style.height=0;};a.clickPlay=function(){if(this.player.paused){this.player.play();}else{this.player.pause();}};a.clickFullScreen=function(){};a.clickMute=function(){this.player.muted=!this.player.muted;};a.mouseoverMute=function(f){var d=this._controls["video-controls"].audio.mute.parentNode,b=f.relatedTarget,c;while(b&&b!==d){b=b.parentNode;}if(b!==d){c=this._controls["video-controls"].audio.volume.grip.parentNode;c.style.display="block";td_site.animation.stop(c).go(c,{height:this.volume_height},1000,"exponential");}};a.mouseoutMute=function(f){var d=this._controls["video-controls"].audio.mute.parentNode,b=f.relatedTarget,c;while(b&&b!==d){b=b.parentNode;}if(b!==d){c=this._controls["video-controls"].audio.volume.grip.parentNode;td_site.animation.stop(c).go(c,{height:0},1000,"exponential",function(){c.style.display="none";});}};a.mousedownScrubber=function(c){var b=this;td_site.u.addListener(document,["mousemove"],b.mousemoveScrubber,b);td_site.u.addListener(document,["mouseup"],b.mouseupScrubber,b);this.scrubber_width=this._controls["video-controls"].bar.scrubber.parentNode.offsetWidth;this.mouse_original=c.screenX;this.time_original=this.player.currentTime;this.player.pause();};a.mousemoveScrubber=function(c,b){b.player.currentTime=((c.screenX-b.mouse_original)/b.scrubber_width)*b.player.duration+b.time_original;};a.mouseupScrubber=function(c,b){td_site.u.removeListener(document,["mousemove"],b.mousemoveScrubber);td_site.u.removeListener(document,["mouseup"],b.mouseupScrubber);b.player.play();};a.mousedownVolume=function(c){var b=this;td_site.u.addListener(document,["mousemove"],b.mousemoveVolume,b);td_site.u.addListener(document,["mouseup"],b.mouseupVolume,b);this.scrubber_width=this._controls["video-controls"].audio.volume.grip.parentNode.offsetHeight;this.mouse_original=c.screenY;this.time_original=this.player.volume;};a.mousemoveVolume=function(c,b){var d=-((c.screenY-b.mouse_original)/b.scrubber_width)+b.time_original;if(d>1){b.player.volume=1;}else{if(d<0){b.player.volume=0;}else{b.player.volume=-((c.screenY-b.mouse_original)/b.scrubber_width)+b.time_original;}}};a.mouseupVolume=function(c,b){td_site.u.removeListener(document,["mousemove"],b.mousemoveVolume);td_site.u.removeListener(document,["mouseup"],b.mouseupVolume);};a.buildElementsFromObject=function(f,b,e){var c,d;for(c in e){if(e.hasOwnProperty(c)){d=td_site.u.isDOMNode(e[c])?e[c]:this.buildElementsFromObject(f+"-"+c,document.createElement("div"),e[c]);d.id=f+"-"+c;d.className=f+"-"+c+" "+c;b.appendChild(d);}}return b;};a.updateTime=function(c,b){var d=Math.floor(b%60).toString();if(d<10){d="0"+d;}this._controls["video-controls"].time[c].innerHTML=Math.floor(b/60)+":"+d;};a.destroyVideo=function(){if(this.player){this.player.src="";if(this.player.parentNode){this.player.parentNode.removeChild(this.player);}this.player=null;clearTimeout(this.metricsTO);this.destroyControls(this.name);}};a.create=function(){var c=this.oDivPlayer,d,b;this.destroyVideo();if(this.site.v.isIpad){window.scrollBy(1,0);}if(!this.player){this.player=this.site.s.aC(c,"video");if(!this.cached_controls){this.cached_controls=this.buildControls(this.name,c);this.cached_controls=this.cached_controls.getElementsByClassName("video-controls")[0];}else{c.appendChild(this.cached_controls);}}d=new this.site.fun.event(this,this.player,{});this.site.u.addListener(this.player,["timeupdate","progress","loadeddata","volumechange","loadedmetadata","seeked","seeking","play","pause","ended"],d.run);this.player.poster=this.currentVideo.img;this.player.autoplay=this.getConfig("autoplay");this.player.width=this.width;this.player.height=this.height;b=this.currentVideo.video.split(".");this.metricsVideoName=this.currentVideo.video.split("/").pop();b.pop();b.push(this.fileType);this.player.src=b.join(".");this.player.load();if(this.site.v.isIpad){window.scrollBy(-1,0);}this.metricsTO=this.site.u.TO(this,"setVideoSource",{site:this.site,t:this},100,false);if(this.site.v.isIpad&&this.ipadIntVersion<4){clearTimeout(this.metricsTO);}};a.playVideo=a.create;a.event=function(f,c,b,e){var g=0,d=0;b.par.u.metrics(f,b.metricsVideoName,c.currentTime,c.duration,"HTML5Player",b);switch(f.type){case"play":b.hideFinalControls();td_site.u.className.add(this._controls["video-controls"].play,"pause");td_site.u.className.remove(this._controls["video-controls"].play,"play");break;case"pause":td_site.u.className.add(this._controls["video-controls"].play,"play");td_site.u.className.remove(this._controls["video-controls"].play,"pause");break;case"timeupdate":b._controls["video-controls"].bar.scrubber.style.left=((c.currentTime/c.duration)*100)+"%";b._controls["video-controls"].bar.played.style.width=((c.currentTime/c.duration)*100)+"%";b.updateTime("current",c.currentTime);break;case"loadedmetadata":b.updateTime("duration",c.duration);break;case"loadeddata":case"progress":if(c.buffered&&c.buffered.length>0){g=c.buffered.start(0);d=c.buffered.end(0)-g;}b._controls["video-controls"].bar.buffered.style.left=((g/c.duration)*100)+"%";b._controls["video-controls"].bar.buffered.style.width=((d/c.duration)*100)+"%";break;case"volumechange":b._controls["video-controls"].audio.volume.grip.style.bottom=(c.volume*100)+"%";b._controls["video-controls"].audio.volume.level.style.height=(c.volume*100)+"%";if(c.muted){td_site.u.className.add(b._controls["video-controls"].audio.mute,"muted");}else{td_site.u.className.remove(b._controls["video-controls"].audio.mute,"muted");}break;case"error":b.setVideoSource();break;case"ended":b.player.pause();b.showFinalControls(b);break;case"mouseover":case"mouseout":b[e.action](e);break;case"click":if(b.controler&&b.controler.click){b.controler.click(b.par,b.name,e);}else{if(b.par&&b.par.click){b.par.click(b.name,e);}else{b[e.action](e);}}break;}};a.showFinalControls=function(){var e,d,j,b,h,g=this._controls["video-controls"].replay,c=this._controls["video-controls"].nextVideo,k="",f=jQuery("#"+this.divHolder),i=jQuery(document.createElement("div"));if(this.playList){d=this.playList.length;if(d>1){e=this.currentVideo;b=this.getNextVideo();if(b.thumb&&b.title){g.className="carousel-video-controls-replay replay";if(this.currentVideo.posterFrame){i.addClass("videoOverlay");i.css("background","url("+this.currentVideo.posterFrame+") no-repeat top left");i.css("height",f.height()+"px");i.css("width",f.width()+"px");i.html('<div class="videoOverlay-bg"></div>');f.append(i);}k+='<img src="'+b.thumb+'"/>';k+='<p><strong>Next Video</strong><span class="next-btn-title">'+b.title+"</span>";k+='<span class="next-btn-arrow"></span></p>';c.innerHTML=k;c.style.display="block";}else{g.className=g.className+" center-replay-btn";}}else{g.className=g.className+" center-replay-btn";}g.style.display="block";}};a.hideFinalControls=function(){if(jQuery(".videoOverlay").length>0){jQuery(".videoOverlay").remove();}this._controls["video-controls"].replay.style.display="none";this._controls["video-controls"].nextVideo.style.display="none";};a.getNextVideo=function(){var d,f,c,e,b;f=parseInt(this.curVideoId,10);if(f>=(this.playList.length-1)){c=0;}else{c=f+1;}b=this.playList[c];e={vid:c,thumb:b.thumb,title:b.alt,videoSrc:b.video};return e;};a.playNext=function(){var b=this.getNextVideo();this.setCurrentVideo(b.vid);this.destroyVideo();this.create();var c;for(c in td_site.page.videoPlayer.v.groups){if(td_site.page.videoPlayer.v.groups.hasOwnProperty(c)){if(td_site.page.videoPlayer.v.groups[c].callBack){td_site.page.videoPlayer.v.groups[c].callBack.fun[td_site.page.videoPlayer.v.groups[c].callBack.cb]();}}}};a.buildControls=function(d,b){var c=null;this._controls["video-controls"].spacer=document.createElement("div");this.player.controls=false;c=this.buildElementsFromObject(d,b,this._controls);this.addEventsFromObject(this,this._controls);return c;};a.destroyControls=function(){this.cached_controls.parentNode.removeChild(this.cached_controls);};a.controls=function(b){if(this.cached_controls){if(b){this.cached_controls.style.display="block";}else{this.cached_controls.style.display="none";}}};}());
ngbs.widget("video",{constructor:function(b,d){var a=this,c=jQuery,e=false;b.listen(d,"update",function(g,f){if(f.provider){if(f.provider==="Brightcove"){a.update(this,f);a.active=true;}else{if(a.active===true){td_site.brightcovePlayer.removePlayer();a.active=false;}}}});b.listen(d,"stop",function(g,f){if(a.active!==true){return;}td_site.brightcovePlayer.removePlayer();a.active=false;});},GROUP_NAME:"brightcove-widget",update:function(b,a){if(td_site.brightcovePlayer){if(typeof a.callback!=="undefined"&&typeof a.callback==="function"){td_site.brightcovePlayer.addPlayer(b,a,a.callback);}else{td_site.brightcovePlayer.addPlayer(b,a);}}else{if(typeof a.callback!=="undefined"&&typeof a.callback==="function"){td_site.brightcovePlayer={element:b,options:a,callback:a.callback};}else{td_site.brightcovePlayer={element:b,options:a};}}}});
(function(){var a=[];function b(e){if(typeof e!=="number"&&e!==""){var d=e.split(":");e=(parseInt(d[0],10)*60)+parseInt(d[1],10);}else{e=undefined;}return e;}function c(){var e,d;if(typeof(td_site.videoPlayer.data)!=="undefined"){e=td_site.videoPlayer.data;}else{e=jQuery.extend({},jQuery("video",this).eq(0).data());}this.defaultPlayerData={};for(d in e){if(e.hasOwnProperty(d)){switch(d){case"playerkey":this.defaultPlayerData.playerKey=e[d];break;case"playerid":this.defaultPlayerData.playerID=e[d];break;default:this.defaultPlayerData[d]=e[d];}}}this.player={};this.element="";this._play=false;this.mediaEvents={BEGIN:"mediaBegin",CHANGE:"mediaChange",COMPLETE:"mediaComplete",ERROR:"mediaError",PLAY:"mediaPlay",PROGRESS:"mediaProgress",SEEK:"mediaSeek",SEEK_NOTIFY:"mediaSeekNotify",STOP:"mediaStop"};this.videoData={};this.dartFired=false;this.id="myExperience";this.played=false;this.init();}c.prototype={init:function(){this.setProxyFunctions();},update:function(){},stop:function(){},loadVideo:function(){},addPlayer:function(h,f,i,k){if(typeof i!=="undefined"&&typeof i==="function"){i.call(this,jQuery(this.element));}var j={width:f.width||"593",height:f.height||"334"},e="",d='<div style="display:none"></div><object id="'+this.id+'" class="BrightcoveExperience"><param name="bgcolor" value="#1c1d1f" /><param name="width" value="{{width}}" /><param name="height" value="{{height}}" /><param name="playerID" value="{{playerID}}" /><param name="playerKey" value="{{playerKey}}" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="includeAPI" value="true" /><param name="wmode" value="transparent" /><param name="templateLoadHandler" value="td_site.brightcovePlayer.onTemplateLoaded" /><param name="templateReadyHandler" value="td_site.brightcovePlayer.onTemplateReady" /><param name="@videoPlayer" value="ref:{{videoID}}"; /><param name="htmlFallback" value="true" /><param name="showNoContentMessage" value="true" />'+(window.location.protocol==="https:"?'<param name="secureConnections" value="true" /><param name="secureHTMLConnections" value="true" />':"")+"</object>",g=jQuery(h).data();jQuery.extend(j,this.defaultPlayerData);if(g.playerID&&g.playerKey){j.playerID=g.playerID;j.playerKey=g.playerKey;}if(g.playerid&&g.playerkey){j.playerID=g.playerid;j.playerKey=g.playerkey;}j.videoID=f.src.split("/").pop();this.videoData=f;if(this.videoData.duration){this.videoData.duration=b(this.videoData.duration);}this.videoData.name=this.videoData.src.split("/").pop();if(this.videoData.width){j.width=this.videoData.width;}if(this.videoData.height){j.height=this.videoData.height;}this.dartFired=false;e=c.markup(d,j);if(jQuery(h).is("div")){h.innerHTML=e;}else{jQuery("#wowVideoPlayer .player").append(e);}brightcove.createExperiences();this.element=h;if(typeof k!=="undefined"&&typeof k==="function"){k.call(this,jQuery(this.element));}},removePlayer:function(d,e){if(typeof d!=="undefined"&&typeof d==="function"){d.call(this,jQuery(this.element));}this.onMediaClose();if(this.videoPlayer){this.clearEventHandlers();}if(this.player&&brightcove.experiences[this.player.id]!==null&&brightcove.experiences[this.player.id]!==undefined){jQuery(brightcove.experiences[this.player.id].parentNode).html("");}if(jQuery(this.element).data("placeholder")){this.element.innerHTML='<img src="'+jQuery(this.element).data("placeholder")+'"></img>';}else{jQuery(this.element).html("");}if(typeof e!=="undefined"&&typeof e==="function"){e.call(this,jQuery(this.element));}},onTemplateLoaded:function(e){this.player=brightcove.api.getExperience(e);var d=this.player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);this.experienceModule=this.player.getModule(brightcove.api.modules.APIModules.EXPERIENCE);this.videoPlayer=d||this.videoPlayer||null;this.setEventHandlers();},onTemplateReady:function(d){var e=this;if(this.videoPlayer&&s&&s.Media){s.Media.autoTrack=false;s.Media.trackMilestones="25,50,75,100";s.Media.playerName="brightcovePlayer";s.Media.trackWhilePlaying=true;s.Media.segmentByMilestones=true;s.Media.trackUsingContextData=true;s.Media.contextDataMapping={"a.media.name":"eVar56,prop56","a.media.segment":"eVar55","a.media.timePlayed":"event61","a.media.view":"event56","a.media.segmentView":"event62","a.media.milestones":{25:"event58",50:"event59",75:"event57",100:"event60"}};if(typeof this.videoData.duration==="undefined"||parseInt(this.videoData.duration,10)===0){this.videoPlayer.getCurrentVideo(function(f){var g=f.length/1000;e.videoData.duration=Math.round(g);s.Media.open(e.videoData.name,e.videoData.duration,s.Media.playerName);e.playVideo();ngbs._message_bus.listen(document,"video.playVideo",function(i,h){e.playVideo();});});}else{s.Media.open(this.videoData.name,this.videoData.duration,s.Media.playerName);this.playVideo();ngbs._message_bus.listen(document,"video.playVideo",function(g,f){e.playVideo();});}}ngbs._message_bus.send(document,"video.onTemplateReady",{event:d,elementId:e.element.id});},setProxyFunctions:function(){this.onMediaBegin=jQuery.proxy(this.eventHandlers.onMediaBegin,this);this.onMediaChange=jQuery.proxy(this.eventHandlers.onMediaChange,this);this.onMediaComplete=jQuery.proxy(this.eventHandlers.onMediaComplete,this);this.onMediaError=jQuery.proxy(this.eventHandlers.onMediaError,this);this.onMediaPlay=jQuery.proxy(this.eventHandlers.onMediaPlay,this);this.onMediaProgress=jQuery.proxy(this.eventHandlers.onMediaProgress,this);this.onMediaSeekNotify=jQuery.proxy(this.eventHandlers.onMediaSeekNotify,this);this.onMediaStop=jQuery.proxy(this.eventHandlers.onMediaStop,this);this.onMediaClose=jQuery.proxy(this.eventHandlers.onMediaClose,this);this.onTemplateReady=jQuery.proxy(this.onTemplateReady,this);this.onTemplateLoaded=jQuery.proxy(this.onTemplateLoaded,this);},setEventHandlers:function(){this.videoPlayer.addEventListener(this.mediaEvents.BEGIN,this.onMediaBegin);this.videoPlayer.addEventListener(this.mediaEvents.CHANGE,this.onMediaChange);this.videoPlayer.addEventListener(this.mediaEvents.COMPLETE,this.onMediaComplete);this.videoPlayer.addEventListener(this.mediaEvents.ERROR,this.onMediaError);this.videoPlayer.addEventListener(this.mediaEvents.PLAY,this.onMediaPlay);this.videoPlayer.addEventListener(this.mediaEvents.PROGRESS,this.onMediaProgress);this.videoPlayer.addEventListener(this.mediaEvents.SEEK_NOTIFY,this.onMediaSeekNotify);this.videoPlayer.addEventListener(this.mediaEvents.STOP,this.onMediaStop);},clearEventHandlers:function(){this.videoPlayer.removeEventListener(this.mediaEvents.BEGIN,this.onMediaBegin);this.videoPlayer.removeEventListener(this.mediaEvents.CHANGE,this.onMediaChange);this.videoPlayer.removeEventListener(this.mediaEvents.COMPLETE,this.onMediaComplete);this.videoPlayer.removeEventListener(this.mediaEvents.ERROR,this.onMediaError);this.videoPlayer.removeEventListener(this.mediaEvents.PLAY,this.onMediaPlay);this.videoPlayer.removeEventListener(this.mediaEvents.PROGRESS,this.onMediaProgress);this.videoPlayer.removeEventListener(this.mediaEvents.SEEK_NOTIFY,this.onMediaSeekNotify);this.videoPlayer.removeEventListener(this.mediaEvents.STOP,this.onMediaStop);},playVideo:function(){var d=this;this.videoPlayer.play();},metrics:function(){},fireDart:function(g){var f=__params.make.toLowerCase()==="lincoln"?"lngen2":"fvflup",d;switch(g.type){case this.mediaEvents.BEGIN:d="vidst";break;case this.mediaEvents.COMPLETE:d="vidcom";break;default:return;}ngbs.metrics.dart({u1:function(i){var e,h=window.location.pathname;switch(h){case"/benew/":e="fordescape";break;case"/electric/focuselectric/2013/":e="ford focus electric";break;default:e="";break;}return i.nameplate||e;},u2:0,u3:0,u4:0,cat:d,type:f});},fireAdlense:function(f){var d=null;if(__params.make.toLowerCase()==="lincoln"){switch(f.type){case brightcove.api.events.MediaEvent.BEGIN:d="vidst";break;case brightcove.api.events.MediaEvent.COMPLETE:d="vidcom";break;default:return;}ngbs.metrics.eff({brand:"lincoln",category:d,site:"t1"});}},eventHandlers:{onMediaBegin:function(d){if(!this.played){this.videoPlayer.getVideoPosition(function(e){if(s&&s.Media){s.Media.play(td_site.brightcovePlayer.videoData.name,e);}});}this.fireDart(d);this.fireAdlense(d);this.played=false;},onMediaChange:function(d){},onMediaComplete:function(f){var d=this;this._play=false;ngbs._message_bus.send(document,"video.onMediaComplete",{event:f,element:d.element});if(!this.dartFired){this.fireDart(f);this.dartFired=true;}this.fireAdlense(f);this.onMediaStop(f);if(s&&s.Media){s.Media.close(this.videoData.name);}},onMediaError:function(d){},onMediaPlay:function(g){var f=this.videoData,d=this;this._play=true;this.videoPlayer.getVideoPosition(function(e){if(s&&s.Media){s.Media.play(f.name,e);}});this.played=true;ngbs._message_bus.send(document,"video.onMediaPlay",{event:g,videoPlayer:this.videoPlayer,id:d.id,element:d.element});},onMediaProgress:function(f){var d=this;ngbs._message_bus.send(document,"video.onMediaProgress",{event:f,videoPlayer:this.videoPlayer,element:d.element});},onMediaSeekNotify:function(d){this.onMediaStop(d);},onMediaStop:function(g){var d=this,f=this.videoData;this._play=false;if(this.videoPlayer){this.videoPlayer.getVideoPosition(function(e){if(s&&s.Media){s.Media.stop(f.name,e);}});}ngbs._message_bus.send(document,"video.onMediaStop",{event:g,elementId:d.element.id,videoPlayer:this.videoPlayer,element:d.element});},onMediaClose:function(d){if(document.getElementById("myExperience")!==null){this.onMediaStop();}if(s&&s.Media){s.Media.close(this.videoData.name);}}}};c.markup=function(g,h){var d,f=0,e=g.match(h instanceof Array?(/\{\{\d+\}\}/g):(/\{\{\w+\}\}/g))||[];while(typeof(d=e[f++])!=="undefined"){g=g.replace(d,h[d.substr(2,d.length-4)]);}return g;};jQuery("document").ready(function(){a[0]=jQuery.getScript((window.location.protocol==="http:"?"http://admin.brightcove.com/js/BrightcoveExperiences.js":"https://sadmin.brightcove.com/js/BrightcoveExperiences.js"));jQuery.when.apply(this,a).done(function(){var e=false,d;if(td_site.brightcovePlayer){e=td_site.brightcovePlayer.element;d=td_site.brightcovePlayer.options;}td_site.brightcovePlayer=new c();if(e){td_site.brightcovePlayer.addPlayer(e,d);}brightcove.createExperiences();}).fail(function(f,e,d){});});}());
var myTemplateLoaded_VideoGallery,onTemplateReady_VideoGallery,player,modVP,modExp,modCon,moduleMetrics,fireDart;(function(){var a,b,j=true,d=false,f=false,e=false;moduleMetrics=function(){var l;if(j){l={interaction:"video play",content_subtype:"video",content_title:"video"};if(jQuery("html.fv-mobile-tdi").length>0){ngbs.metrics.click("mfv-vehicle-content-action-nameplate",l);}else{ngbs.metrics.click("fv-vehicle-content-action-nameplate",l);}j=false;}};var c=function(l){fireDart(l);};var h=function(l){fireDart(l);};var i=function(l){moduleMetrics();if(!d){a=l.media.referenceId||l.media.referenceID||"";b=l.duration;if(s&&s.Media){s.Media.open(a,b,s.Media.playerName);d=true;}}modVP.getVideoPosition(function(m){if(s&&s.Media){s.Media.play(a,m);}});e=true;};var g=function(l){modVP.getVideoPosition(function(m){if(s&&s.Media){s.Media.stop(a,m);}});};var k=function(l){moduleMetrics();if(d){if(s&&s.Media){s.Media.close(a);d=false;}}};fireDart=function(n){var m=__params.make.toLowerCase()==="lincoln"?"lngen2":"fvflup",l;switch(n.type){case brightcove.api.events.MediaEvent.BEGIN:l="vidst";break;case brightcove.api.events.MediaEvent.COMPLETE:l="vidcom";break;default:return;}ngbs.metrics.dart({u1:function(q){var o,p=window.location.pathname;switch(p){case"/benew/":o="fordescape";break;case"/electric/focuselectric/2013/":o="ford focus electric";break;default:o="";break;}return q.nameplate||o;},u2:0,u3:0,u4:0,cat:l,type:m});};myTemplateLoaded_VideoGallery=function(l){player=brightcove.api.getExperience(l);modVP=player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);modExp=player.getModule(brightcove.api.modules.APIModules.EXPERIENCE);modCon=player.getModule(brightcove.api.modules.APIModules.CONTENT);};onTemplateReady_VideoGallery=function(l){modVP.addEventListener(brightcove.api.events.MediaEvent.BEGIN,c);modVP.addEventListener(brightcove.api.events.MediaEvent.PLAY,i);modVP.addEventListener(brightcove.api.events.MediaEvent.STOP,g);modVP.addEventListener(brightcove.api.events.MediaEvent.CHANGE,k);modVP.addEventListener(brightcove.api.events.MediaEvent.COMPLETE,h);if(modVP&&s&&s.Media){s.Media.autoTrack=false;s.Media.trackMilestones="25,50,75,100";s.Media.playerName="brightcovePlayer";s.Media.trackWhilePlaying=true;s.Media.segmentByMilestones=true;s.Media.trackUsingContextData=true;s.Media.contextDataMapping={"a.media.name":"eVar56,prop56","a.media.segment":"eVar55","a.media.timePlayed":"event61","a.media.view":"event56","a.media.segmentView":"event62","a.media.milestones":{25:"event58",50:"event59",75:"event57",100:"event60"}};}};}());
(function(){ngbs.metrics.config({click:{eff_appst:{pev2:"fv",pe:"o",eff:{category:"appst"}},eff_creditst:{pev2:"fv",pe:"o",eff:{category:"creditst"}},applyCreditFooter:{pev2:"referral: exit",pe:"e",prop5:"referral: flmc: apply for credit",prop6:"flmc: apply for credit",eVar6:"flmc: apply for credit",events:["event4"],hier1:true,channel:true,prop11:true,eVar11:true,dart:{src:"690327",type:"fvflup",cat:"credapp",u1:function(a){return a.nameplate;},u6:"0"},eff:{category:"creditst"}},paymentEstimatorFooterMetric:{pev2:"referral: exit",pe:"e",channel:true,hier1:true,prop5:"referral: flmo: make a payment",eVar6:"flmo: make a payment",prop6:"flmo: make a payment",eVar11:true,prop11:true,events:["event4"]},fordCreditFooterMetric:{pev2:"referral: exit",pe:"e",channel:true,hier1:true,prop5:"referral: flmc: home",eVar6:"flmc: home",prop6:"flmc: home",eVar11:true,prop11:true,events:["event4"]}}});}());
ngbs.widget("shopping-tools-list",function(a,d){a.listen(document,"s-loaded",function(){s.linkInternalFilters=s.linkInternalFilters+",www.onlinevehiclefinancing.com";});function c(f){ngbs.metrics.click(f);}var b=jQuery("#tdi_globalNav_shoppingtools_div"),e=jQuery("#shopping-tools-list");b.find("a.apply-credit-link").attr("rel","offsite");b.find("a.apply-credit-link").on("click",function(f){c("applyCreditFooter");});b.find("a.trade-in-link").on("click",function(f){c("eff_appst");});e.find("a.apply-credit").on("click",function(f){f.stopPropagation();c("applyCreditFooter");});e.find("a.trade-in").on("click",function(f){c("eff_appst");});e.find("a.ford-credit").on("click",function(f){ngbs.metrics.click("fordCreditFooterMetric");});});
ngbs.widget("brand-footer",function(a,b){jQuery("a.warrantyAndServiceFooterLink").on("click",function(c){ngbs.metrics.click("warranty&ServiceFooterMetric");});jQuery("body").on("click","a.fordpasselementfooter",function(c){ngbs.metrics.click("fordPassMetric");});jQuery("#accessoriesFooterLink").on("click",function(c){ngbs.metrics.click("accessoriesFooterMetric");});jQuery("#fordPartsFooterLink").on("click",function(d){d.preventDefault();ngbs.metrics.click("fordPartsFooterMetric");var c=jQuery(this).data("href");setTimeout(function(){window.location=c;},30);});jQuery("#makePaymentFooterLink").on("click",function(d){d.preventDefault();ngbs.metrics.click("makePaymentFooterMetric");var c=jQuery(this).data("href");setTimeout(function(){window.location=c;},30);});});
(function(){var b=jQuery;function a(){var c="pc",d=window.screen.width;if(d>1024){c="pc";}else{if(d>568){c="tablet";}else{c="mobile";}}return c;}ngbs.metrics.config({click:{"warranty&ServiceFooterMetric":{pev2:"referral: exit",pe:"e",channel:true,hier1:true,prop5:"referral: flmo: esp",eVar6:"flmo: esp",prop6:"flmo: esp",eVar11:true,prop11:true,events:["event4"]},accessoriesFooterMetric:{pev2:"referral: exit",pe:"e",channel:true,hier1:true,eVar6:"gfa: home",eVar11:true,eVar14:"ford",eVar15:"fordvehicles.com",prop5:"referral: gfa: home",prop6:"gfa: home",prop11:true,prop14:"ford",prop15:"fordvehicles.com",events:["event4"]},fordPartsFooterMetric:{pev2:"referral: exit",pe:"e",channel:true,hier1:true,eVar6:"fpol: home",eVar11:true,prop5:"referral: fpol: home",prop6:"fpol: home",prop11:true,events:["event4"]},makePaymentFooterMetric:{pev2:"referral: exit",pe:"e",channel:true,hier1:true,prop5:"referral: flmo: make a payment",eVar6:"flmo: make a payment",prop6:"flmo: make a payment",eVar11:true,prop11:true,events:["event4"]},fordPassMetric:{pev2:"referral: exit",channel:true,hier1:true,prop5:"referral:fp:home",eVar6:"fp:home",prop6:"fp:home",eVar11:true,prop11:true,prop54:function(c){return"ui:rad:"+a();},eVar54:function(c){return"ui:rad:"+a();},events:["event4"]}}});}());
ngbs.page(function(a){var b=jQuery;if(navigator.userAgent.match(/msie/i)){b(document.body).on("change",".ngbs-select select",function(c){b(this).blur();});}});
ngbs.page(function(a){var b=jQuery;b(document.body).on("change",".ngbs-radio input",function(d){var c=b(this);if(c.is(":checked")){c.parent().addClass("checked");}else{c.parent().removeClass("checked");}});b(document.body).on("click",".ngbs-radio span, .ngbs-radio label",function(f){var c=b(this).parent().find("input"),d=b("."+b(this).parent().find("input").attr("name"));c.click();if(d.length>0){d.change();}else{if(b.browser.msie){c.change();}}});});
ngbs.page(function(a){var b=jQuery;b(document.body).on("change",".ngbs-checkbox input",function(g){var f=b(this),d=f.parent(),c=d.find("span");if(f.is(":checked")){c.addClass("checked");}else{c.removeClass("checked");}});b(document.body).on("click",".ngbs-checkbox span, .ngbs-checkbox label",function(d){var c=b(this).parent().find("input");c.click();if(b.browser.msie){c.change();}});b(".ngbs-checkbox input").change();});
var attempts=0;var getupForm=setInterval(function(){attempts++;if(jQuery("#getupdates-form").length!==0||attempts===8){ngbs.widget("getupdates-form",function(E,t){var I=jQuery,Z=I(".for-email-checkbox"),L=I(".for-mail-checkbox"),F=I("#getupdates-checkbox-email.ngbs-checkbox input"),S=I("#getupdates-checkbox-mail.ngbs-checkbox input"),Y=I("#getupdates #privacy-pledge"),d=I("#getupdates-email"),m=I("#getupdates-email-confirm"),l=1,X=I("#getupdates #selected").data("maxselectanother"),C=7,f="",M="",v="",h=I("#getupdates #selected").data("ajaxtimeout"),x=I("#getupdates #selected").data("sourceid"),W="^"+x,ac=new RegExp("^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"),y=new RegExp("^[0-9]{5}$"),r="|",H=new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry/i").test(window.navigator.userAgent),w={eseries:"E-Series Wagon",mkx:"mkxbase",mkz:"mkz",mkc:"mkc"};function R(){var ad="pc",ae=window.screen.width;if(ae>1024){ad="pc";}else{if(ae>568){ad="tablet";}else{ad="mobile";}}return ad;}function T(){return Z.css("display")!=="none";}function ab(){return L.css("display")!=="none";}function N(ad){if(ad[0].selectedIndex===0){return;}var af=I(ad.find("option")[ad[0].selectedIndex]),ae;if(af.length>0){ae={metricsname:af.data("metricsname")||"",make:af.data("make")||"",model:af.data("name")||"",metricsyear:af.data("year")||"",brochureCode:af.data("brochurecode")||"",metricssegment:af.data("segment")||""};}return ae;}function i(){var ad,ae;for(ad=1;ad<X;ad++){ae=N(I("#getupdates-vehicles-select-"+ad));if(ae){return ae;}}}function B(){var ag=I("#getupdates-selected-vehicles"),ae=X-I("#getupdates-selectvehicles .getupdates-vehicles.gu-hidden").length,af=false,ah,ai,ad=I("#getupdates-selectvehicles .getupdates-vehicles:not(.gu-hidden) option:selected");ad.each(function(aj,ak){if(jQuery(ak).val()!=="Select a vehicle"){ag.append("<li>"+jQuery(ak).val()+"</li>");af=true;}});if(!af){I("#getupdates #thankyou-section .options").css("visibility","hidden");}}function U(){I("#getupdates-selected-vehicles").html("");}function p(){return __params&&__params.make&&__params.make==="Lincoln";}function b(ad){var af=i(),ai={dartSrc:"690327",dartType:"fvflup",prefix:"fv",brand:"ford",tool:"event: updates opt-in",metricsname:"",metricsyear:"",metricssegment:"",leadOptIns:""},ae="ford",ah="lincoln";if(ad){ai.metricsname=I("#selected").data("metricsname")||"";}if(p()){var ag=I("#customer-address-zipcode");ai.prefix="ln";ai.dartType="lngen2";ai.brand="lincoln";ai.tool="get updates";ai.dartSrc="690333";ai.zip=ag.val();}if(T()&&ab()){if(ai.prefix==="ln"&&!H){ai.toolDescriptor="email-postal";}else{ai.toolDescriptor="full";}ai.leadOptIns="email direct opt-in";ai.onClicks="email-postal";}else{if(T()){if(ai.prefix==="ln"&&!H){ai.toolDescriptor="email";}else{ai.toolDescriptor="email only";}ai.leadOptIns="email only opt-in";ai.onClicks="email";}else{if(ab()){if(ai.prefix==="ln"&&!H){ai.toolDescriptor="postal";}else{ai.toolDescriptor="direct only";}ai.leadOptIns="email direct opt-in";ai.onClicks="postal";}}}if(H){ai.prefix="m"+ai.prefix;ai.leadOptIns="email only opt-in";}if(af){I.extend(ai,af);ai.metricsname=af.metricsname;}if(location.href.indexOf("2017-mkz")>-1){ngbs.metrics._config.page.thankyou.dart.u1="lincoln mkz";ai.nameplate="lincoln mkz";}return ai;}function e(){U();B();I("#getupdates-form-section").hide();I("#thankyou-section").show();I("#getupdates-thankyou-title").show();I(window).scrollTop(parseInt(I("#getupdates-form").css("top"),10));}function c(ad){ngbs._message_bus.send(document.body,"get-updates-submission",{trackingId:ad});}function z(){I("#getupdates-form-section").show();I("#thankyou-section").hide();I("#getupdates-thankyou-title").hide();I("#getupdates #thankyou-section .options").css("visibility","visible");}function V(){return ab();}function s(){F.click();if(I.browser.msie){F.change();}}function o(){S.click();if(I.browser.msie){S.change();}}function P(){I("#getupdates-personal .not-valid").removeClass("not-valid");I(".select-container.not-valid").removeClass("not-valid");}function O(){var ad=window.location.href.indexOf("gumode=mail+email");I("#getupdates .ngbs-textbox input").val("");I("#getupdates .ngbs-radio input").attr("checked",false);I("#getupdates .ngbs-radio .ngbs-radio-group.checked").removeClass("checked");I("#getupdates .ngbs-select select").each(function(){this.selectedIndex=0;});if(!T()&&ad>-1){s();}if(!ab()&&ad>-1){o();}l=1;I("#add-another").css("top","").show();I("#getupdates-vehicles-2").hide();I("#getupdates-vehicles-3").hide();P();}function j(ad){f=ad.email.replace("_","");M=ad.mail.replace("_","");v=(typeof ad.mobile!=="undefined")?ad.mobile.replace("_",""):"";}I("#getupdates-form").on("setQACodes",function(ad,ae){j(ae);});function aa(ad){if(!ad){return"";}return ad.toLowerCase().replace(/\s/g,"").replace(/\-/g,"");}function K(af,ae,ad){return af.data(ae)!==undefined&&aa(af.data(ae))===aa(ad);}function n(af,ad,ae){if(ad){if(ad.indexOf("c-max")>-1){return K(af,"name",ad);}return K(af,"name",ad)||K(af,"ngpid",ad);}return K(af,"name",ae)||K(af,"ngpid",ae);}I("#getupdates-form").on("shown",function(ag,al){al=al||{};var ad=I("#selected"),ae=al.ngpid||ad.data("ngpid"),ao=al.segment||ad.data("segment"),am=aa(al.ngpid2);if(ae){var af,ah,ai,an,ar,ak,aj;ae=ae.toLowerCase().split(";");ah=ae.length;if(ah>X){ah=X;}for(ak=0;ak<ah;ak++){af=w[ae[ak]]||ae[ak];ai=I("#getupdates-vehicles-select-"+(ak+1));an=ai.find("option");aj=0;while(aj<an.length){ar=I(an[aj]);if(n(ar,af,am)){if(ao){if(ao===ar.data("segment")){ar.attr("selected","true");}}else{ar.attr("selected","true");}break;}aj++;}}for(ak=1;ak<ah;ak++){if(I("#getupdates-vehicles-select-"+(ak+1))[0].selectedIndex!==0){I("#add-another").click();}}}else{try{var aq=ngbs.u.anchor.getQuery();if(aq.mid){ae=aq.mid;}}catch(ap){}}if(al.qacodes){j(al.qacodes);}z();ngbs.metrics.page("open",b());I(".getupdates-form.group-flip.shown").css("visibility","visible");});I("#getupdates-form").on("closed",function(ad){if(I("#getupdates-form").hasClass("shown")&&I("#thankyou-section").css("display")==="none"){ngbs.metrics.click("close",b());}z();O();});I("#getupdates-form").on("selectVehicle",function(ad,ae){if(ae.year&&ae.ngpid&&typeof ae.ngpid==="string"&&ae.ngpid.length>0){I("#getupdates-vehicles-select-1-menu").trigger("selectDeeplink",ae.year+ae.ngpid);}});function J(){var ad=I("#getupdates-first-name").find("label"),ae=I("#getupdates-last-name").find("label");if(V()){ad.find(".star").css("display","inline");ae.find(".star").css("display","inline");}else{ad.find(".star").css("display","none");ae.find(".star").css("display","none");}I("#getupdates-personal input").removeClass("not-valid");I("#getupdates-personal label").removeClass("not-valid");I("#customer-address-state").parent().removeClass("not-valid");}F.on("change",function(){var ad=I(this);if(ad.is(":checked")){Z.fadeIn();}else{Z.hide();}if(!T()&&!ab()){o();}J();});S.on("change",function(){var ad=I(this);if(ad.is(":checked")){L.fadeIn();}else{L.hide();}if(!T()&&!ab()){s();}J();});I("#add-another").on("click",function(){if(l<X){l++;var ae=I(this),ad=I("#getupdates-vehicles-"+l);ad.fadeIn(function(){ad.removeClass("gu-hidden");});ae.css("top",ad.position().top+C);if(l===X){ae.hide();}}});Y.find("#open-tooltip").on("click",function(ad){ad.preventDefault();Y.find("div.tooltip-box").show();});Y.find(".close-tooltip").on("click",function(ad){ad.preventDefault();Y.find("div.tooltip-box").hide();});function A(ad){return ad.length!==0&&ad.match(ac);}function G(ad){return ad.match(y)&&!ad.match(new RegExp("^0{5}$"));}function Q(){var ah=(/iPhone|iPad/i.test(navigator.userAgent));var aj=false;var ae;var af=[];var ak=[];var ag=jQuery("[id^=getupdates-vehicles-select-] :selected");ag.each(function(al,am){if(am.innerHTML!=="Select a vehicle"){af.push(am.innerHTML);}});try{aj=(!(window.ActiveXObject)&&window.hasOwnProperty("ActiveXObject"));}catch(ai){aj=false;}var ad=af.length;ak=jQuery.unique(af);ae=ak.length===ad;if((ah||aj)&&ak[0]&&ak[2]){if(ak[0]===ak[2]){ae=false;}}return ae;}function a(){var af=true,aj=jQuery("#getupdates-current-vehicle"),ad=aj.find(".current-vehicle option:selected"),ah=aj.find(".current-year option:selected"),ae=I("body").data("make")||__params.make,ag=aj.data("default-vehicle")===ad.text(),ai=aj.data("default-year")===ah.text();if(ae&&ae.toLowerCase()==="lincoln"&&aj.length!==0){if((ag&&!ai)||(ai&&!ag)){af=false;}}return af;}function u(){var ad;if(T()){ad=F.data("listid");}else{ad=S.data("listid");}return ad;}function k(){var ae,ad=R();ae=(H&&ad==="mobile")?v:M;if(T()){if(typeof ae!=="undefined"&&ae.length){ae=f+r+ae;}else{ae=f;}}return ae.replace(/\_/g,"");}function g(){var al=d.find("input").val(),ah=m.find("input").val(),aj=I("#customer-firstname"),ak=I("#customer-lastname"),ai=I("#customer-address-zipcode"),ae=true;P();if(T()){if(!(al.toLowerCase()===ah.toLowerCase()&&A(al))){ae=false;d.find("input").addClass("not-valid");d.find("label").addClass("not-valid");m.find("input").addClass("not-valid");m.find("label").addClass("not-valid");}}if(ab()){var ag=I("#customer-address-street"),af=I("#customer-address-city"),ad=I("#customer-address-state");if(ag.val()===""){ag.addClass("not-valid");I("#getupdates-address label").addClass("not-valid");ae=false;}if(af.val()===""){af.addClass("not-valid");I("#getupdates-city label").addClass("not-valid");ae=false;}if(aj.val()===""){aj.addClass("not-valid");I("#getupdates-first-name label").addClass("not-valid");ae=false;}if(ak.val()===""){ak.addClass("not-valid");I("#getupdates-last-name label").addClass("not-valid");ae=false;}if(ad.val()===""){I("#getupdates-states.ngbs-select .select-container").addClass("not-valid");I("#getupdates-states label").addClass("not-valid");ae=false;}}if(!G(ai.val())){ai.addClass("not-valid");I("#getupdates-zip-code label").addClass("not-valid");ae=false;}if(!Q()){I(".getupdates-vehicles > .select-container").addClass("not-valid");ae=false;}return ae;}function D(){var ad;if(T()){ad=F.val()+".json";}else{ad=S.val()+".json";}return ad;}function q(){var ae="listid="+u()+"&qacodes="+k(),ad={make:[],model:[],year:[],brochureCode:[]};if(window.MP&&window.MP.UrlLang&&window.MP.UrlLang==="es"){ae+="&customer.language=ES";}else{ae+="&customer.language=EN";}I("#getupdates-personal").find("input").each(function(ag,ah){if(this.id!==""&&this.value!==""){ae+="&"+this.id.replace(/\-/g,".")+"="+window.encodeURIComponent(this.value);}});var af=I("#getupdates-personal").find("select");if(af.val()!==""){ae+="&"+af.attr("id").replace(/\-/g,".")+"="+window.encodeURIComponent(af.val());}I(".ngbs-radio-group input.purchase-timeframe").each(function(){if(this.checked){ae+="&"+this.name.replace(/\-/g,".")+"="+this.value;}});I("#getupdates-selectvehicles select").each(function(){if(this.selectedIndex!==0){var ag=I(I(this).find("option")[this.selectedIndex]);ad.make.push(ag.data("make"));ad.model.push(ag.data("name"));ad.year.push(ag.data("year"));ad.brochureCode.push(ag.data("brochurecode"));}});I.each(ad,function(ag){ae+="&"+ag+"="+this.join(";");});I("#getupdates-current-vehicle select").each(function(){if(this.selectedIndex!==0){var ag=I(I(this).find("option")[this.selectedIndex]);ae+="&"+this.name+"="+ag[0].value;}});return ae;}I("#submit-button a").on("click",function(ae){if(g()){var ad=jQuery.support.cors?"json":"jsonp";I.ajax(D(),{data:q(),dataType:ad,timeout:h}).fail(function(af){if((af.responseText&&af.responseText.indexOf("zipcode")!==-1)||(af.statusText==="success"&&!af.responseText)){I("#customer-address-zipcode").addClass("not-valid");I("#getupdates-zip-code label").addClass("not-valid");I(window).scrollTop(parseInt(I("#getupdates-form").css("top"),10));}if(window.console&&window.console.error){window.console.log("Could not submit form: "+af.statusText+": "+af.responseText);}}).done(function(af){e();ngbs.metrics.page("thankyou",b());if(af.Response&&af.Response.TrackingId){c(af.Response.TrackingId);}});}else{I(window).scrollTop(parseInt(I("#getupdates-form").css("top"),10));}});J();I("#getupdates").css("display","block");});window.clearInterval(getupForm);}},1000,attempts);
(function(b){function a(){var c="pc",d=window.screen.width;if(d>1024){c="pc";}else{if(d>568){c="tablet";}else{c="mobile";}}return c;}b.metrics.config({page:{open:{pageName:function(d){var c;if(d.prefix==="ln"){c=d.prefix+":vehicle:get updates:1:info";if(typeof(d.nameplate)!=="undefined"&&d.nameplate!==""){c+=":"+d.nameplate;}}else{c=d.prefix+": vehicle: get updates: 1: info";if(typeof(d.nameplate)!=="undefined"&&d.nameplate!==""){c+=": "+d.nameplate;}}return c;},channel:"get updates",hier1:function(d){var c="shopping tools:get updates";if(typeof(d.segment)!=="undefined"&&d.segment!==""){c+=":"+d.segment;}if(typeof(d.nameplate)!=="undefined"&&d.nameplate!==""){c+=":"+d.nameplate;}return c;},eVar11:function(d){var c;if(d.prefix==="ln"){c=d.prefix+":vehicle:get updates:1:info";}else{c=d.prefix+": vehicle: get updates: 1: info";}return c;},prop11:function(d){var c;if(d.prefix==="ln"){c=d.prefix+":vehicle:get updates:1:info";}else{c=d.prefix+": vehicle: get updates: 1: info";}return c;},eVar12:"<year>",prop12:"<year>",eVar16:"<nameplate>",prop16:"<nameplate>",prop54:function(c){return"ui:rad:"+a();},eVar54:function(c){return"ui:rad:"+a();}},thankyou:{pageName:function(d){var c;if(d.prefix==="ln"){c=d.prefix+":vehicle:get updates:2:thank you";if(typeof(d.nameplate)!=="undefined"&&d.nameplate!==""&&d.nameplate!==" "){c+=":"+d.nameplate;}}else{c=d.prefix+": vehicle: get updates: 2: thank you";if(typeof(d.nameplate)!=="undefined"&&d.nameplate!==""&&d.nameplate!==" "){c+=": "+d.nameplate;}}return c;},channel:"get updates",hier1:function(d){var c="shopping tools:get updates";if(typeof(d.nameplate)!=="undefined"&&d.nameplate!==""&&d.nameplate!==" "){c+=":"+d.segment+":"+d.nameplate;}return c;},eVar11:function(d){var c;if(d.prefix==="ln"){c=d.prefix+":vehicle:get updates:2:thank you";}else{c=d.prefix+": vehicle: get updates: 2: thank you";}return c;},prop11:function(d){var c;if(d.prefix==="ln"){c=d.prefix+":vehicle:get updates:2:thank you";}else{c=d.prefix+": vehicle: get updates: 2: thank you";}return c;},eVar12:"<year>",prop12:"<year>",eVar16:"<nameplate>",prop16:"<nameplate>",eVar17:function(){return b.metrics.generateCKSVisitId();},prop18:"get updates",prop20:function(d){var c="email opt-in full";if(typeof(d.leadOptIns)!=="undefined"&&d.leadOptIns!==""){c=d.leadOptIns;}return c;},eVar28:"get updates",eVar48:"<tool>",prop48:"<tool>",eVar49:"<toolDescriptor>",prop49:"<toolDescriptor>",prop54:function(c){return"ui:rad:"+a();},eVar54:function(c){return"ui:rad:"+a();},events:["event10","event13","event43"],dart:{src:"<dartSrc>",type:"<dartType>",cat:"up",u1:"<nameplate>",u6:1,u10:"<zip>"},eff:{brand:"<brand>",site:"t1",category:"up"}}},click:{close:{channel:"get updates",hier1:"shopping tools:get updates:<segment>:<nameplate>",pe:"o",pev2:function(d){var c;if(d.prefix==="ln"){c=d.prefix+":vehicle:get updates:close:";if(typeof(d.nameplate)!=="undefined"){c+=d.nameplate;}}else{c=d.prefix+": vehicle: get updates: close:";if(typeof(d.nameplate)!=="undefined"){c+=" "+d.nameplate;}}return c;},prop5:function(d){var c;if(d.prefix==="ln"){c="get updates:close:"+d.onClicks;}else{c="get updates: close: "+d.onClicks;}return c;},eVar11:true,prop11:true,eVar12:"<year>",prop12:"<year>",eVar16:"<nameplate>",prop16:"<nameplate>"}}});}(ngbs));
ngbs.widget("group-flip",function(c,e){function d(h){var g=this;this.resizeInterval=null;this.currently_open=null;this.close_callback=function(){};jQuery(".close",h).click(function(){c.send(this,"close");});c.listen(h,"open",function(j,i){g.open(i,this);});c.listen(h,"close",function(){g.close(this);});c.listen(document,"close-flips",function(){c.send(h,"close");c.send(document.body,"close-adchoices");});}d.prototype.open=function(x,i){var p=jQuery(i);var n=jQuery(".flip-make").data("make");var r=0;var g=document.domain;if(window.NextGen&&window.NextGen.make==="Ford"){var m=jQuery("#view").outerHeight()||1;r=Math.round(m.top)-1;}else{r=jQuery(".global-wrap-container").height();}this.currently_open=i;p.addClass("active");if(x){p.data({close_callback:x.onclose||function(){}});if(x.scrollTop){p.css("top",x.scrollTop);}else{if(jQuery(".cpo-content-holder").length>0){p.css("position","absolute");p.css("top","175px");}else{p.css("top","");}}if(x.screen){if(jQuery(".cpoContent .content").length>0){this.$screen=jQuery('<div class="screen" id="screen_flip"></div>').appendTo(".cpoContent > .content");n="cpo";}else{if(jQuery("#view-container").length>0){if(n==="Lincoln"){this.$screen=jQuery('<div class="screen" id="screen_flip"></div>').insertAfter("#view-container");}else{if(window.location.search.match("guflip=enabled")&&jQuery("#view").length>0){this.$screen=jQuery('<div class="screen" id="screen_flip"></div>').appendTo("#view");}else{this.$screen=jQuery('<div class="screen" id="screen_flip"></div>').appendTo("#view-container");}}}else{if(jQuery("#page-div-fdshowroom").length>0){this.$screen=jQuery('<div class="screen" id="screen_flip"></div>').prependTo("#page-div-fdshowroom");n="bap";}else{if(jQuery("#showroom-page").length>0){this.$screen=jQuery('<div class="screen" id="screen_flip"></div>').prependTo("#showroom-page");jQuery("#showroom-page").css("position","relative");n="si";}else{if(jQuery("#searchInventoryPage").length>0){this.$screen=jQuery('<div class="screen screen-fix" id="screen_flip"></div>').prependTo("#searchInventoryPage");jQuery("#searchInventoryPage").css("position","relative");n="ip";}else{if(jQuery("#lad-container").length>0){this.$screen=jQuery('<div class="screen" id="screen_flip"></div>').appendTo("#lad-container");n="lad";}}}}}}if(this.$screen){p.data("has_screen",true);}if(n!=="Lincoln"&&r>0){this.$screen.height(r);}var u=jQuery("#header").height();var w=jQuery("#view-hd-line");var l=jQuery("#view-bd");var q=jQuery(".view-brochures #brochures-landing .main-container");if(w.length===1&&w.is(":visible")){u+=w.height()+1;}if(n==="Ford"&&l.length>0){if(q.length>0){q.css("overflow","auto");}var h=l.css("margin-top");var t=0;h=h.replace("px","");h=parseInt(h,10);if(h>0){t=h;}var z=jQuery("#view").css("padding-top");z=parseInt(z,10);var j=z-u;if(j&&typeof(j)==="number"&&j<=0){j=0;}if(x.guflip){this.$screen.height(l.outerHeight()+t-260);}else{this.$screen.height((l.outerHeight())+t+j);}this.$screen.css("top",u+"px");}if(n==="Lincoln"){if(jQuery("#view-hd-line").length>0){this.$screen.css({top:jQuery("#header").height()+"px",height:jQuery("#view-container").height()+jQuery("#view-hd-line").height()+200+"px"});}else{this.$screen.css({top:jQuery("#header").height()+"px",height:jQuery("#view-container").height()+200+"px"});}}if(n==="cpo"){var s=jQuery("body").hasClass("skin-lincoln")?jQuery("#header").outerHeight():"-11px";this.$screen.css({height:(jQuery(".cpoContent").height()+10)+"px",top:s});}if(n==="lad"){this.$screen.css({height:jQuery("#lad-search-container").height()+29+"px",top:jQuery("#header").height()+49+"px"});}if(window.location.href.indexOf("bp3.ford")!==-1){jQuery(".screen").css("height",(jQuery("#view-container").height()+10)+"px");}if(window.location.search.match("guflip=enabled")&&jQuery("#view").length>0){this.$screen.css({top:jQuery("#header").height()+"px",width:jQuery("#view-container").width()+"px",left:"-"+(jQuery("#view-container").width()-jQuery("#view").width())/2+"px"});}}if(jQuery(".ie8.skin-lincoln").length>0){var k=p.position();var v=parseInt(p.width(),10)+50;var o=parseInt(p.height(),10);var y=parseInt(k.top,10);if(jQuery(".ie-shadow").length===0){this.$ieShadow=jQuery('<div class="ie-shadow"></div>').appendTo("#view");this.$ieShadow.css({top:y,width:v,height:o,display:"block"});}else{jQuery(".ie-shadow").css("top",y);jQuery(".ie-shadow").show();}}}else{p.data({close_callback:function(){}});}if(navigator.userAgent.match(/msie/i)){jQuery(i).find(".sharev2_elements .share-twitter").css("visibility","visible");}if(jQuery("#page").hasClass("view-newlocateadealer")){this.resizeInterval=setInterval(function(){jQuery("#screen_flip").height(jQuery("#view").height()+13);},500);}else{if(jQuery("#page").hasClass("view-incentives")){this.resizeInterval=setInterval(function(){jQuery("#screen_flip").height(jQuery("#view").height()+26);},500);}else{if(jQuery("#view-container").hasClass("view-incentives")){this.resizeInterval=setInterval(function(){jQuery("#screen_flip").height(jQuery("#view").height()+100);},500);}}}};d.prototype.close=function(g){jQuery(g).removeClass("active");if(jQuery(g).attr("id")==="highlights-flip"&&jQuery("#stOverlay").length>0){jQuery("#stOverlay").css("display","none");}if(jQuery(g).data().close_callback){jQuery(g).data().close_callback();}if(jQuery(g).data("has_screen")){this.$screen.remove();}if(this.$ieShadow){jQuery(".ie7 .ie-shadow, .ie8 .ie-shadow").hide();}if(navigator.userAgent.match(/msie/i)){jQuery(g).find(".sharev2_elements .share-twitter").css("visibility","hidden");}clearInterval(this.resizeInterval);};var b=0;if(e.length>0){var f=new d(e);}else{var a=setInterval(function(){b++;var g=jQuery(".group-flip");if(g.length>0||b===10){var h=new d(g);window.clearInterval(a);}},500,b);}});
setTimeout(function(){var a="0848";ngbs.widget("getupdates-flip",function(c,g){var d=jQuery,f,k,j,l=false,h=new RegExp("Android|webOS|iPhone|iPod|BlackBerry/i").test(window.navigator.userAgent);function i(){var q,p={},n=this;this.$flip=d("#getupdates-form");this.$flip.hide();if(h){d(document.body).addClass("mobile");d(document.body).prepend(this.$flip);}this.bind();var m=d("#getupdates-form"),o=false,r=m.css("top");}i.prototype.bind=function(){var m=this;var n=(function(){return function(){var o=false;if(d(document.body).hasClass("getupdates-active")){o=true;d(document.body).removeClass("getupdates-active");}c.send(m.$flip,"close");d("#getupdates-form").trigger("closed");d(".getupdates-form.group-flip").removeClass("shown");m.$flip.hide();if(o){d(window).scrollTop(k);}d(".global-wrap.global-wrap-footer").css("z-index",m._previousGlobalWrapZIndex);d("#view-bd").removeClass("minHeight");d("#searchInventoryPage").removeClass("minHeight");d("#tfsgb_bar").css("z-index","999999");};}());d(document.body).on("click",".get-updates-link",function(s){jQuery(".get-updates-link").trigger("close-flips");jQuery(".flip_close").trigger("click");jQuery(".msi-flip-close").trigger("click");var o=d(this).attr("href"),r;if(!o||(o.indexOf("mkc/reveal")===-1&&o.indexOf("blacklabel/introduction")===-1&&o.indexOf("navigator-reveal")===-1&&o.indexOf("2016-mkx")===-1)){s.preventDefault();var t={qacodes:m.getQaCode(d(this))};if(o!==undefined){var p=o.match("(cars|suvs|trucks|crossovers|commercial-trucks)/([A-Za-z0-9-]+)/");if(p&&p.length===3){t.ngpid2=p[2];if(t.ngpid2==="mkz"){t.ngpid="mkz base";}if(d("#search_results_get_updates").length){t.ngpid=t.ngpid2;if(t.ngpid==="mkc"){t.ngpid="mkc base";}}}}m.open(t);if(!h){var q=m.$flip.parent();q.css("visibility","visible");setTimeout(function(){q.css("visibility","hidden");});}}else{window.localStorage.setItem("qacodes","conceptVehicle");}});d("#getupdates-close").on("click",n);d("#closeThankyou").on("click",n);d(".payment-estimator").on("click",n);c.listen(document,"close-flips",n);this.setQACodes(this.getDefaultQaCodes());};i.prototype.open=function(r){var m=this;if(h){d(document.body).addClass("mobile");d(document.body).prepend(this.$flip);this.$flip.css("min-height",parseInt(d(window).height()-10,10)+"px");d(window).resize(function(){m.$flip.css("min-height",parseInt(d(window).height()-10,10)+"px");});}d("#tfsgb_bar").css("z-index","0");if(window.fdcc!==undefined&&window.fdcc.spc!==undefined){window.fdcc.spc.hide();}if(window.MySavedItems!==undefined&&window.MySavedItems.SavedItems!==undefined&&window.MySavedItems.SavedItems.totalVehicles){var q=window.MySavedItems.SavedItems.vehicles,o={eseriescargovan:"E-Series Van",eseriescutaway:"E-Series Cutaway",econolinewagon:"E-Series Wagon",mkc:"mkcbase",mkz:"mkz"},p;r=r||{};if(!r.ngpid){r.ngpid="";}for(p=0;p<q.length;p++){r.ngpid+=o[q[p].modelID]||q[p].modelID;if(p<q.length-1){r.ngpid+=";";}}}if(window.location.href.indexOf("2017-continenta")>-1){r=r||{};r.ngpid="2017continental";}if(window.location.href.indexOf("mkz")>-1){r=r||{};r.ngpid="MKZ";}if(window.location.href.indexOf("mkc/reveal")>-1){r=r||{};r.ngpid="mkc";}if(window.location.href.indexOf("navigator-reveal")>-1){r=r||{};r.ngpid="Navigator2015";}if(window.location.href.indexOf("2016-mkx-concept")>-1){r=r||{};r.ngpid="2016MKX";}if(window.location.href.indexOf("Transit%20Chassis")>-1&&h&&!r.ngpid){r.ngpid="Transit Chassis";}if(window.location.href.indexOf("Transit%20Commercial")>-1&&h&&!r.ngpid){r.ngpid="Transit Commercial";}if(window.location.href.indexOf("transitcommercial")>-1&&h&&!r.ngpid){r.ngpid="Transit Commercial";}if(window.location.href.indexOf("fusion")>-1&&h&&!r.ngpid){r.ngpid="Fusion";}if(window.location.href.indexOf("f150")>-1&&h&&!r.ngpid){r.ngpid="F-150";}if(window.location.href.indexOf("Transit%20VanWagon")>-1&&h&&!r.ngpid){r.ngpid="Transit VanWagon";}if(window.location.href.indexOf("focus-2015-reveal")>-1&&h&&!r.ngpid){r.ngpid="2015focus";}if(window.location.href.indexOf("mkz")>-1&&window.location.href.indexOf("hybrid")>-1){r=r||{};r.ngpid="MKZHybrid";}d(".container-close span").click();d("#tfsgb").animate({height:"70px"},1000);c.send(document.body,"tooltip-hide");c.send(document,"close-flips");if(td_site&&td_site.nav){td_site.nav.extClose();}k=d(window).scrollTop();this.$flip.show();d("#view-bd").addClass("minHeight");d("#searchInventoryPage").addClass("minHeight");c.send(this.$flip,"open",{screen:true,guflip:r&&r.guflip?r.guflip:false});d(window).scrollTop(parseInt(d("#getupdates-form").css("top"),10));d(document.body).addClass("getupdates-active");if(!h){d("#getupdates-form").css({left:"50%",margin:"0 0 0 -"+(d("#getupdates-form").width()/2)+"px"});}if(window.location.href.indexOf("helloagain")!==-1){d("#getupdates-form").css("z-index",1000);}this._previousBodyHeight=d("#view-bd").css("min-height");this._previousGlobalWrapZIndex=d(".global-wrap.global-wrap-footer").css("z-index");d(".global-wrap.global-wrap-footer").css("z-index","30");d(".getupdates-form.group-flip").addClass("shown");d("#getupdates-form").trigger("shown",r);var n=d("div#page");if(n.attr("class")!==undefined&&n.attr("class").indexOf("reveal")!==-1){if(document.readyState==="complete"){l=true;}else{d(window).on("load",function(){m._updateVeneerHeight();l=true;});}d(window).on("scroll",function(){var s=m._calculateVeneerHeight();if(!l||d("#screen_flip").height()!==s){m._updateVeneerHeight();}});}};i.prototype._updateVeneerHeight=function(){var m=this._calculateVeneerHeight();d("#screen_flip").css("height",m);};i.prototype._calculateVeneerHeight=function(){var n=d("div#page");var m=jQuery("#header").height();var p=jQuery("#view").css("padding-top");p=parseInt(p,10);var o=p-m;if(o&&typeof(o)==="number"&&o<=0){o=0;}if(n.attr("class").indexOf("f150")!==-1){o=-16;}return(d("#view-bd").outerHeight()+o);};i.prototype.setQACodes=function(m){d("#getupdates-form").trigger("setQACodes",m);};i.prototype.selectVehicle=function(n,m){d("#getupdates-form").trigger("selectVehicle",{year:n,ngpid:m});};i.prototype.getDefaultQaCodes=function(n){var m=this.getQaCodes(),o="";if(m){o=m.dflt;}return o;};i.prototype.getQaCodes=function(m){return d.parseJSON(d("#getupdates #qacodes").html());};i.prototype.getQaCode=function(p){var s=window.localStorage.getItem("qacodes"),q={email:"",mail:""},r=this.getQaCodes();if(r){if(!s&&p){p=this.getClosestElementId(p);while(p.element.length&&!r.hasOwnProperty(p.id)){p=this.getClosestElementId(p.element);}s=p.id;}if(r.hasOwnProperty(s)){q=r[s];var n=d("#getupdates #selected"),o=n.data("year")+n.data("ngpid");if(o!==undefined&&r[s].hasOwnProperty(o.toLowerCase())){q=r[s][o.toLowerCase()];}}else{q=r.dflt;}if(h&&r.dflt.mobile){q.mail=r.dflt.mobile;}}if(ngbs){var m=ngbs.u.anchor.getQuery().srccode;if(m){q.mail=a+m;}}q.email=q.email.replace("_","");q.mail=q.mail.replace("_","");window.localStorage.removeItem("qacodes");return q;};i.prototype.getClosestElementId=function(m){m=m.parent();while(m.length&&m.attr("id")===undefined){m=m.parent();}return{id:m.attr("id"),element:m};};i.prototype.getClosestId=function(m){return this.getClosestElementId(m).id;};var e=0;var b=setInterval(function(){e++;if(jQuery("#getupdates-form").length!==0||e===10){var m=new i();ngbs.getUpdates=m;jQuery(document).ready(function(){var n={};if(ngbs){if(ngbs.u.anchor.getQuery().guflip){m.open({qacodes:m.getQaCode(),guflip:true});}}});window.clearInterval(b);}},500,e);});},1000);
ngbs.widget("axz-price-update",function(b,c){if(td_site.pricing!==undefined&&td_site.pricing.shouldShowMessage()){var a=td_site.pricing.getPlanTypeDisplay();c.find(".PlanType").html(a);td_site.pricing.setMessageShown();b.send(jQuery("#axz-price-update"),"open",{screen:true});}});
