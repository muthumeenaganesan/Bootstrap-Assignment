(function fordCarouselInit(g){var r=false,d=[];
var w=window.fordApp||{};
if(_.isEmpty(w.supports)){w.supports={transforms:q()}
}function h(){if(r){return
}r=true;
if(!g.fn.hammer){g.fn.hammer=function(z){return this.each(function(){var A=g(this);
if(!A.data("hammer")){A.data("hammer",new Hammer(this,z))
}})
}
}g(window).one("unload.ford-carousel",function x(){g(this).off("resize.ford-carousel");
_.invoke(d,"destroy",true);
d=null
}).on("resize.ford-carousel",_.throttle(function y(){_.invoke(d,"onWindowResize")
},250))
}function q(){var x={key:null,"3d":false},z,y,A;
if(!window.getComputedStyle){return x
}z={transform:"transform",webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform"};
y=document.createElement("div");
document.body.appendChild(y);
for(var B in z){if(y.style[B]!==undefined){x.key=z[B];
y.style[B]="translate(1px,1px)";
A=window.getComputedStyle(y).getPropertyValue(x.key);
x["2d"]=(A!==undefined&&!!A.length&&A!=="none");
if(x["2d"]){y.style[B]="translate3d(1px,1px,1px)";
A=window.getComputedStyle(y).getPropertyValue(x.key);
x["3d"]=(A!==undefined&&A.length&&A!=="none")
}else{x.key=null
}break
}}document.body.removeChild(y);
return x
}function a(x,y){if(!g(x).data("ford-carousel")){this.$elm=x;
this.$ul=null;
this.$li=null;
this.$pagination=null;
this.componentName=null;
this.page=y.page;
this.count=1;
this.options=y;
this.isAnimating=false;
this.isUpdating=false;
this.autoPlay=true;
this.autoPlayDuration=6000;
d.push(this);
this.init()
}}a.prototype.destroy=function v(x){if(!x){d=_.reject(d,this)
}this.$ul=null;
this.$li=null;
this.$items=null;
this.$pagination=null;
this.$elm.removeData("hammer").removeData("ford-carousel").empty();
this.$elm=null
};
a.prototype.getHeight=function n(y){var x=0;
if(!y){x=this.$li.eq(this.page-1).height()
}else{this.$li.each(function z(){x=Math.max(x,g(this).height())
})
}return x
};
a.prototype.getLeft=function t(){return"-"+this.$li.filter(":first").width()+"px"
};
a.prototype.init=function s(){var y;
this.autoPlay=this.$elm.hasClass("autoplay");
var x=this.$elm.attr("data-duration");
if(x&&/^[\d.]+$/.test(x)){this.autoPlayDuration=Number(x)*1000
}this.updateData(true);
if(this.count>1&&this.autoPlay){this.startAutoPlay()
}};
a.prototype.updateData=function f(z){var x,H,K;
var C={left:"next",right:"previous"};
this.$ul=this.$elm.find("> ul");
this.$li=this.$ul.find("> li");
this.$pagination=this.$elm.find(".pagination");
this.imgCount=0;
this.componentName=this.$ul.find("meta[data-component-module]")&&this.$ul.find("meta[data-component-module]").length>0?this.$ul.find("meta[data-component-module]").first().attr("data-component-module"):"";
this.count=this.$li.length;
if(this.count>1){K=this;
if(z){h()
}this.$li.each(function D(L){g(this).attr("data-page",(L+1))
});
this.$items=this.$li;
this.updatePage();
this.$elm.off("click",".pagination .page").on("click",".pagination .page",function y(){var L=g(this),M,N;
if(!L.hasClass("current")){M=Number(L.text());
N=K.updatePage(M);
K.setPage(M,false,N);
metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"carousel scroll"},"{customContentModuleOnPageClick}":{val:K.componentName}})
}K.autoPlay=false;
K.stopAutoPlay()
}).off("click",".controls .previous,.controls .next").on("click",".controls .previous,.controls .next",function J(){var L=g(this);
if(L.hasClass("next")){K.next();
metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"carousel scroll"},"{customContentModuleOnPageClick}":{val:K.componentName}})
}else{if(L.hasClass("previous")){K.previous();
metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"carousel scroll"},"{customContentModuleOnPageClick}":{val:K.componentName}})
}}K.autoPlay=false;
K.stopAutoPlay()
}).off("swipe").on("swipe",function B(L){var M=C[L.gesture.direction];
if(M){L.gesture.preventDefault();
K[M]();
metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"carousel scroll"},"{customContentModuleOnPageClick}":{val:K.componentName}})
}});
try{var G=new Hammer(this.$elm[0]);
G.off("panleft panright").on("panleft panright",function(P){var Q=5,N=K.$ul.width(),M=-(N),L=P.gesture.deltaX,O;
P.gesture.srcEvent.preventDefault();
H=(P.type==="panleft")?"left":"right";
O=L+M;
if(L<M){K.setLeft(M+M+Q,false)
}else{if(L>N){K.setLeft(-Q,false)
}else{if(L>50||L<-50){K.setLeft(O,false)
}else{K.setLeft(M,false)
}}}K.autoPlay=false;
K.stopAutoPlay()
});
G.off("panend").on("panend",function(L){if(Math.abs(event.gesture.deltaX)>K.$li.filter(":first").width()/5){switch(H){case ("left"):K.next();
metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"carousel scroll"},"{customContentModuleOnPageClick}":{val:K.componentName}});
break;
case ("right"):K.previous();
metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"carousel scroll"},"{customContentModuleOnPageClick}":{val:K.componentName}});
break
}}else{K.setPage(K.page,true)
}})
}catch(A){}x=this.$li.find("img");
this.imgCount=x.length;
if(this.imgCount){var F=0;
var I=function I(){F++;
if(K.imgCount>1&&F===1){K.$elm.css("height",K.getHeight(true))
}else{if(F===K.imgCount){K.$elm.addClass("initialized");
K.update()
}}};
x.each(function E(){var L=new Image();
L.onload=I;
L.onerror=I;
L.src=(window.devicePixelRatio>=1.5&&g(this).attr("srcset")!==undefined)?g(this).attr("srcset").split(" ")[0]:g(this).attr("src")
})
}}};
a.prototype.next=function p(){var x=(this.page===this.count)?1:(this.page+1);
this.setPage(x,false,"next")
};
a.prototype.onWindowResize=function b(){this.update()
};
a.prototype.previous=function c(){var x=(this.page===1)?this.count:(this.page-1);
this.setPage(x,false,"previous")
};
a.prototype.setLeft=function l(z,y,B){var A=(z!==null)?(z+"px"):this.getLeft(),x=this,C,D;
C=function C(){x.isAnimating=false;
if(B){B()
}};
this.$ul.removeClass("animate");
if(y){this.isAnimating=true;
this.$ul.addClass("animate")
}if(w.supports.transforms.key==="transform"){if(y){this.$ul.one("transitionend oTransitionEnd otransitionend webkitTransitionEnd",C)
}D={};
D[w.supports.transforms.key]=(w.supports.transforms["3d"])?"translate3d("+A+",0,0) scale3d(1,1,1)":"translate("+A+",0)";
this.$ul.css(D);
if(!y){setTimeout(C,0)
}}else{this.$ul.stop(true,true);
if(y){this.$ul.animate({left:A},{complete:C})
}else{this.$ul.css("left",A);
setTimeout(C,0)
}}};
a.prototype.setPage=function o(D,y,F){var z=this.page,G=this,C,B,x,A;
if(this.isUpdating||this.isAnimating){if(this.updatingTimeout){clearTimeout(this.updatingTimeout)
}this.updatingTimeout=setTimeout(function(){G.setPage(D,y,F)
},100);
return
}if(D===z){if(!y){return
}else{A=true
}}else{if(!F){F=(this.page<D)?"next":"previous"
}A=false
}this.page=D;
if(!A){switch(F){case ("direct_next"):B="-"+this.$li.filter(":first").width();
break;
case ("next"):B="-";
if(this.$li.length===3){B+=(this.$li.filter(":first").width()*2)
}else{B+=this.$li.filter(":first").width()
}break;
default:B="0"
}this.setLeft(B,true,function E(){G.updatePage()
});
x=(z>=1)?(z-1):z;
C=(this.page-1);
this.$pagination.find(".current").removeClass("current");
this.$pagination.find("li:eq("+C+") .page").addClass("current");
this.$elm.triggerHandler("page.change",{previousIndex:x,currentIndex:C})
}else{this.setLeft(null,true)
}if(this.imgCount){this.$elm.css("height",this.getHeight(true))
}};
a.prototype.update=function j(){if(this.imgCount){this.$elm.css("height",this.getHeight(true))
}if(this.count>1){this.setLeft(null,false)
}};
a.prototype.updatePage=function m(A){var C=(this.page-1),y=null,D=null,E=null,G=this,F,x,z;
if(!A){E=(C>0)?(C-1):(this.count-1);
D=(this.page===this.count)?0:(C+1)
}else{if(A===this.page){return
}else{x=(A-1);
if(A>this.page){y=0;
D=x;
F="direct_next"
}else{E=x;
F="direct_previous"
}}}this.isUpdating=true;
this.$li.not('[data-page="'+this.page+'"]:first').remove();
if(D!==null){this.$ul.append(G.$items.filter(":eq("+D+")"))
}if(E!==null){z=G.$items.filter(":eq("+E+")");
if(this.count===2){z=z.clone(true)
}this.$ul.prepend(z)
}this.$li=this.$ul.find("> li");
this.setLeft(y,false,function B(){setTimeout(function(){G.isUpdating=false
})
});
return F
};
a.prototype.autoPlayer=function u(){if(this.autoPlay&&window.hasFocus){this.next()
}else{if(!this.autoPlay){this.stopAutoPlay()
}}};
a.prototype.startAutoPlay=function e(){var x=this;
clearInterval(x.autoPlayerInterval);
x.autoPlayerInterval=setInterval(function(){x.autoPlayer()
},this.autoPlayDuration)
};
a.prototype.stopAutoPlay=function k(){var x=this;
clearInterval(x.autoPlayerInterval)
};
if(document.addEventListener){window.addEventListener("focus",function(){window.hasFocus=true
});
window.addEventListener("blur",function(){window.hasFocus=false
})
}window.hasFocus=true;
g.fn.fordCarousel=function i(x){x=g.extend({page:1},x);
return this.each(function y(){var z=g(this);
z.data("ford-carousel",new a(z,x))
})
}
})(jQuery);