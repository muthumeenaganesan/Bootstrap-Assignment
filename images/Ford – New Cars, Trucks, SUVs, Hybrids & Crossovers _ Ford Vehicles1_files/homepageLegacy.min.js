var fordBrand=fordBrand||{};
fordBrand.tooltips=(function(c){if(c(".tooltip").length){var a=c(".tooltip"),b;
var e=c.fn.tooltip.noConflict();
c.fn.bstooltip=e;
c("body").on("click",".tooltip-item",function(){b=c(this).attr("data-tooltipID");
d(b);
metrics.clickEvent("global onclick",null,{"{customOnclickLinkName}":{val:"{sitePrefix}:global:action"},"{customOnclick}":{val:"tool tips"}})
});
var d=function(f){a.tooltip({position:{of:c('[data-tooltipID="'+f+'"]'),my:"left bottom-15",at:"left bottom-15"},show:{effect:"fade",duration:250},content:function(){return c(this).prop("title")
}});
a.tooltip("close");
c(".tooltip-"+f).tooltip("open");
c(".tooltip-close").click(function(){a.tooltip("close")
})
}
}})(jQuery);
$(function(){var a=$(window);
var i=$(".btt-arrow");
var m,c,g,d,j;
a.on("scroll",h);
i.on("mouseover",function(){d=true
});
i.on("mouseout",function(){d=false
});
i.on("click",function(){e();
metrics.clickEvent("global onclick",null,{"{customOnclickLinkName}":{val:"{sitePrefix}:global:action"},"{customOnclick}":{val:"scroll indicator:top"}})
});
function h(){k();
if((a.scrollTop()+a.height())>1599){if((c==="up")){if(!g){f()
}l();
return
}}else{if(g){return
}}n()
}function n(o){if(o||!d){clearInterval(j);
c=null;
b()
}}function l(){clearInterval(j);
j=setInterval(function(){n()
},2500)
}function k(){var o=m?m:a.scrollTop();
m=a.scrollTop();
var p=c;
c=(m<o)?"up":"down"
}function f(){i.animate({right:"-15px"},0);
i.stop(true,true).fadeIn({queue:false,duration:"fast"});
i.animate({right:"+15px"},"fast");
g=true
}function b(){i.fadeOut("fast");
g=false
}function e(){$("html, body").animate({scrollTop:0},400,"swing",function(){n(true)
})
}});
function hoverBillboardCta(d,c){var e=$(d);
var b=e.closest(".content-wrapper");
var a=$("#billboard-cta a:first",b);
if(c){a.addClass("hover")
}else{a.removeClass("hover")
}}$(function(){var a=window.matchMedia("(max-width: 991px)");
a.addListener(b);
b(a);
function b(c){$(".section.slide").each(function(){var f=$(".full-slide-link",this);
var e=c.matches;
if(f){var d=$(".content-wrapper",this);
$(f).appendTo(d)
}})
}});
$(function(){$(".social-view-all").click(function(){if($(".hidden-tile").is(":visible")){$(".hidden-tile").removeClass("tile-show");
$(".viewLess").hide();
$(".viewAll").show();
$(".view-glyph").addClass("icon-plus-outline-50px");
$(".view-glyph").removeClass("icon-minus-outline-50px")
}else{$(".hidden-tile").addClass("tile-show");
$(".viewLess").show();
$(".viewAll").hide();
$(".view-glyph").addClass("icon-minus-outline-50px");
$(".view-glyph").removeClass("icon-plus-outline-50px")
}})
});
var ngLocateDealerMini=null;
(function(){var b=$.extend(true,{config:{fpsUrl:"",mapApiUrl:"",mapKey:"",dealerNameSearchApiUrl:"",locationSearchApiUrl:"",locationSearchApiKey:"",cdnPath:"",fpsConfigPath:"",sendMailCoreServicesUrl:"",breakpoints:[]},localization:{validation:{phone:"",zip_code:""},send_to_phone_carrier_options:[],errors:{}},qs:{},userInfo:{},FPI:{},isMobile:!1},window.fordAppConfig||{},window.locateDealerTriggerOptions||{});
(function(o,q,e,l){var j=b.config.breakpoints,g=j.length,t=["userInfo","FPI"],d,r,k,n,s,f,u,i;
while(g>0&&(d=j[--g])){if((g===0||q>=d.min)&&q<=d.max){break
}}while((r=t.splice(0,1)[0])){if((k=o.match(new RegExp(r+"=([^;]+)")))&&(k=decodeURIComponent(k[1]||""))){k.replace(/([^=&,]+)(=([^&,]*))?/g,function m(h,c,v,p){if(r==="userInfo"&&c==="zip"){p=p.split(/\D/)[0]
}b[r][c]=p
})
}}n=location.search.replace(/^\?/,"").match(/([^=&]+=[^&]*)/g);
if(n){while((s=n.splice(0,1)[0])){f=s.split("=");
b.qs[f[0]]=f[1]
}}b.display={breakpoint:d?d.name:"",rez:d?d.rez:-1,retina:(e&&e>1)};
i=(l.className||"").split(" ");
l.className=i.join(" ")
})(document.cookie,(window.innerWidth),window.devicePixelRatio,document.getElementsByTagName("html")[0]);
angular.module("ford.dealerMini",["ngAnimate","ngResource","ngSanitize","ngTouch","ivpusic.cookie","ford.responsive","ford.filters","ui.bootstrap"]);
angular.module("ford.dealerMini").controller("dealerMiniController",a).directive("unaware",function(){return{templateUrl:"/templates/unaware.html"}
});
a.$inject=["$scope","$sce","$http","$timeout","ipCookie","$location","$q"];
angular.forEach(document.querySelectorAll(".dealer-mini"),function(c){angular.bootstrap(c,["ford.dealerMini"])
});
function a(s,r,q,g,f,l,p){var d=this;
var h=$(".dealer-mini");
var o="/cmslibs/aemservices/nocache/brandsites/dealers/search/location/us/";
var n="/cmslibs/aemservices/nocache/brandsites/dealers/search/name/us/";
if(b.localization.country_code==="CA"){o="/cmslibs/aemservices/nocache/brandsites/dealers/search/location/ca/";
n="/cmslibs/aemservices/nocache/brandsites/dealers/search/name/ca/"
}s.data={};
s.page={};
s.flipDealer=null;
d.breakpoint=s.$root.breakpoint;
s.$on("ford.responsive.breakpointChange",e);
s.init=function(){if(!s.page.isCollapsed){s.toggleCollapsed(0)
}s.search={};
s.search.error=null;
s.page.isMobileTemplate=typeof window.isMobileTemplate!=="undefined"&&window.isMobileTemplate;
s.page.isOrigin=window.location.hostname.indexOf("brand")>0;
if(!s.data.Dealer){s.page.is_low=s.isMobile();
s.localization=b.localization;
s.sendMailCoreServicesUrl=r.trustAsResourceUrl(b.config.sendMailCoreServicesUrl);
s.searchTextPlaceholder=s.localization.enter_location;
s.carrierOptions=[];
s.searchText={model:""};
s.searchOptions={model:"location"};
s.page.currentLocation=0;
s.page.hasLocation=s.searchCookie();
s.typeAheadResults=[];
if(b.initialResults){s.data=b.initialResults
}else{if(s.page.hasLocation){s.searchText.model=s.page.hasLocation;
s.onSearchSubmit(false)
}}}if(s.data.Dealer){var t=s.data.Dealer.slice(0,5);
s.data.Dealer=t;
s.page.hasLocation=s.page.hasLocation?s.page.hasLocation:true;
s.normalizeDealerData();
s.loadMapApi();
s.renderLocationAware()
}s.isBusy=false;
onCloseFlip()
};
s.isMobile=function(){var t=false;
if(d.breakpoint==="sm"||d.breakpoint==="xs"){t=true
}return t
};
s.searchCookie=function(){var v,w,t,u;
w=f("FPI");
if(w){u=w.split("&");
_.each(u,function(y){var x=y.split("=");
if(x[0]==="zip"){v=x[1];
s.page.currentLocation=v;
s.page.moreDealersDeepLink=b.moreDealersLink+"?showResults=1&zipCode="+s.page.currentLocation
}})
}t=f("userInfo");
if(t){u=t.split(",");
_.each(u,function(z){var y=z.split("=");
if(y[0]==="zip"){var x=y[1].substring(0,5);
if(!v){s.searchText.model=x
}s.userInfo=s.userInfo||{};
s.userInfo.zip=x
}})
}return v?v:undefined
};
s.setCookie=function(w){var y=[];
var t={};
var u=f("FPI");
if(u){var x=u.split("&");
_.each(x,function(A){var z=A.split("=");
t[z[0]]=z[1]
})
}t.zip=w;
_.each(t,function v(A,z){y.push(z+"="+encodeURIComponent(A||""))
});
f("FPI",y.join("&"),{domain:".ford.com",path:"/",expires:65,encode:function(z){return z
}})
};
s.setFocus=function(){s.textFocus=true
};
s.blurFocus=function(){setTimeout(function(){s.textFocus=false
},100)
};
s.onUseMyLocationClick=function k(u){var t=p.defer(),v=10000;
s.isBusy=true;
s.searchOptions.model="location";
t.promise.then(function w(x){if(x.address&&x.address.postalCode){s.searchText.model=x.address.postalCode;
s.onSearchSubmit(true)
}else{if(x.coords&&x.coords.latitude&&x.coords.longitude){q({url:o,params:{latitude:x.coords.latitude,longitude:x.coords.longitude,radius:50,filter:"",mindealers:1},method:"GET"}).success(function(z,y){if(z.Dealer&&z.Dealer.length>0){s.data=z;
s.page.hasLocation=true;
s.page.currentLocation=z.Dealer[0].Address.PostalCode;
s.searchText.model=s.page.currentLocation;
s.page.moreDealersDeepLink=b.moreDealersLink+"?showResults=1&zipCode="+s.page.currentLocation;
var A=metrics.getCookieSub("FPI","zip")?true:false;
s.setCookie(s.page.currentLocation);
s.onSearchSubmit(true,A)
}else{g(function(){z.Error=z.Error||{};
z.Error.Code=5;
s.searchError(z);
s.isBusy=false
},250)
}}).error(function(z,y){console.log("error",y);
g(function(){s.status=y;
s.isBusy=false
})
})
}}},function(x){console.warn("DealerService.onGetCurrentPositionError",x);
if(x==="Timed out"||x.code===x.PERMISSION_DENIED){g(function(){var y={Error:{Code:5}};
s.searchError(y);
s.isBusy=false
})
}else{i()
}});
if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(x){t.resolve(x)
},function(x){t.reject(x)
},{enableHighAccuracy:true,maximumAge:0,timeout:v});
g(function(){t.reject("Timed out")
},v+500)
}else{i()
}return t.promise
};
s.onSearchOptionClick=function(u,t){if(s.searchOptions.model!==t){s.typeAheadResults=null;
s.search.error=null;
var v=s.searchText.model;
if(s.searchOptions.model==="location"){s.searchText.location=v;
s.searchText.model=s.searchText.dealer
}else{if(s.searchOptions.model==="dealer"){s.searchText.dealer=v;
s.searchText.model=s.searchText.location
}}g(function(){var w=h.find("input[placeholder]");
if(w.val()===w.attr("placeholder")){w.val("")
}c();
g(function(){h.find("input[placeholder]").trigger("focusout")
})
})
}};
function c(){switch(s.searchOptions.model){case ("location"):s.searchTextPlaceholder=s.localization.enter_location;
break;
default:s.searchTextPlaceholder=s.localization.enter_dealer_name
}}s.onSearchSubmit=function(v,w){if(!s.searchText.model){if(s.searchOptions.model==="location"){s.searchError(null,"required_location_error_message")
}else{s.searchError(null,"required_dealer_error_message")
}return
}w=(w===null||w===undefined)?metrics.getCookieSub("FPI","zip"):w;
if(window.metrics){if(v&&!w){metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"unaware search"},"{customContentModuleOnPageClick}":{val:"find dealer"}})
}else{if(v&&w){metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"dealer search"},"{customContentModuleOnPageClick}":{val:"find dealer"}})
}}}switch(s.searchOptions.model){case ("location"):var u=s.searchText.model;
var t={Error:{Code:{}}};
if(/^\d+$/.test(u.charAt(0))){if(!new RegExp(s.localization.validation.zip_code).test(u)){g(function(){t.Error.Code=4;
s.searchError(t)
},250);
return
}}else{if(!/^[A-Za-z.,' ]+$/.test(u)){g(function(){t.Error.Code=7;
s.searchError(t)
},250);
return
}}}s.isBusy=true;
if(s.searchOptions.model==="location"){q({url:o,params:{position:encodeURIComponent(s.searchText.model),radius:50,filter:"",mindealers:1},method:"GET"}).success(function(y,x){if(y.Dealer){s.data=y;
s.page.hasLocation=true;
s.init();
if(v){if(new RegExp(s.localization.validation.zip_code).test(s.searchText.model)){s.setCookie(s.searchText.model);
s.page.currentLocation=s.searchText.model
}else{s.page.currentLocation=y.Dealer[0].Address.PostalCode
}s.page.moreDealersDeepLink=b.moreDealersLink+"?showResults=1&zipCode="+s.page.currentLocation
}if(s.flipZip){s.renderLocationAware()
}}else{s.searchError(y)
}s.isBusy=false
}).error(function(y,x){s.status=x;
s.isBusy=false
})
}if(s.searchOptions.model==="dealer"){q({url:n,params:{dealerName:encodeURIComponent(s.searchText.model),radius:50,filter:"",mindealers:1},method:"GET"}).success(function(y,x){if(y.Dealer){s.data=y;
s.init();
s.page.currentLocation=null;
s.onSearchOptionClick(null,"location");
s.page.currentLocation=y.Dealer[0].Address.PostalCode;
s.page.moreDealersDeepLink=b.moreDealersLink+"?showResults=1&zipCode="+s.page.currentLocation
}else{s.searchError(y)
}s.isBusy=false
}).error(function(y,x){s.status=x;
s.isBusy=false
})
}};
s.onTypeAhead=function(u){s.search.error=null;
if(s.searchOptions.model==="location"){if(u.keyCode===13){s.onSearchSubmit(true)
}if(!/^[a-z]{2,}/i.test(s.searchText.model)){return
}var t={q:s.searchText.model};
jQuery.ajax({url:b.config.locationSearchApiUrl,dataType:"jsonp",data:_.extend({key:b.config.locationSearchApiKey},t),jsonp:"jsonp"}).then(function(x){var y=[],v;
if(x.statusCode===200&&x.resourceSets&&x.resourceSets.length&&(v=x.resourceSets[0])&&(v=v.resources)){var w=v=_.filter(v,{address:{countryRegionIso2:b.localization.country_code}});
y=_.pluck(v.slice(0,Math.min(v.length,5)),"name");
g(function(){s.typeAheadResults=_.uniq(y)
},500)
}},function(v,w,x){})
}if(s.searchOptions.model==="dealer"){if(u.keyCode===13){s.onSearchSubmit(true)
}if(!/^[a-z]{2,}/i.test(s.searchText.model)){return
}q({url:b.config.dealerNameSearchApiUrl,params:{N:0,Dk:10,Dx:"rel+static(rank,descend)",Dn:0,Di:8398,D:s.searchText.model+"*"},method:"GET"}).success(function(x,w){var A=[],z=x.DimensionSearch,v;
if(z&&z.length&&(v=z[0].Locations)&&v.length){A=_.map(_.pluck(_.flatten(_.pluck(v.slice(0,Math.min(v.length,5)),"Location")),"DimValueName"),function y(C){var B=C.split("+");
return(B.splice(0,1)[0]+", "+B.join(" "))
})
}s.typeAheadResults=_.uniq(A)
}).error(function(w,v){})
}};
s.onTypeAheadResultClick=function(u,t){s.searchText.model=t;
s.typeAheadResults=[];
s.onSearchSubmit(true)
};
s.searchError=function(u,t){if(u){s.search.error=s.localization.errors[u.Error.Code]
}else{s.search.error=s.localization[t]
}};
s.normalizeDealerData=function(){_.each(s.data.Dealer,function t(v,u){var w=[v.Address.Street1];
if(v.Address.Street2){w.push(v.Address.Street2)
}if(v.Address.Street3){w.push(v.Address.Street3)
}v.AddressStreet=w.join(", ");
v.AddressCityStateZip=v.Address.City+", "+v.Address.State+" "+v.Address.PostalCode;
v.Distance=(v.Distance)?v.Distance+" "+s.localization.distance_ype:null;
v.Number=(u+1);
v.isCurrent=(u===0);
v.isSelected=false
})
};
s.loadMapApi=function(){var v=$.Deferred();
s.mapApiPromise=v.promise();
s.isSelectingDealer=false;
window.onBingMapApiReady=function u(){v.resolve(true)
};
$.getScript(b.config.mapApiUrl+"&onscriptload=onBingMapApiReady").fail(function t(y,x,w){v.reject()
})
};
s.renderLocationAware=function(){var t=s.map;
if(t){s.map.dispose();
s.map=null
}if(s.page.is_low){g(function(){var v=h.find(".location-aware .ford-carousel-locate-dealer-mini");
var u=h.find(".location-aware .ford-carousel-template");
v.html(u.children().clone());
if(v.length&&v.data("ford-carousel")){v.data("ford-carousel").updateData()
}else{g(function(){v.fordCarousel()
})
}})
}if(t){g(function(){s.toggleCollapsed(0)
})
}};
s.renderMap=function(){var v,u;
if(s.map){return
}u=[];
s.dealerPushPins=[];
s.map=new Microsoft.Maps.Map(h.find(".location-aware .map")[0],{credentials:b.config.mapKey,mapTypeId:Microsoft.Maps.MapTypeId.road,enableSearchLogo:false,customizeOverlays:true,showCopyright:false,showMapTypeSelector:false,showScalebar:true});
Microsoft.Maps.Events.addHandler(s.map,"mousewheel",function x(z){return z.handled=true
});
_.each(s.data.Dealer,function t(D){var B='<div class="dealer-infobox"><div class="name"><a href="'+D.DeepLinkUrl+"\" onclick=\"metrics.clickEvent('homepage onclick', null, {'{customClick}':{'val': 'dealer info'}, '{customContentModuleOnPageClick}':{'val': 'find dealer'}})\" target=\"_blank\">"+D.Name+'</a></div><div class="hours">'+D.SalesHoursDescription+'</div><div class="address"><div class="street">'+D.AddressStreet+'</div><div class="city-state-zip">'+D.AddressCityStateZip+'</div></div><div class="phone"><span class="icon icon-phone"></span><span class="text">'+D.Phone+"</span></div>";
if(D.URL){B+='<div class="website"><a href="'+D.URL+'" target="_blank"><span>'+s.localization.visit_dealer_website+'</span><span class="icon icon-new-window-25px"></span></a></div>'
}B+='<div class="directions"><a href="'+D.MapURL+"\" target=\"_blank\" onclick=\"metrics.clickEvent('homepage onclick', null, {'{customClick}':{'val': 'directions'}, '{customContentModuleOnPageClick}':{'val': 'find dealer'}})\"><span class=\"icon icon-view-map-outline-50px\"></span><span class=\"text\">"+s.localization.directions+"</span></a></div></div>";
var A=new Microsoft.Maps.Location(D.Latitude,D.Longitude),C=(D.isSelected||D.isCurrent)?"selected":"none",z=new Microsoft.Maps.Infobox(A,{width:300,height:240,offset:new Microsoft.Maps.Point(15,-100),state:Microsoft.Maps.EntityState[(D.isSelected)?"selected":"none"],visible:D.isSelected,htmlContent:B}),F=new Microsoft.Maps.Pushpin(A,{width:35,height:46,state:Microsoft.Maps.EntityState[C],htmlContent:'<span class="dealer-pin '+C+'"><span class="icon"></span><span class="txt-label">'+D.Number+"</span></span>",infobox:z});
if(C){v=A
}s.dealerPushPins.push({dealer:D,pushPin:F,infobox:z});
Microsoft.Maps.Events.addHandler(F,"click",function E(G){s.selectDealer(D)
});
u.push(A);
s.map.entities.push(F);
s.map.entities.push(z)
});
Microsoft.Maps.Events.addHandler(s.map,"viewchangestart",function w(z){if(s.isSelectingDealer){s.isSelectingDealer=false;
return
}});
Microsoft.Maps.Events.addHandler(s.map,"click",function y(z){if((z.isPrimary||z.isTouchEvent)&&z.targetType==="map"){s.hideSelectedInfobox()
}});
g(function(){if(u.length===1){s.map.setView({center:u[0],zoom:11})
}else{s.map.setView({bounds:Microsoft.Maps.LocationRect.fromLocations(u)})
}});
if(v){s.map.setView({bounds:null,center:v})
}};
s.selectDealer=function(u){var w=s.data.Dealer,z=_.find(w,function x(A){return(A.isSelected||A.isCurrent)
}),t=(u.PACode!==z.PACode),y,v;
s.isSelectingDealer=true;
if(t){_.extend(z,{isCurrent:false,isSelected:false})
}u.isSelected=true;
if(s.map){y=_.find(s.dealerPushPins,{dealer:z});
v=_.find(s.dealerPushPins,{dealer:u});
if(t){y.infobox.setOptions({visible:false,state:Microsoft.Maps.EntityState.none});
y.pushPin.setOptions({state:Microsoft.Maps.EntityState.none,htmlContent:'<span class="dealer-pin"><span class="icon"></span><span class="txt-label">'+y.dealer.Number+"</span></span>"});
v.pushPin.setOptions({state:Microsoft.Maps.EntityState.selected,htmlContent:'<span class="dealer-pin selected"><span class="icon"></span><span class="txt-label">'+v.dealer.Number+"</span></span>"})
}v.infobox.setOptions({visible:true,state:Microsoft.Maps.EntityState.selected});
s.map.setView({bounds:null,center:v.pushPin.getLocation()})
}};
s.hideSelectedInfobox=function(){var t=_.find(s.dealerPushPins,{dealer:{isSelected:true}});
if(t){_.extend(t.dealer,{isSelected:false,isCurrent:true});
t.infobox.setOptions({visible:false,state:Microsoft.Maps.EntityState.none})
}};
s.toggleCollapsed=function(w){var u=h.find(".location-aware"),t=u.find(".dealers");
s.page.isCollapsed=!s.page.isCollapsed;
if(!s.page.isCollapsed){t.slideDown(w);
u.removeClass("collapsed");
if(window.metrics){metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"more expand"},"{customContentModuleOnPageClick}":{val:"find dealer"}})
}if(!s.map){s.mapApiPromise.done(function v(){s.renderMap()
})
}}else{t.slideUp(w);
u.addClass("collapsed")
}};
s.destroy=function(){if(s.map){s.map.dispose();
s.map=null
}};
s.onUpdateZipFlip=function(){s.searchOptions.model="location";
s.searchText.model=s.page.currentLocation;
s.page.moreDealersDeepLink=b.moreDealersLink+"?showResults=1&zipCode="+s.page.currentLocation;
c();
g(function(){metrics.clickEvent("global onclick",null,{"{customOnclickLinkName}":{val:"{sitePrefix}:global:action"},"{customOnclick}":{val:"postal code"}});
s.flipZip=true;
if($(".trigger-update-zip").dialog("instance")){$(".trigger-update-zip").dialog("open")
}else{var t=s.page.is_low?"90%":"80%";
$(".trigger-update-zip").dialog({appendTo:"#view-container",modal:true,width:t})
}$.ui.dialog.prototype._allowInteraction=function(u){return true
}
})
};
s.onSendToPhoneFlip=function(t){metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"send to phone:start"},"{customContentModuleOnPageClick}":{val:"find dealer"}});
s.flipDealer=t;
s.initFlip()
};
s.initFlip=function(){s.carrierOptions=[];
_.each(b.localization,function t(v,u){if(_.isString(v)&&/^send_to_phone/.test(u)){s.localization[u]=v
}});
_.each(b.localization.send_to_phone_carrier_options,function t(u){s.carrierOptions.push(u)
});
s.carrierModel=s.carrierOptions[0];
g(function(){$(".flip.send-to-phone").dialog({appendTo:"#view-container",modal:true,width:654});
$(".flip.send-to-phone").find('input[type="phone"]').fordPhoneInput();
$.ui.dialog.prototype._allowInteraction=function(u){return true
}
});
(function(w){function v(x){var y=x.which;
return(!x.shiftKey&&((y>=48&&y<=57)||(y>=96&&y<=105)))
}w.fn.fordPhoneInput=function u(){return this.on("keydown",function x(A){var D=A.which,E=this,B=this.value,C=false,z=false,y=false;
switch(D){case (32):C=true;
break;
case (8):case (46):case (37):case (38):case (39):case (40):break;
default:if(v(A)){z=true
}else{y=true
}}if(!y){if(z){if(B.replace(/\D/g,"").length===10&&this.selectionStart>11){y=true
}setTimeout(function(){var H="";
var I=E.value;
I=I.replace(/\s+/g,"");
I=I.substring(0,10);
var J=E.selectionStart;
for(var G=0,F=I.length;
G<F;
G++){if(G===3||G===6){if(J===4||J===8){J=J+1
}H+=" "
}H+=I[G]
}E.value=H;
E.selectionStart=J;
E.selectionEnd=J
},25)
}else{if(C){y=!(/^\d{3}$/.test(B)||/^\d{3}\s\d{4}$/.test(B))
}}}if(y){A.preventDefault();
return false
}})
}
})(jQuery)
};
s.onCarrierChange=function j(t){if(t.carrierModel===undefined){t.carrierModel=s.carrierOptions[0]
}};
s.onSubmitFlip=function m(u){var C=angular.element(u.target),z=C.find('[name="carrier"]'),w,y,F,B,t;
u.preventDefault();
C.find(".errors").stop(true,false).slideUp("fast",function x(H){angular.element(this).find(".error").stop(true,false).hide()
});
F=C.find('[name="number"]').val();
y=F.replace(/\D/g,"").replace(/^1/g,"");
B=angular.element.trim(z.val());
var D={title:s.flipDealer.Name,text:s.flipDealer.AddressStreet+" "+s.flipDealer.AddressCityStateZip,phone:s.flipDealer.Phone};
if(!y||y.length!==10||!F.match(/^[0-9 \-()]+$/)){t="number"
}else{if(!B||B==="?"){t="carrier"
}}if(t){C.find(".errors").stop(true,true).show().find(".error."+t).slideDown()
}else{w=angular.element.param({to:y+"@"+B,from:z.attr("data-from")+"@ford.com",fromDisplayName:z.attr("data-from")+"@ford.com",template:"lad",data:JSON.stringify(D),html:false});
var v=C.attr("action");
angular.element.post(v,w).done(function A(H){metrics.clickEvent("homepage onclick",null,{"{customClick}":{val:"send to phone:complete"},"{customContentModuleOnPageClick}":{val:"find dealer"}})
}).fail(function E(I,J,H){});
C.add("p",C.parent()).hide();
C.parent().find(".success").slideDown("fast",function G(H){g(onCloseFlip,1000)
})
}};
function e(t,u){d.breakpoint=u.breakpoint;
g(function(){d.breakpoint=u.breakpoint;
if(s.page.is_low!==s.isMobile()){s.page.is_low=s.isMobile();
if(s.page.hasLocation){s.renderLocationAware()
}}})
}function i(){if(s.userInfo&&s.userInfo.zip){s.searchOptions.model="location";
s.searchText.model=s.userInfo.zip;
s.page.currentLocation=s.userInfo.zip;
s.page.moreDealersDeepLink=b.moreDealersLink+"?showResults=1&zipCode="+s.page.currentLocation;
var u=metrics.getCookieSub("FPI","zip")?true:false;
s.setCookie(s.page.currentLocation);
s.onSearchSubmit(true,u)
}else{var t={Error:{Code:{}}};
g(function(){t.Error.Code=1;
s.searchError(t);
s.isBusy=false
},250)
}}s.init();
ngLocateDealerMini=s
}})();
function onCloseFlip(){if(ngLocateDealerMini){$(".flip.send-to-phone form").show();
$(".flip.send-to-phone form input").val("");
$(".flip.send-to-phone .success").hide();
if(ngLocateDealerMini.flipDealer){$(".flip.send-to-phone").dialog("close")
}ngLocateDealerMini.flipDealer=null;
if(ngLocateDealerMini.flipZip){$(".trigger-update-zip").dialog("close")
}ngLocateDealerMini.flipZip=false;
ngLocateDealerMini.typeAheadResults=[]
}}$(function(){var g=$(window);
var b=$(".scroll-indicator");
var c;
var j=$(".scroll-indicator-admin").length;
$(window).resize(function(){o()
});
b.click(function(){var p=g.height();
$("html, body").animate({scrollTop:(p-60)});
d();
metrics.clickEvent("global onclick",null,{"{customOnclickLinkName}":{val:"{sitePrefix}:global:action"},"{customOnclick}":{val:"scroll indicator:bottom"}})
});
g.scroll(function(){if(g.scrollTop()>199){d()
}else{o()
}});
function d(){n("scroll-indicator",true,{path:"/",domain:".ford.com"});
o()
}function o(){if(j){$(".scroll-indicator-admin .scroll-indicator").show();
return false
}if(m()){b.fadeIn("slow")
}else{b.fadeOut("slow",function(){b.removeClass("bounce")
})
}}function m(){var q=g.height();
var p=g.width();
if(q>900&&p<992){return false
}if(k()){return false
}var r=i("scroll-indicator");
if(r!==null&&r!==""){return false
}if(j){return false
}return true
}function k(D){var v=false;
if(!b.is(":visible")){b.addClass("invisible");
b.show()
}if(b.length){var y=b.outerHeight(true);
var w=b.outerWidth(true);
var r=b.offset().left;
var B=b.offset().top;
var C=B+y;
var t=r+w
}var q=$(".billboard .pagination");
if(q.length){var p=q.offset().left;
var A=q.offset().top;
var x=q.outerHeight(true);
var u=q.outerWidth(true);
var z=A+x;
var s=p+u;
v=(C<A||B>z||t<p||r>s)?false:true
}if(b.hasClass("invisible")){b.removeClass("invisible");
b.hide()
}if(D){v=q.offset().top
}return v
}function f(){var p=k(true);
b.animate({top:p-b.outerHeight(true)-10})
}function e(p){if(p&&document.cookie&&document.cookie!==""){var r=document.cookie.split(";");
for(var q=0;
q<r.length;
q++){var s=h(r[q]);
if(s.substr(0,p.length+1)===(p+"=")){return s.substr(p.length+1)
}}}return null
}function l(r,s,q){if(!q){q={}
}if(s===null){s="";
q.expires=-1
}var t=[r,"=",s];
if(q.expires){var p=new Date();
p.setTime(p.getTime()+(q.expires*24*60*60*1000));
t.push("; expires="+p.toUTCString())
}if(q.path){t.push("; path="+q.path)
}if(q.domain){t.push("; domain="+q.domain)
}if(q.secure){t.push("; secure")
}document.cookie=t.join("")
}function i(p){var q=e(p);
return(q)?decodeURIComponent(q):q
}function n(q,r,p){if(!p){p={}
}l(q,(r)?encodeURIComponent(r):r,p)
}function h(p){return p.replace(/^\s+|\s+$/g,"")
}function a(){n("scroll-indicator",null,{path:"/",domain:".ford.com"});
o();
if(!b.src){b.addClass("do-arrow")
}c=setInterval(function(){if($(".billboard .ford-carousel").hasClass("initialized")){if(k()){f()
}clearInterval(c)
}},1000)
}if(b.length){a()
}});
$(function(){if($(".showroom-billboard").length){$(".showroom-billboard .ford-carousel").fordCarousel()
}var a=window.matchMedia("(max-width: 991px)");
a.addListener(b);
b(a);
function b(c){var j=$(".showroom-billboard");
var i=$(".full-slide-link",j);
var e=j.find(".btn");
var d=e.css("color");
var f=e.css("backgroundColor");
var g=c.matches;
if(i&&!g){i.attr("style","display:block;");
i.hover(function(){h(true)
});
i.mouseout(function(){h(false)
})
}else{if(i&&g){i.attr("style","display:none;");
i.unbind("hover");
i.unbind("mouseout")
}}e.hover(function(){h(true)
},function(){h(false)
});
function h(k){if(k){e.css("color",f);
e.css("backgroundColor",d)
}else{e.css("color",d);
e.css("backgroundColor",f)
}}}$("img, source").each(function(){if($(this).attr("srcset")){$(this).attr("srcset",$(this).attr("srcset").replace("http:",location.protocol).replace("is.ford.com:4502",location.host))
}})
});
(function(){if(window.metrics){var c=metrics.getMetrics("{contentModulePageName}");
var a=metrics.getMetrics("{contentModuleTemplate}");
var b=function(){var d=jQuery("div[id^='component0']");
if(d&&d.length>0){jQuery(d).each(function(e,f){jQuery(this).find("a").each(function(g,i){var h=jQuery(this).attr("href");
if(h){h=h.replace("{page}",c).replace("{template}",a);
jQuery(this).attr("href",h)
}})
})
}};
if(metrics.isUS()){b();
if(jQuery("meta[data-component='billboardHomepage']").first().length>0){jQuery("meta[data-component='billboardHomepage']").first().parent().find("a").each(function(d,e){var h=jQuery(this).attr("href");
if(h){var g=c+"-"+a+"-bb";
var f=metrics.isInternalLink(h)?"intcmp":"fmccmp";
if(f){metrics.appendCampaignCode.call(this,f,g)
}}})
}if(jQuery("meta[data-component='showroomBillboard']").first().length>0){jQuery("meta[data-component='showroomBillboard']").first().parent().find("a").each(function(d,e){var f="bb-fv-hp-fv-show";
metrics.appendCampaignCode.call(this,"intcmp",f)
})
}if(jQuery("meta[data-component='incentivesAndOffers']").first().length>0){jQuery("meta[data-component='incentivesAndOffers']").first().parent().find("a").each(function(d,e){var h=jQuery(this).attr("href");
if(h){var g=c+"-"+a+"-io";
var f=metrics.isInternalLink(h)?"intcmp":"fmccmp";
if(f){metrics.appendCampaignCode.call(this,f,g)
}}})
}if(jQuery("meta[data-component='smartNextSteps']").first().length>0){jQuery("meta[data-component='smartNextSteps']").first().parent().find("a").each(function(f,g){var k=jQuery(this).attr("href");
if(k){var h=metrics.domainContains(k,"showroom.ford.com")||metrics.domainContains(k,"shop.ford.com")||metrics.domainContains(k,"mt.bp3.ford.com");
var e=metrics.domainContains(k,"inventory.ford.com");
var d=h?"bp":e?"si":"";
var j=c+"-"+a+"-"+d;
var i="intcmp";
if(i&&(h||e)){metrics.appendCampaignCode.call(this,i,j)
}}})
}if(jQuery("meta[data-component='brandGallery']").first().length>0){jQuery("meta[data-component='brandGallery']").first().parent().find("a").each(function(d,e){var h=jQuery(this).attr("href");
if(h){var g="hp-"+a+"-brand-gallery";
var f=metrics.isInternalLink(h)?"intcmp":"fmccmp";
if(f){metrics.appendCampaignCode.call(this,f,g)
}}})
}}}})();
$(function(){var w=0;
var h=0;
var r=0;
var f=0;
var g=0;
var u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;
if(u>=768){w=10;
h=38;
r=35;
f=7
}else{w=9;
h=27;
g=3;
f=5
}var a=$("#view-container");
var o=$(".browser-alert");
function s(){o.show();
$(o).dialog({appendTo:"#view-container",modal:true,width:"80%"});
$(".icon-close",o).click(function(){$(o).dialog("close")
})
}function d(){var y=navigator.userAgent,x,z=y.match(/(android|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];
if(/trident/i.test(z[1])){x=/\brv[ :]+(\d+)/g.exec(y)||[];
return{name:"IE ",version:(x[1]||"")}
}if(z[1]==="Chrome"){x=y.match(/\bOPR\/(\d+)/);
if(x!==null){return{name:"Opera",version:x[1]}
}}z=z[2]?[z[1],z[2]]:[navigator.appName,navigator.appVersion,"-?"];
if((x=y.match(/version\/(\d+)/i))!==null){z.splice(1,1,x[1])
}return{name:z[0].toLowerCase(),version:parseInt(z[1],10)}
}function l(x){if(x&&document.cookie&&document.cookie!==""){var z=document.cookie.split(";");
for(var y=0;
y<z.length;
y++){var A=m(z[y]);
if(A.substr(0,x.length+1)===(x+"=")){return A.substr(x.length+1)
}}}return null
}function b(z,A,y){if(!y){y={}
}if(A===null){A="";
y.expires=-1
}var B=[z,"=",A];
if(y.expires){var x=new Date();
x.setTime(x.getTime()+(y.expires*24*60*60*1000));
B.push("; expires="+x.toUTCString())
}if(y.path){B.push("; path="+y.path)
}if(y.domain){B.push("; domain="+y.domain)
}if(y.secure){B.push("; secure")
}document.cookie=B.join("")
}function n(x){var y=l(x);
return(y)?decodeURIComponent(y):y
}var p={};
function q(y,x){var C=(x)?l(y):p.get(y);
if(C){C=C.split("&");
var A={};
for(var z=0;
z<C.length;
z++){var B=C[z].split("=");
A[B[0]]=(B.length<2)?null:decodeURIComponent(B[1])
}return A
}return null
}function c(y,A,x){var z=p.getSubs(y,x);
return(z)?z[A]:z
}function i(y,z,x){if(!x){x={}
}b(y,(z)?encodeURIComponent(z):z,x)
}function v(z,A,y,C){var D=null;
if(A){var B=[];
for(var x in A){B.push(x+"="+encodeURIComponent(A[x]||""))
}D=B.join("&")
}if(C){p.set(z,D,y)
}else{b(z,D,y)
}}function e(y,B,A,x,C){var z=p.getSubs(y)||{};
if(A===null){delete z[B];
console.log(z);
if(!z){z=null
}}else{z[B]=A
}p.setSubs(y,z,x,C)
}function m(x){return x.replace(/^\s+|\s+$/g,"")
}var t=d();
var k=n("browser-alert");
var j=k!==null&&k!=="";
if(!j&&((t.name==="android"&&t.version<=g)||(t.name==="msie"&&t.version<=w)||(t.name==="chrome"&&t.version<=h)||(t.name==="firefox"&&t.version<=r)||(t.name==="safari"&&t.version<=f))){s();
i("browser-alert",true,{path:"/",domain:".ford.com"});
metrics.clickEvent("generic overlay home",null,{"{customPageName}":{val:"browser unsupported overlay"},"{customPageNameNoVehicle}":{val:"browser unsupported overlay"}})
}});
(function(){window.isMobileTemplate=false;
if(window.appendCampaignCodesHomepageTarget){window.appendCampaignCodesHomepageTarget()
}jQuery(window).load(function(){setTimeout(function(){if(jQuery(".ford-carousel").length>0){jQuery(".ford-carousel").each(function(a,b){if(jQuery.fn.fordCarousel&&(typeof jQuery.fn.fordCarousel==="function")&&!jQuery(this).data("ford-carousel")){jQuery(this).fordCarousel()
}});
if(window.console&&window.console.log){window.console.log("global carousel active")
}}},950)
})
})();